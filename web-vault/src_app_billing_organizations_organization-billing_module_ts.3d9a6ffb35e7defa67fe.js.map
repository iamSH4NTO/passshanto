{"version":3,"file":"src_app_billing_organizations_organization-billing_module_ts.3d9a6ffb35e7defa67fe.js","mappings":"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","sources":["webpack://@bitwarden/web-vault/../../libs/assets/src/svg/svgs/gear.ts","webpack://@bitwarden/web-vault/../../libs/common/src/admin-console/models/request/organization-api-key.request.ts","webpack://@bitwarden/web-vault/../../libs/common/src/admin-console/models/request/organization-connection.request.ts","webpack://@bitwarden/web-vault/../../libs/common/src/billing/models/api/billing-sync-config.api.ts","webpack://@bitwarden/web-vault/../../libs/common/src/billing/models/request/billing-sync-config.request.ts","webpack://@bitwarden/web-vault/../../libs/common/src/billing/models/request/organization-sm-subscription-update.request.ts","webpack://@bitwarden/web-vault/../../libs/common/src/billing/models/request/organization-subscription-update.request.ts","webpack://@bitwarden/web-vault/../../libs/common/src/billing/models/request/sm-subscribe.request.ts","webpack://@bitwarden/web-vault/../../libs/common/src/billing/models/view/self-hosted-organization-subscription.view.ts","webpack://@bitwarden/web-vault/./src/app/billing/guards/organization-is-unmanaged.guard.ts","webpack://@bitwarden/web-vault/./src/app/billing/organizations/adjust-subscription.component.ts","webpack://@bitwarden/web-vault/./src/app/billing/organizations/adjust-subscription.component.html","webpack://@bitwarden/web-vault/./src/app/billing/organizations/billing-sync-api-key.component.ts","webpack://@bitwarden/web-vault/./src/app/billing/organizations/billing-sync-api-key.component.html","webpack://@bitwarden/web-vault/./src/app/billing/organizations/billing-sync-key.component.ts","webpack://@bitwarden/web-vault/./src/app/billing/organizations/billing-sync-key.component.html","webpack://@bitwarden/web-vault/./src/app/billing/organizations/change-plan.component.ts","webpack://@bitwarden/web-vault/./src/app/billing/organizations/change-plan.component.html","webpack://@bitwarden/web-vault/./src/app/billing/organizations/download-license.component.ts","webpack://@bitwarden/web-vault/./src/app/billing/organizations/download-license.component.html","webpack://@bitwarden/web-vault/./src/app/billing/organizations/organization-billing-history-view.component.ts","webpack://@bitwarden/web-vault/./src/app/billing/organizations/organization-billing-history-view.component.html","webpack://@bitwarden/web-vault/./src/app/billing/organizations/organization-billing-routing.module.ts","webpack://@bitwarden/web-vault/./src/app/billing/organizations/organization-billing.module.ts","webpack://@bitwarden/web-vault/./src/app/billing/organizations/organization-subscription-cloud.component.ts","webpack://@bitwarden/web-vault/./src/app/billing/organizations/organization-subscription-cloud.component.html","webpack://@bitwarden/web-vault/./src/app/billing/organizations/organization-subscription-selfhost.component.ts","webpack://@bitwarden/web-vault/./src/app/billing/organizations/organization-subscription-selfhost.component.html","webpack://@bitwarden/web-vault/./src/app/billing/organizations/payment-details/organization-payment-details.component.ts","webpack://@bitwarden/web-vault/./src/app/billing/organizations/payment-details/organization-payment-details.component.html","webpack://@bitwarden/web-vault/./src/app/billing/organizations/sm-adjust-subscription.component.ts","webpack://@bitwarden/web-vault/./src/app/billing/organizations/sm-adjust-subscription.component.html","webpack://@bitwarden/web-vault/./src/app/billing/organizations/sm-subscribe-standalone.component.ts","webpack://@bitwarden/web-vault/./src/app/billing/organizations/sm-subscribe-standalone.component.html","webpack://@bitwarden/web-vault/./src/app/billing/organizations/subscription-hidden.component.ts","webpack://@bitwarden/web-vault/./src/app/billing/organizations/subscription-status.component.ts","webpack://@bitwarden/web-vault/./src/app/billing/organizations/subscription-status.component.html"],"sourcesContent":["import { svgIcon } from \"../icon-service\";\n\nexport const GearIcon = svgIcon`\n  <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"4.8 6 110.4 107.52\">\n    <path class=\"tw-fill-illustration-bg-primary\" d=\"M59.64 84.96c12.924 0 23.4-10.316 23.4-23.04 0-12.725-10.476-23.04-23.4-23.04-12.923 0-23.4 10.315-23.4 23.04 0 12.724 10.477 23.04 23.4 23.04Z\"/>\n    <path class=\"tw-fill-illustration-outline\" fill-rule=\"evenodd\" d=\"M59.64 40.08c-12.278 0-22.2 9.795-22.2 21.84 0 12.044 9.922 21.84 22.2 21.84 12.278 0 22.2-9.796 22.2-21.84 0-12.045-9.922-21.84-22.2-21.84Zm-24.6 21.84c0-13.405 11.031-24.24 24.6-24.24s24.6 10.835 24.6 24.24c0 13.405-11.031 24.24-24.6 24.24s-24.6-10.835-24.6-24.24Z\" clip-rule=\"evenodd\"/>\n    <path class=\"tw-fill-illustration-bg-primary\" d=\"M96 28.8a8.64 8.64 0 0 0 8.639-8.64 8.64 8.64 0 1 0-17.28 0A8.64 8.64 0 0 0 96 28.8Z\"/>\n    <path class=\"tw-fill-illustration-outline\" fill-rule=\"evenodd\" d=\"M96 12.72a7.44 7.44 0 1 0 0 14.88 7.44 7.44 0 0 0 0-14.88Zm-9.84 7.44c0-5.434 4.405-9.84 9.84-9.84 5.434 0 9.84 4.406 9.84 9.84 0 5.435-4.406 9.84-9.84 9.84-5.435 0-9.84-4.405-9.84-9.84Z\" clip-rule=\"evenodd\"/>\n    <path class=\"tw-fill-illustration-bg-secondary\" d=\"M105.359 72.72a8.64 8.64 0 0 0 8.64-8.64 8.64 8.64 0 1 0-17.28 0 8.64 8.64 0 0 0 8.64 8.64Z\"/>\n    <path class=\"tw-fill-illustration-outline\" fill-rule=\"evenodd\" d=\"M105.36 56.64a7.44 7.44 0 1 0 0 14.881 7.44 7.44 0 0 0 0-14.88Zm-9.84 7.44c0-5.434 4.405-9.84 9.84-9.84 5.434 0 9.84 4.406 9.84 9.84 0 5.435-4.406 9.84-9.84 9.84-5.435 0-9.84-4.405-9.84-9.84Z\" clip-rule=\"evenodd\"/>\n    <path class=\"tw-fill-illustration-bg-tertiary\" d=\"M97.44 112.32a8.64 8.64 0 1 0 0-17.28 8.64 8.64 0 0 0 0 17.28Z\"/>\n    <path class=\"tw-fill-illustration-outline\" fill-rule=\"evenodd\" d=\"M97.44 96.24a7.44 7.44 0 1 0 0 14.88 7.44 7.44 0 0 0 0-14.88Zm-9.84 7.44c0-5.435 4.405-9.84 9.84-9.84 5.434 0 9.84 4.405 9.84 9.84 0 5.434-4.406 9.84-9.84 9.84-5.435 0-9.84-4.406-9.84-9.84Z\" clip-rule=\"evenodd\"/>\n    <path class=\"tw-fill-illustration-bg-primary\" d=\"M39.119 111.599a8.64 8.64 0 1 0 0-17.28 8.64 8.64 0 0 0 0 17.28Z\"/>\n    <path class=\"tw-fill-illustration-outline\" fill-rule=\"evenodd\" d=\"M39.12 95.52a7.44 7.44 0 1 0 0 14.88 7.44 7.44 0 0 0 0-14.88Zm-9.84 7.44c0-5.434 4.405-9.84 9.84-9.84 5.434 0 9.84 4.406 9.84 9.84 0 5.435-4.406 9.84-9.84 9.84-5.435 0-9.84-4.405-9.84-9.84Z\" clip-rule=\"evenodd\"/>\n    <path class=\"tw-fill-illustration-bg-secondary\" d=\"M14.64 58.32a8.64 8.64 0 1 0 0-17.28 8.64 8.64 0 0 0 0 17.28Z\"/>\n    <path class=\"tw-fill-illustration-outline\" fill-rule=\"evenodd\" d=\"M14.64 42.24a7.44 7.44 0 1 0 0 14.88 7.44 7.44 0 0 0 0-14.88ZM4.8 49.68c0-5.435 4.405-9.84 9.84-9.84 5.434 0 9.84 4.405 9.84 9.84 0 5.434-4.406 9.84-9.84 9.84-5.435 0-9.84-4.406-9.84-9.84Z\" clip-rule=\"evenodd\"/>\n    <path class=\"tw-fill-illustration-bg-tertiary\" d=\"M39.84 24.48a8.64 8.64 0 1 0 0-17.28 8.64 8.64 0 0 0 0 17.28Z\"/>\n    <path class=\"tw-fill-illustration-outline\" fill-rule=\"evenodd\" d=\"M39.84 8.4a7.44 7.44 0 1 0 0 14.88 7.44 7.44 0 0 0 0-14.88ZM30 15.84C30 10.406 34.406 6 39.84 6s9.84 4.405 9.84 9.84c0 5.434-4.405 9.84-9.84 9.84-5.434 0-9.84-4.405-9.84-9.84Z\" clip-rule=\"evenodd\"/>\n    <path class=\"tw-fill-illustration-outline\" fill-rule=\"evenodd\" d=\"M43.687 24.097a1.2 1.2 0 0 1 1.576.63l6.48 15.12a1.2 1.2 0 0 1-2.206.946l-6.48-15.12a1.2 1.2 0 0 1 .63-1.576ZM90.305 26.452a1.2 1.2 0 0 1 .123 1.692l-13.68 15.84a1.2 1.2 0 1 1-1.816-1.568l13.68-15.84a1.2 1.2 0 0 1 1.693-.124ZM22.844 52.239a1.2 1.2 0 0 1 1.477-.835l12.96 3.6a1.2 1.2 0 1 1-.642 2.312l-12.96-3.6a1.2 1.2 0 0 1-.835-1.477ZM51.228 82.475a1.2 1.2 0 0 1 .458 1.634l-6.48 11.52a1.2 1.2 0 1 1-2.092-1.177l6.48-11.52a1.2 1.2 0 0 1 1.634-.457ZM75.065 77.564a1.2 1.2 0 0 1 1.691.141l15.84 18.72a1.2 1.2 0 1 1-1.832 1.55l-15.84-18.72a1.2 1.2 0 0 1 .141-1.69ZM82.568 61.78a1.2 1.2 0 0 1 1.332-1.052l12.24 1.44a1.2 1.2 0 0 1-.28 2.384l-12.24-1.44a1.2 1.2 0 0 1-1.052-1.332Z\" clip-rule=\"evenodd\"/>\n    <path class=\"tw-fill-illustration-tertiary\" d=\"M72.633 60.217a1.2 1.2 0 0 0-.397.892v1.668c0 .354.156.69.427.918l2.501 2.107c.403.339.537.9.333 1.384l-.788 1.868a1.2 1.2 0 0 1-1.158.733l-3.424-.149a1.2 1.2 0 0 0-.898.349l-1.17 1.165a1.2 1.2 0 0 0-.349.956l.289 3.26a1.2 1.2 0 0 1-.732 1.212l-1.874.784a1.2 1.2 0 0 1-1.352-.302l-2.262-2.497a1.2 1.2 0 0 0-.89-.394h-1.685a1.2 1.2 0 0 0-.915.423l-2.122 2.498a1.2 1.2 0 0 1-1.378.33l-1.884-.788a1.2 1.2 0 0 1-.736-1.16l.148-3.397a1.2 1.2 0 0 0-.352-.902l-1.17-1.165a1.2 1.2 0 0 0-.952-.345l-3.287.288a1.2 1.2 0 0 1-1.21-.729l-.784-1.857a1.2 1.2 0 0 1 .304-1.36l2.501-2.245a1.2 1.2 0 0 0 .398-.893v-1.676a1.2 1.2 0 0 0-.416-.909l-2.526-2.176a1.2 1.2 0 0 1-.323-1.376l.792-1.877a1.2 1.2 0 0 1 1.158-.732l3.424.148a1.2 1.2 0 0 0 .898-.349l1.172-1.166c.251-.25.379-.6.348-.953L52 48.402a1.2 1.2 0 0 1 .732-1.21l1.869-.782a1.2 1.2 0 0 1 1.359.31l2.33 2.616a1.2 1.2 0 0 0 .897.402h1.68a1.2 1.2 0 0 0 .914-.423l2.123-2.497a1.2 1.2 0 0 1 1.377-.33l1.884.788a1.2 1.2 0 0 1 .736 1.159l-.148 3.397a1.2 1.2 0 0 0 .352.902l1.17 1.166c.251.25.6.376.952.345l3.287-.29a1.2 1.2 0 0 1 1.21.73l.784 1.858a1.2 1.2 0 0 1-.302 1.359l-2.573 2.315Zm-14.677-3.025c-2.704 1.105-3.952 4.141-2.843 6.764 1.11 2.692 4.16 3.934 6.794 2.83 2.634-1.104 3.951-4.141 2.842-6.764-1.04-2.692-4.09-3.934-6.793-2.83Z\"/>\n    <path class=\"tw-fill-illustration-outline\" fill-rule=\"evenodd\" d=\"M54.138 45.303a2.4 2.4 0 0 1 2.718.618l2.33 2.617h1.68l2.123-2.498a2.4 2.4 0 0 1 2.755-.66l1.884.788a2.4 2.4 0 0 1 1.472 2.32l-.148 3.396 1.17 1.165 3.287-.289a2.4 2.4 0 0 1 2.421 1.458l.784 1.859a2.4 2.4 0 0 1-.606 2.717l-2.572 2.315v1.668l2.501 2.107a2.4 2.4 0 0 1 .665 2.769l-.788 1.868a2.4 2.4 0 0 1-2.315 1.465l-3.424-.149-1.17 1.165.29 3.26a2.4 2.4 0 0 1-1.465 2.425l-1.874.784a2.4 2.4 0 0 1-2.705-.603L60.89 75.37h-1.685l-2.123 2.498a2.4 2.4 0 0 1-2.755.66l-1.884-.788a2.4 2.4 0 0 1-1.472-2.32l.148-3.396-1.17-1.165-3.287.289a2.4 2.4 0 0 1-2.421-1.458l-.784-1.858a2.4 2.4 0 0 1 .608-2.718l2.501-2.246v-1.676l-2.526-2.176a2.4 2.4 0 0 1-.645-2.751l.792-1.878a2.4 2.4 0 0 1 2.315-1.465l3.425.149 1.17-1.166-.292-3.401a2.4 2.4 0 0 1 1.465-2.42l1.869-.782Zm.926 2.214-1.869.782.293 3.4a2.4 2.4 0 0 1-.698 1.907l-1.171 1.166a2.4 2.4 0 0 1-1.797.697l-3.424-.148-.792 1.878 2.526 2.176a2.4 2.4 0 0 1 .833 1.818v1.676a2.4 2.4 0 0 1-.796 1.785L45.668 66.9l.783 1.858 3.287-.289a2.4 2.4 0 0 1 1.904.69l1.17 1.165a2.4 2.4 0 0 1 .704 1.806l-.148 3.397 1.884.787 2.123-2.497a2.4 2.4 0 0 1 1.829-.846h1.685a2.4 2.4 0 0 1 1.78.789l2.261 2.496 1.874-.783-.29-3.26a2.4 2.4 0 0 1 .698-1.912l1.17-1.165a2.4 2.4 0 0 1 1.797-.697l3.424.149.788-1.868-2.502-2.108a2.4 2.4 0 0 1-.853-1.835v-1.669a2.4 2.4 0 0 1 .794-1.783l2.573-2.315-.784-1.859-3.287.289a2.4 2.4 0 0 1-1.903-.69l-1.17-1.165a2.4 2.4 0 0 1-.705-1.806l.148-3.397-1.884-.788-2.123 2.498a2.4 2.4 0 0 1-1.828.846h-1.68a2.4 2.4 0 0 1-1.792-.804l-2.331-2.617Zm10.798 12.055c-1.301-3.338-5.073-4.834-8.36-3.49-3.313 1.352-4.865 5.091-3.496 8.336 1.364 3.302 5.117 4.836 8.365 3.474 3.21-1.345 4.858-5.06 3.49-8.32Zm-2.232.882c-.786-2.033-3.107-3.014-5.22-2.151-2.094.855-3.037 3.187-2.191 5.186l.004.01a3.98 3.98 0 0 0 5.22 2.18c2.052-.86 3.038-3.209 2.2-5.19a1.065 1.065 0 0 1-.013-.035Z\" clip-rule=\"evenodd\"/>\n  </svg>\n`;\n","import { SecretVerificationRequest } from \"../../../auth/models/request/secret-verification.request\";\nimport { OrganizationApiKeyType } from \"../../enums\";\n\nexport class OrganizationApiKeyRequest extends SecretVerificationRequest {\n  type: OrganizationApiKeyType = OrganizationApiKeyType.Default;\n}\n","import { BillingSyncConfigRequest } from \"../../../billing/models/request/billing-sync-config.request\";\nimport { OrganizationConnectionType } from \"../../enums\";\n\nimport { ScimConfigRequest } from \"./scim-config.request\";\n\n/**API request config types for OrganizationConnectionRequest */\nexport type OrganizationConnectionRequestConfigs = BillingSyncConfigRequest | ScimConfigRequest;\n\nexport class OrganizationConnectionRequest {\n  constructor(\n    public organizationId: string,\n    public type: OrganizationConnectionType,\n    public enabled: boolean,\n    public config: OrganizationConnectionRequestConfigs,\n  ) {}\n}\n","// FIXME: Update this file to be type safe and remove this and next line\n// @ts-strict-ignore\nimport { BaseResponse } from \"../../../models/response/base.response\";\n\nexport class BillingSyncConfigApi extends BaseResponse {\n  billingSyncKey: string;\n  lastLicenseSync: Date;\n\n  constructor(data: any) {\n    super(data);\n    if (data == null) {\n      return;\n    }\n    this.billingSyncKey = this.getResponseProperty(\"BillingSyncKey\");\n\n    const lastLicenseSyncString = this.getResponseProperty(\"LastLicenseSync\");\n    if (lastLicenseSyncString) {\n      this.lastLicenseSync = new Date(lastLicenseSyncString);\n    }\n  }\n}\n","export class BillingSyncConfigRequest {\n  constructor(private billingSyncKey: string) {}\n}\n","// FIXME: Update this file to be type safe and remove this and next line\n// @ts-strict-ignore\nexport class OrganizationSmSubscriptionUpdateRequest {\n  /**\n   * The number of seats to add or remove from the subscription.\n   */\n  seatAdjustment: number;\n\n  /**\n   * The maximum number of seats that can be auto-scaled for the subscription.\n   */\n  maxAutoscaleSeats?: number;\n\n  /**\n   * The number of additional service accounts to add or remove from the subscription.\n   */\n  serviceAccountAdjustment: number;\n\n  /**\n   * The maximum number of additional service accounts that can be auto-scaled for the subscription.\n   */\n  maxAutoscaleServiceAccounts?: number;\n}\n","export class OrganizationSubscriptionUpdateRequest {\n  /**\n   * The number of seats to add or remove from the subscription.\n   * Applies to both PM and SM request types.\n   */\n  seatAdjustment: number;\n\n  /**\n   * The maximum number of seats that can be auto-scaled for the subscription.\n   * Applies to both PM and SM request types.\n   */\n  maxAutoscaleSeats?: number;\n\n  /**\n   * Build a subscription update request for the Password Manager product type.\n   * @param seatAdjustment - The number of seats to add or remove from the subscription.\n   * @param maxAutoscaleSeats - The maximum number of seats that can be auto-scaled for the subscription.\n   */\n  constructor(seatAdjustment: number, maxAutoscaleSeats?: number) {\n    this.seatAdjustment = seatAdjustment;\n    this.maxAutoscaleSeats = maxAutoscaleSeats;\n  }\n}\n","// FIXME: Update this file to be type safe and remove this and next line\n// @ts-strict-ignore\nexport class SecretsManagerSubscribeRequest {\n  additionalSmSeats: number;\n  additionalServiceAccounts: number;\n}\n","// FIXME: Update this file to be type safe and remove this and next line\n// @ts-strict-ignore\nimport { View } from \"../../../models/view/view\";\nimport { OrganizationSubscriptionResponse } from \"../response/organization-subscription.response\";\n\nexport class SelfHostedOrganizationSubscriptionView implements View {\n  planName: string;\n\n  /**\n   * Date the subscription expires, including the grace period.\n   */\n  expirationWithGracePeriod?: Date;\n\n  /**\n   * Date the subscription expires, excluding the grace period.\n   * This will be `null` for older (< v12) license files because they do not include this date.\n   * In this case, you have to rely on the `expirationWithGracePeriod` instead.\n   */\n  expirationWithoutGracePeriod?: Date;\n\n  constructor(response: OrganizationSubscriptionResponse) {\n    if (response == null) {\n      return;\n    }\n\n    this.planName = response.plan.name;\n    this.expirationWithGracePeriod =\n      response.expiration != null ? new Date(response.expiration) : null;\n    this.expirationWithoutGracePeriod =\n      response.expirationWithoutGracePeriod != null\n        ? new Date(response.expirationWithoutGracePeriod)\n        : null;\n  }\n\n  /**\n   * The subscription has separate expiration dates for the subscription and the end of grace period.\n   */\n  get hasSeparateGracePeriod() {\n    return this.expirationWithGracePeriod != null && this.expirationWithoutGracePeriod != null;\n  }\n\n  /**\n   * True if the subscription has an expiration date.\n   */\n  get hasExpiration() {\n    return this.expirationWithGracePeriod != null;\n  }\n\n  /**\n   * True if the subscription has an expiration date that has past, but may still be within the grace period.\n   * For older licenses (< v12), this will always be false because they do not include the `expirationWithoutGracePeriod`.\n   */\n  get isExpiredWithoutGracePeriod() {\n    return this.hasSeparateGracePeriod && this.expirationWithoutGracePeriod < new Date();\n  }\n\n  /**\n   * True if the subscription has an expiration date that has past, including the grace period.\n   */\n  get isExpiredAndOutsideGracePeriod() {\n    return this.hasExpiration && this.expirationWithGracePeriod < new Date();\n  }\n\n  /**\n   * In the case of a trial, where there is no grace period, the expirationWithGracePeriod and expirationWithoutGracePeriod will\n   * be exactly the same. This can be used to hide the grace period note.\n   */\n  get isInTrial() {\n    return (\n      this.expirationWithGracePeriod &&\n      this.expirationWithoutGracePeriod &&\n      this.expirationWithGracePeriod.getTime() === this.expirationWithoutGracePeriod.getTime()\n    );\n  }\n}\n","import { inject } from \"@angular/core\";\nimport { ActivatedRouteSnapshot, CanActivateFn } from \"@angular/router\";\nimport { firstValueFrom, map } from \"rxjs\";\n\nimport {\n  getOrganizationById,\n  OrganizationService,\n} from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { ProviderService } from \"@bitwarden/common/admin-console/abstractions/provider.service\";\nimport { ProviderStatusType } from \"@bitwarden/common/admin-console/enums\";\nimport { AccountService } from \"@bitwarden/common/auth/abstractions/account.service\";\n\nexport const organizationIsUnmanaged: CanActivateFn = async (route: ActivatedRouteSnapshot) => {\n  const organizationService = inject(OrganizationService);\n  const providerService = inject(ProviderService);\n  const accountService = inject(AccountService);\n\n  const userId = await firstValueFrom(accountService.activeAccount$.pipe(map((a) => a?.id)));\n\n  if (!userId) {\n    throw new Error(\"No user found.\");\n  }\n\n  const organization = await firstValueFrom(\n    organizationService\n      .organizations$(userId)\n      .pipe(getOrganizationById(route.params.organizationId)),\n  );\n\n  if (!organization) {\n    throw new Error(\"No organization found.\");\n  }\n\n  if (!organization.hasProvider) {\n    return true;\n  }\n\n  const provider = await firstValueFrom(providerService.get$(organization.providerId, userId));\n\n  if (!provider) {\n    return true;\n  }\n\n  return provider.providerStatus !== ProviderStatusType.Billable;\n};\n","// FIXME: Update this file to be type safe and remove this and next line\n// @ts-strict-ignore\nimport { Component, EventEmitter, Input, OnDestroy, OnInit, Output } from \"@angular/core\";\nimport { FormBuilder, Validators } from \"@angular/forms\";\nimport { Subject, firstValueFrom, takeUntil } from \"rxjs\";\n\nimport { OrganizationApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/organization/organization-api.service.abstraction\";\nimport {\n  getOrganizationById,\n  InternalOrganizationServiceAbstraction,\n} from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { OrganizationData } from \"@bitwarden/common/admin-console/models/data/organization.data\";\nimport { AccountService } from \"@bitwarden/common/auth/abstractions/account.service\";\nimport { getUserId } from \"@bitwarden/common/auth/services/account.service\";\nimport { OrganizationSubscriptionUpdateRequest } from \"@bitwarden/common/billing/models/request/organization-subscription-update.request\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { ToastService } from \"@bitwarden/components\";\n\n@Component({\n  selector: \"app-adjust-subscription\",\n  templateUrl: \"adjust-subscription.component.html\",\n  standalone: false,\n})\nexport class AdjustSubscription implements OnInit, OnDestroy {\n  @Input() organizationId: string;\n  @Input() maxAutoscaleSeats: number;\n  @Input() currentSeatCount: number;\n  @Input() seatPrice = 0;\n  @Input() interval = \"year\";\n  @Output() onAdjusted = new EventEmitter();\n\n  private destroy$ = new Subject<void>();\n\n  adjustSubscriptionForm = this.formBuilder.group({\n    newSeatCount: [0, [Validators.min(0)]],\n    limitSubscription: [false],\n    newMaxSeats: [0, [Validators.min(0)]],\n  });\n\n  constructor(\n    private i18nService: I18nService,\n    private organizationApiService: OrganizationApiServiceAbstraction,\n    private formBuilder: FormBuilder,\n    private toastService: ToastService,\n    private internalOrganizationService: InternalOrganizationServiceAbstraction,\n    private accountService: AccountService,\n  ) {}\n\n  ngOnInit() {\n    this.adjustSubscriptionForm.valueChanges.pipe(takeUntil(this.destroy$)).subscribe((value) => {\n      const maxAutoscaleSeatsControl = this.adjustSubscriptionForm.controls.newMaxSeats;\n\n      if (value.limitSubscription) {\n        maxAutoscaleSeatsControl.setValidators([Validators.min(value.newSeatCount)]);\n        maxAutoscaleSeatsControl.enable({ emitEvent: false });\n      } else {\n        maxAutoscaleSeatsControl.disable({ emitEvent: false });\n      }\n    });\n\n    this.adjustSubscriptionForm.patchValue({\n      newSeatCount: this.currentSeatCount,\n      newMaxSeats: this.maxAutoscaleSeats,\n      limitSubscription: this.maxAutoscaleSeats != null,\n    });\n  }\n\n  submit = async () => {\n    this.adjustSubscriptionForm.markAllAsTouched();\n    if (this.adjustSubscriptionForm.invalid) {\n      return;\n    }\n    const request = new OrganizationSubscriptionUpdateRequest(\n      this.additionalSeatCount,\n      this.adjustSubscriptionForm.value.newMaxSeats,\n    );\n\n    const response = await this.organizationApiService.updatePasswordManagerSeats(\n      this.organizationId,\n      request,\n    );\n\n    const userId = await firstValueFrom(getUserId(this.accountService.activeAccount$));\n    const organization = await firstValueFrom(\n      this.internalOrganizationService\n        .organizations$(userId)\n        .pipe(getOrganizationById(this.organizationId)),\n    );\n\n    const organizationData = new OrganizationData(response, {\n      isMember: organization.isMember,\n      isProviderUser: organization.isProviderUser,\n    });\n\n    await this.internalOrganizationService.upsert(organizationData, userId);\n\n    this.toastService.showToast({\n      variant: \"success\",\n      title: null,\n      message: this.i18nService.t(\"subscriptionUpdated\"),\n    });\n\n    this.onAdjusted.emit();\n  };\n\n  limitSubscriptionChanged() {\n    if (!this.adjustSubscriptionForm.value.limitSubscription) {\n      this.adjustSubscriptionForm.value.newMaxSeats = null;\n    }\n  }\n\n  get additionalSeatCount(): number {\n    return this.adjustSubscriptionForm.value.newSeatCount\n      ? this.adjustSubscriptionForm.value.newSeatCount - this.currentSeatCount\n      : 0;\n  }\n\n  get maxSeatTotal(): number {\n    return Math.abs((this.adjustSubscriptionForm.value.newMaxSeats ?? 0) * this.seatPrice);\n  }\n\n  get seatTotalCost(): number {\n    return Math.abs(this.adjustSubscriptionForm.value.newSeatCount * this.seatPrice);\n  }\n\n  get limitSubscription(): boolean {\n    return this.adjustSubscriptionForm.value.limitSubscription;\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n}\n","<form [formGroup]=\"adjustSubscriptionForm\" [bitSubmit]=\"submit\">\n  <div class=\"tw-grid tw-grid-cols-12 tw-gap-4\">\n    <div class=\"tw-col-span-8\">\n      <bit-form-field>\n        <bit-label>{{ \"subscriptionSeats\" | i18n }}</bit-label>\n        <input bitInput formControlName=\"newSeatCount\" type=\"number\" min=\"0\" step=\"1\" />\n        <bit-hint>\n          <strong>{{ \"total\" | i18n }}:</strong>\n          {{ adjustSubscriptionForm.value.newSeatCount || 0 }} &times;\n          {{ seatPrice | currency: \"$\" }} = {{ seatTotalCost | currency: \"$\" }} /\n          {{ interval | i18n }}</bit-hint\n        >\n      </bit-form-field>\n    </div>\n  </div>\n  <div>\n    <bit-form-control>\n      <input\n        bitCheckbox\n        formControlName=\"limitSubscription\"\n        type=\"checkbox\"\n        (change)=\"limitSubscriptionChanged()\"\n      />\n      <bit-label>{{ \"limitSubscription\" | i18n }}</bit-label>\n      <bit-hint> {{ \"limitSubscriptionDesc\" | i18n }}</bit-hint>\n    </bit-form-control>\n  </div>\n  <div\n    class=\"tw-grid tw-grid-cols-12 tw-gap-4 tw-mb-4\"\n    [hidden]=\"!adjustSubscriptionForm.value.limitSubscription\"\n  >\n    <div class=\"tw-col-span-8\">\n      <bit-form-field>\n        <bit-label>{{ \"maxSeatLimit\" | i18n }}</bit-label>\n        <input\n          bitInput\n          formControlName=\"newMaxSeats\"\n          type=\"number\"\n          [min]=\"\n            adjustSubscriptionForm.value.newSeatCount == null\n              ? 1\n              : adjustSubscriptionForm.value.newSeatCount\n          \"\n          step=\"1\"\n        />\n        <bit-hint>\n          <strong>{{ \"maxSeatCost\" | i18n }}:</strong>\n          {{ adjustSubscriptionForm.value.newMaxSeats || 0 }} &times;\n          {{ seatPrice | currency: \"$\" }} = {{ maxSeatTotal | currency: \"$\" }} /\n          {{ interval | i18n }}</bit-hint\n        >\n      </bit-form-field>\n    </div>\n  </div>\n  <button bitButton buttonType=\"primary\" bitFormButton type=\"submit\">\n    {{ \"save\" | i18n }}\n  </button>\n</form>\n","// FIXME: Update this file to be type safe and remove this and next line\n// @ts-strict-ignore\nimport { Component, Inject } from \"@angular/core\";\nimport { FormControl, FormGroup, Validators } from \"@angular/forms\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { OrganizationApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/organization/organization-api.service.abstraction\";\nimport { OrganizationApiKeyType } from \"@bitwarden/common/admin-console/enums\";\nimport { OrganizationApiKeyRequest } from \"@bitwarden/common/admin-console/models/request/organization-api-key.request\";\nimport { UserVerificationService } from \"@bitwarden/common/auth/abstractions/user-verification/user-verification.service.abstraction\";\nimport { ApiKeyResponse } from \"@bitwarden/common/auth/models/response/api-key.response\";\nimport { Verification } from \"@bitwarden/common/auth/types/verification\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { DIALOG_DATA, DialogService, ToastService } from \"@bitwarden/components\";\n\nexport interface BillingSyncApiModalData {\n  organizationId: string;\n  hasBillingToken: boolean;\n}\n\n@Component({\n  templateUrl: \"billing-sync-api-key.component.html\",\n  standalone: false,\n})\nexport class BillingSyncApiKeyComponent {\n  protected organizationId: string;\n  protected hasBillingToken: boolean;\n\n  protected formGroup = new FormGroup({\n    verification: new FormControl<Verification>(null, Validators.required),\n  });\n\n  showRotateScreen: boolean;\n  clientSecret?: string;\n  keyRevisionDate?: Date;\n  lastSyncDate?: Date;\n\n  constructor(\n    @Inject(DIALOG_DATA) protected data: BillingSyncApiModalData,\n    private userVerificationService: UserVerificationService,\n    private apiService: ApiService,\n    private platformUtilsService: PlatformUtilsService,\n    private i18nService: I18nService,\n    private organizationApiService: OrganizationApiServiceAbstraction,\n    private logService: LogService,\n    private toastService: ToastService,\n  ) {\n    this.organizationId = data.organizationId;\n    this.hasBillingToken = data.hasBillingToken;\n  }\n\n  copy() {\n    this.platformUtilsService.copyToClipboard(this.clientSecret);\n  }\n\n  submit = async () => {\n    try {\n      const request = this.userVerificationService\n        .buildRequest(this.formGroup.value.verification, OrganizationApiKeyRequest)\n        .then((request) => {\n          request.type = OrganizationApiKeyType.BillingSync;\n          return request;\n        });\n\n      if (this.showRotateScreen) {\n        const response = await request.then((request) => {\n          return this.organizationApiService.rotateApiKey(this.organizationId, request);\n        });\n        await this.load(response);\n        this.showRotateScreen = false;\n        this.toastService.showToast({\n          variant: \"success\",\n          title: null,\n          message: this.i18nService.t(\"billingSyncApiKeyRotated\"),\n        });\n      } else {\n        const response = await request.then((request) => {\n          return this.organizationApiService.getOrCreateApiKey(this.organizationId, request);\n        });\n        await this.load(response);\n      }\n    } catch (e) {\n      this.logService.error(e);\n      throw e;\n    }\n  };\n\n  async load(response: ApiKeyResponse) {\n    this.clientSecret = response.apiKey;\n    this.keyRevisionDate = response.revisionDate;\n    this.hasBillingToken = true;\n    const syncStatus = await this.apiService.getSponsorshipSyncStatus(this.organizationId);\n    this.lastSyncDate = syncStatus.lastSyncDate;\n  }\n\n  cancelRotate() {\n    this.showRotateScreen = false;\n  }\n\n  rotateToken() {\n    this.showRotateScreen = true;\n  }\n\n  private dayDiff(date1: Date, date2: Date): number {\n    const diffTime = Math.abs(date2.getTime() - date1.getTime());\n    return Math.round(diffTime / (1000 * 60 * 60 * 24));\n  }\n\n  get submitButtonText(): string {\n    if (this.showRotateScreen) {\n      return this.i18nService.t(\"rotateToken\");\n    }\n\n    return this.i18nService.t(this.hasBillingToken ? \"continue\" : \"generateToken\");\n  }\n\n  get showLastSyncText(): boolean {\n    // If the keyRevisionDate is later than the lastSyncDate we need to show\n    // a warning that they need to put the billing sync key in their self hosted install\n    return this.lastSyncDate && this.lastSyncDate > this.keyRevisionDate;\n  }\n\n  get showAwaitingSyncText(): boolean {\n    return this.lastSyncDate && this.lastSyncDate <= this.keyRevisionDate;\n  }\n\n  get daysBetween(): number {\n    return this.dayDiff(this.keyRevisionDate, new Date());\n  }\n\n  static open(dialogService: DialogService, data: BillingSyncApiModalData) {\n    return dialogService.open(BillingSyncApiKeyComponent, { data });\n  }\n}\n","<form [formGroup]=\"formGroup\" [bitSubmit]=\"submit\">\n  <bit-dialog>\n    <span bitDialogTitle>\n      {{ (hasBillingToken ? \"viewBillingToken\" : \"generateBillingToken\") | i18n }}\n    </span>\n    <div bitDialogContent>\n      <app-user-verification formControlName=\"verification\" *ngIf=\"!clientSecret\">\n      </app-user-verification>\n\n      <ng-container *ngIf=\"clientSecret && showRotateScreen\">\n        <p>{{ \"rotateBillingSyncTokenTitle\" | i18n }}</p>\n        <bit-callout type=\"warning\">\n          {{ \"rotateBillingSyncTokenWarning\" | i18n }}\n        </bit-callout>\n      </ng-container>\n\n      <div *ngIf=\"clientSecret && !showRotateScreen\">\n        <p>{{ \"copyPasteBillingSync\" | i18n }}</p>\n        <bit-form-field>\n          <bit-label>{{ \"billingSyncKey\" | i18n }}</bit-label>\n          <input\n            bitInput\n            id=\"clientSecret\"\n            type=\"text\"\n            [value]=\"clientSecret\"\n            class=\"tw-font-mono\"\n            disabled\n          />\n          <button\n            bitIconButton=\"bwi-clone\"\n            bitSuffix\n            type=\"button\"\n            showToast\n            [valueLabel]=\"'billingSyncKey' | i18n\"\n            [appCopyClick]=\"clientSecret\"\n            [label]=\"'copyValue' | i18n\"\n          ></button>\n        </bit-form-field>\n        <div class=\"tw-mt-2 tw-text-sm tw-text-muted\" *ngIf=\"showLastSyncText\">\n          <b class=\"tw-font-semibold\">{{ \"lastSync\" | i18n }}:</b>\n          {{ lastSyncDate | date: \"medium\" }}\n        </div>\n        <div class=\"tw-mt-2 tw-text-sm tw-text-danger\" *ngIf=\"showAwaitingSyncText\">\n          <i class=\"bwi bwi-error\"></i>\n          {{\n            (daysBetween === 1 ? \"awaitingSyncSingular\" : \"awaitingSyncPlural\") | i18n: daysBetween\n          }}\n        </div>\n      </div>\n    </div>\n    <ng-container bitDialogFooter>\n      <button\n        type=\"submit\"\n        bitButton\n        bitFormButton\n        buttonType=\"primary\"\n        *ngIf=\"!clientSecret || showRotateScreen\"\n      >\n        {{ submitButtonText }}\n      </button>\n      <button bitButton bitDialogClose type=\"button\" *ngIf=\"!showRotateScreen\">\n        {{ \"close\" | i18n }}\n      </button>\n      <button bitButton type=\"button\" *ngIf=\"showRotateScreen\" (click)=\"cancelRotate()\">\n        {{ \"cancel\" | i18n }}\n      </button>\n      <button\n        bitButton\n        type=\"button\"\n        *ngIf=\"clientSecret && !showRotateScreen\"\n        (click)=\"rotateToken()\"\n      >\n        {{ \"rotateToken\" | i18n }}\n      </button>\n    </ng-container>\n  </bit-dialog>\n</form>\n","// FIXME: Update this file to be type safe and remove this and next line\n// @ts-strict-ignore\nimport { Component, Inject } from \"@angular/core\";\nimport { FormControl, FormGroup, Validators } from \"@angular/forms\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { OrganizationConnectionType } from \"@bitwarden/common/admin-console/enums\";\nimport { OrganizationConnectionRequest } from \"@bitwarden/common/admin-console/models/request/organization-connection.request\";\nimport { OrganizationConnectionResponse } from \"@bitwarden/common/admin-console/models/response/organization-connection.response\";\nimport { BillingSyncConfigApi } from \"@bitwarden/common/billing/models/api/billing-sync-config.api\";\nimport { BillingSyncConfigRequest } from \"@bitwarden/common/billing/models/request/billing-sync-config.request\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { DIALOG_DATA, DialogRef, DialogService } from \"@bitwarden/components\";\n\nexport interface BillingSyncKeyModalData {\n  entityId: string;\n  existingConnectionId: string;\n  billingSyncKey: string;\n  setParentConnection: (connection: OrganizationConnectionResponse<BillingSyncConfigApi>) => void;\n}\n\n@Component({\n  templateUrl: \"billing-sync-key.component.html\",\n  standalone: false,\n})\nexport class BillingSyncKeyComponent {\n  protected entityId: string;\n  protected existingConnectionId: string;\n  protected billingSyncKey: string;\n  protected setParentConnection: (\n    connection: OrganizationConnectionResponse<BillingSyncConfigApi>,\n  ) => void;\n\n  protected formGroup: FormGroup;\n\n  constructor(\n    private dialogRef: DialogRef,\n    @Inject(DIALOG_DATA) protected data: BillingSyncKeyModalData,\n    private apiService: ApiService,\n    private logService: LogService,\n  ) {\n    this.entityId = data.entityId;\n    this.existingConnectionId = data.existingConnectionId;\n    this.billingSyncKey = data.billingSyncKey;\n    this.setParentConnection = data.setParentConnection;\n\n    this.formGroup = new FormGroup({\n      billingSyncKey: new FormControl<string>(this.billingSyncKey, Validators.required),\n    });\n  }\n\n  submit = async () => {\n    try {\n      const request = new OrganizationConnectionRequest(\n        this.entityId,\n        OrganizationConnectionType.CloudBillingSync,\n        true,\n        new BillingSyncConfigRequest(this.formGroup.value.billingSyncKey),\n      );\n\n      const response =\n        this.existingConnectionId == null\n          ? await this.apiService.createOrganizationConnection(request, BillingSyncConfigApi)\n          : await this.apiService.updateOrganizationConnection(\n              request,\n              BillingSyncConfigApi,\n              this.existingConnectionId,\n            );\n\n      this.existingConnectionId = response?.id;\n      this.billingSyncKey = response?.config?.billingSyncKey;\n      this.setParentConnection(response);\n      this.dialogRef.close();\n    } catch (e) {\n      this.logService.error(e);\n    }\n  };\n\n  deleteConnection = async () => {\n    await this.apiService.deleteOrganizationConnection(this.existingConnectionId);\n    this.setParentConnection(null);\n    this.dialogRef.close();\n  };\n\n  static open(dialogService: DialogService, data: BillingSyncKeyModalData) {\n    return dialogService.open(BillingSyncKeyComponent, { data });\n  }\n}\n","<form [formGroup]=\"formGroup\" [bitSubmit]=\"submit\">\n  <bit-dialog>\n    <span bitDialogTitle>\n      {{ \"manageBillingTokenSync\" | i18n }}\n    </span>\n    <div bitDialogContent>\n      <p>{{ \"billingSyncKeyDesc\" | i18n }}</p>\n      <bit-form-field>\n        <bit-label>\n          {{ \"billingSyncKey\" | i18n }}\n        </bit-label>\n        <input\n          bitInput\n          id=\"billingSyncKey\"\n          type=\"text\"\n          formControlName=\"billingSyncKey\"\n          appAutofocus\n          appInputVerbatim\n        />\n      </bit-form-field>\n    </div>\n    <ng-container bitDialogFooter>\n      <button type=\"submit\" bitButton bitFormButton buttonType=\"primary\">\n        {{ \"save\" | i18n }}\n      </button>\n      <button bitButton bitDialogClose type=\"button\">\n        {{ \"cancel\" | i18n }}\n      </button>\n      <button\n        class=\"tw-ml-auto\"\n        type=\"button\"\n        buttonType=\"danger\"\n        bitIconButton=\"bwi-trash\"\n        bitFormButton\n        [bitAction]=\"deleteConnection\"\n        label=\"{{ 'delete' | i18n }}\"\n      ></button>\n    </ng-container>\n  </bit-dialog>\n</form>\n","// FIXME: Update this file to be type safe and remove this and next line\n// @ts-strict-ignore\nimport { Component, EventEmitter, Input, Output } from \"@angular/core\";\n\nimport { ProductTierType } from \"@bitwarden/common/billing/enums\";\nimport { PlanResponse } from \"@bitwarden/common/billing/models/response/plan.response\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\n\n@Component({\n  selector: \"app-change-plan\",\n  templateUrl: \"change-plan.component.html\",\n  standalone: false,\n})\nexport class ChangePlanComponent {\n  @Input() organizationId: string;\n  @Input() currentPlan: PlanResponse;\n  @Input() preSelectedProductTier: ProductTierType;\n  @Output() onChanged = new EventEmitter();\n  @Output() onCanceled = new EventEmitter();\n\n  formPromise: Promise<any>;\n\n  constructor(private logService: LogService) {}\n\n  async submit() {\n    try {\n      this.onChanged.emit();\n    } catch (e) {\n      this.logService.error(e);\n    }\n  }\n\n  cancel() {\n    this.onCanceled.emit();\n  }\n}\n","<div\n  class=\"tw-relative tw-flex tw-flex-col tw-min-w-0 tw-rounded tw-border tw-border-solid tw-border-secondary-300\"\n>\n  <div class=\"tw-flex-auto tw-p-5\">\n    <button\n      bitIconButton=\"bwi-close\"\n      buttonType=\"main\"\n      type=\"button\"\n      size=\"small\"\n      class=\"tw-float-right\"\n      label=\"{{ 'cancel' | i18n }}\"\n      (click)=\"cancel()\"\n    ></button>\n    <h2 bitTypography=\"h2\">{{ \"changeBillingPlan\" | i18n }}</h2>\n    <p bitTypography=\"body1\" class=\"tw-mb-0\">{{ \"changeBillingPlanUpgrade\" | i18n }}</p>\n    <app-organization-plans\n      [showFree]=\"false\"\n      [showCancel]=\"true\"\n      [organizationId]=\"organizationId\"\n      [currentPlan]=\"currentPlan\"\n      [preSelectedProductTier]=\"preSelectedProductTier\"\n      (onCanceled)=\"cancel()\"\n    >\n    </app-organization-plans>\n  </div>\n</div>\n","// FIXME: Update this file to be type safe and remove this and next line\n// @ts-strict-ignore\nimport { Component, Inject } from \"@angular/core\";\nimport { FormBuilder, Validators } from \"@angular/forms\";\n\nimport { OrganizationApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/organization/organization-api.service.abstraction\";\nimport { FileDownloadService } from \"@bitwarden/common/platform/abstractions/file-download/file-download.service\";\nimport { DialogConfig, DIALOG_DATA, DialogRef, DialogService } from \"@bitwarden/components\";\n\n// FIXME: update to use a const object instead of a typescript enum\n// eslint-disable-next-line @bitwarden/platform/no-enums\nexport enum DownloadLicenseDialogResult {\n  Cancelled = \"cancelled\",\n  Downloaded = \"downloaded\",\n}\ntype DownloadLicenseDialogData = {\n  /** current organization id */\n  organizationId: string;\n};\n\n@Component({\n  templateUrl: \"download-license.component.html\",\n  standalone: false,\n})\nexport class DownloadLicenceDialogComponent {\n  licenseForm = this.formBuilder.group({\n    installationId: [\"\", [Validators.required]],\n  });\n  constructor(\n    @Inject(DIALOG_DATA) protected data: DownloadLicenseDialogData,\n    private dialogRef: DialogRef,\n    private fileDownloadService: FileDownloadService,\n    private organizationApiService: OrganizationApiServiceAbstraction,\n    protected formBuilder: FormBuilder,\n  ) {}\n\n  submit = async () => {\n    this.licenseForm.markAllAsTouched();\n    const installationId = this.licenseForm.get(\"installationId\").value;\n    if (installationId == null || installationId === \"\") {\n      return;\n    }\n    const license = await this.organizationApiService.getLicense(\n      this.data.organizationId,\n      installationId,\n    );\n    const licenseString = JSON.stringify(license, null, 2);\n    this.fileDownloadService.download({\n      fileName: \"bitwarden_organization_license.json\",\n      blobData: licenseString,\n    });\n    this.dialogRef.close(DownloadLicenseDialogResult.Downloaded);\n  };\n  /**\n   * Strongly typed helper to open a DownloadLicenceDialogComponent\n   * @param dialogService Instance of the dialog service that will be used to open the dialog\n   * @param config Configuration for the dialog\n   */\n  static open(dialogService: DialogService, config: DialogConfig<DownloadLicenseDialogData>) {\n    return dialogService.open<DownloadLicenseDialogResult>(DownloadLicenceDialogComponent, config);\n  }\n  cancel = () => {\n    this.dialogRef.close(DownloadLicenseDialogResult.Cancelled);\n  };\n}\n","<form [formGroup]=\"licenseForm\" [bitSubmit]=\"submit\">\n  <bit-dialog>\n    <span bitDialogTitle>{{ \"downloadLicense\" | i18n }}</span>\n    <ng-container bitDialogContent>\n      <div class=\"tw-grid tw-grid-cols-12 tw-gap-4\">\n        <div class=\"tw-col-span-8\">\n          <bit-form-field>\n            <bit-label\n              >{{ \"enterInstallationId\" | i18n }}\n              <a\n                bitLink\n                class=\"tw-ml-auto\"\n                target=\"_blank\"\n                rel=\"noreferrer\"\n                appA11yTitle=\"{{ 'learnMore' | i18n }}\"\n                href=\"https://bitwarden.com/help/licensing-on-premise/#organization-account-sharing\"\n                slot=\"end\"\n              >\n                <i class=\"bwi bwi-question-circle\" aria-hidden=\"true\"></i>\n              </a>\n            </bit-label>\n            <input type=\"text\" bitInput formControlName=\"installationId\" />\n          </bit-form-field>\n        </div>\n      </div>\n    </ng-container>\n    <ng-container bitDialogFooter>\n      <button bitButton bitFormButton buttonType=\"primary\" type=\"submit\">\n        {{ \"submit\" | i18n }}\n      </button>\n      <button bitButton [bitAction]=\"cancel\" bitFormButton buttonType=\"secondary\" type=\"button\">\n        {{ \"cancel\" | i18n }}\n      </button>\n    </ng-container>\n  </bit-dialog>\n</form>\n","// FIXME: Update this file to be type safe and remove this and next line\n// @ts-strict-ignore\nimport { Component, OnDestroy, OnInit } from \"@angular/core\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { concatMap, Subject, takeUntil } from \"rxjs\";\n\nimport { OrganizationBillingApiServiceAbstraction } from \"@bitwarden/common/billing/abstractions/organizations/organization-billing-api.service.abstraction\";\nimport {\n  BillingInvoiceResponse,\n  BillingTransactionResponse,\n} from \"@bitwarden/common/billing/models/response/billing.response\";\n\n@Component({\n  templateUrl: \"organization-billing-history-view.component.html\",\n  standalone: false,\n})\nexport class OrgBillingHistoryViewComponent implements OnInit, OnDestroy {\n  loading = false;\n  firstLoaded = false;\n  openInvoices: BillingInvoiceResponse[] = [];\n  paidInvoices: BillingInvoiceResponse[] = [];\n  transactions: BillingTransactionResponse[] = [];\n  organizationId: string;\n  hasAdditionalHistory: boolean = false;\n\n  private destroy$ = new Subject<void>();\n\n  constructor(\n    private organizationBillingApiService: OrganizationBillingApiServiceAbstraction,\n    private route: ActivatedRoute,\n  ) {}\n\n  async ngOnInit() {\n    this.route.params\n      .pipe(\n        concatMap(async (params) => {\n          this.organizationId = params.organizationId;\n          await this.load();\n          this.firstLoaded = true;\n        }),\n        takeUntil(this.destroy$),\n      )\n      .subscribe();\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  async load() {\n    if (this.loading) {\n      return;\n    }\n\n    this.loading = true;\n\n    /* disable billing history\n    const openInvoicesPromise = this.organizationBillingApiService.getBillingInvoices(\n      this.organizationId,\n      \"open\",\n      this.openInvoices.length > 0 ? this.openInvoices[this.openInvoices.length - 1].id : null,\n    );\n\n    const paidInvoicesPromise = this.organizationBillingApiService.getBillingInvoices(\n      this.organizationId,\n      \"paid\",\n      this.paidInvoices.length > 0 ? this.paidInvoices[this.paidInvoices.length - 1].id : null,\n    );\n\n    const transactionsPromise = this.organizationBillingApiService.getBillingTransactions(\n      this.organizationId,\n      this.transactions.length > 0\n        ? this.transactions[this.transactions.length - 1].createdDate\n        : null,\n    );\n\n    const openInvoices = await openInvoicesPromise;\n    const paidInvoices = await paidInvoicesPromise;\n    const transactions = await transactionsPromise;\n\n    const pageSize = 5;\n\n    this.openInvoices = [...this.openInvoices, ...openInvoices];\n    this.paidInvoices = [...this.paidInvoices, ...paidInvoices];\n    this.transactions = [...this.transactions, ...transactions];\n\n    this.hasAdditionalHistory =\n      openInvoices.length <= pageSize ||\n      paidInvoices.length <= pageSize ||\n      transactions.length <= pageSize;\n    */\n\n    this.loading = false;\n  }\n}\n","<app-header> </app-header>\n\n<bit-container>\n  <ng-container *ngIf=\"!firstLoaded && loading\">\n    <i\n      class=\"bwi bwi-spinner bwi-spin tw-text-muted\"\n      title=\"{{ 'loading' | i18n }}\"\n      aria-hidden=\"true\"\n    ></i>\n    <span class=\"tw-sr-only\">{{ \"loading\" | i18n }}</span>\n  </ng-container>\n  <ng-container *ngIf=\"openInvoices || paidInvoices || transactions\">\n    <app-billing-history\n      [openInvoices]=\"openInvoices\"\n      [paidInvoices]=\"paidInvoices\"\n      [transactions]=\"transactions\"\n    ></app-billing-history>\n    <button\n      type=\"button\"\n      bitButton\n      buttonType=\"secondary\"\n      (click)=\"load()\"\n      *ngIf=\"hasAdditionalHistory\"\n    >\n      {{ \"loadMore\" | i18n }}\n    </button>\n  </ng-container>\n</bit-container>\n","import { NgModule } from \"@angular/core\";\nimport { RouterModule, Routes } from \"@angular/router\";\n\nimport { canAccessBillingTab } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { OrganizationPaymentDetailsComponent } from \"@bitwarden/web-vault/app/billing/organizations/payment-details/organization-payment-details.component\";\n\nimport { organizationPermissionsGuard } from \"../../admin-console/organizations/guards/org-permissions.guard\";\nimport { organizationIsUnmanaged } from \"../../billing/guards/organization-is-unmanaged.guard\";\nimport { WebPlatformUtilsService } from \"../../core/web-platform-utils.service\";\n\nimport { OrgBillingHistoryViewComponent } from \"./organization-billing-history-view.component\";\nimport { OrganizationSubscriptionCloudComponent } from \"./organization-subscription-cloud.component\";\nimport { OrganizationSubscriptionSelfhostComponent } from \"./organization-subscription-selfhost.component\";\n\nconst routes: Routes = [\n  {\n    path: \"\",\n    canActivate: [organizationPermissionsGuard(canAccessBillingTab)],\n    children: [\n      { path: \"\", pathMatch: \"full\", redirectTo: \"subscription\" },\n      {\n        path: \"subscription\",\n        component: WebPlatformUtilsService.isSelfHost()\n          ? OrganizationSubscriptionSelfhostComponent\n          : OrganizationSubscriptionCloudComponent,\n        data: { titleId: \"subscription\" },\n      },\n      {\n        path: \"payment-details\",\n        component: OrganizationPaymentDetailsComponent,\n        canActivate: [\n          organizationPermissionsGuard((org) => org.canEditPaymentMethods),\n          organizationIsUnmanaged,\n        ],\n        data: {\n          titleId: \"paymentDetails\",\n        },\n      },\n      {\n        path: \"history\",\n        component: OrgBillingHistoryViewComponent,\n        canActivate: [\n          organizationPermissionsGuard((org) => org.canViewBillingHistory),\n          organizationIsUnmanaged,\n        ],\n        data: {\n          titleId: \"billingHistory\",\n        },\n      },\n    ],\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class OrganizationBillingRoutingModule {}\n","import { NgModule } from \"@angular/core\";\n\n// FIXME: remove `src` and fix import\n// eslint-disable-next-line no-restricted-imports\nimport { BannerModule } from \"../../../../../../libs/components/src/banner/banner.module\";\nimport { UserVerificationModule } from \"../../auth/shared/components/user-verification\";\nimport { HeaderModule } from \"../../layouts/header/header.module\";\nimport { BillingSharedModule } from \"../shared\";\n\nimport { AdjustSubscription } from \"./adjust-subscription.component\";\nimport { BillingSyncApiKeyComponent } from \"./billing-sync-api-key.component\";\nimport { BillingSyncKeyComponent } from \"./billing-sync-key.component\";\nimport { ChangePlanComponent } from \"./change-plan.component\";\nimport { DownloadLicenceDialogComponent } from \"./download-license.component\";\nimport { OrgBillingHistoryViewComponent } from \"./organization-billing-history-view.component\";\nimport { OrganizationBillingRoutingModule } from \"./organization-billing-routing.module\";\nimport { OrganizationPlansComponent } from \"./organization-plans.component\";\nimport { OrganizationSubscriptionCloudComponent } from \"./organization-subscription-cloud.component\";\nimport { OrganizationSubscriptionSelfhostComponent } from \"./organization-subscription-selfhost.component\";\nimport { SecretsManagerAdjustSubscriptionComponent } from \"./sm-adjust-subscription.component\";\nimport { SecretsManagerSubscribeStandaloneComponent } from \"./sm-subscribe-standalone.component\";\nimport { SubscriptionHiddenComponent } from \"./subscription-hidden.component\";\nimport { SubscriptionStatusComponent } from \"./subscription-status.component\";\n\n@NgModule({\n  imports: [\n    OrganizationBillingRoutingModule,\n    UserVerificationModule,\n    BillingSharedModule,\n    OrganizationPlansComponent,\n    HeaderModule,\n    BannerModule,\n  ],\n  declarations: [\n    AdjustSubscription,\n    BillingSyncApiKeyComponent,\n    BillingSyncKeyComponent,\n    ChangePlanComponent,\n    DownloadLicenceDialogComponent,\n    OrganizationSubscriptionCloudComponent,\n    OrganizationSubscriptionSelfhostComponent,\n    OrgBillingHistoryViewComponent,\n    SecretsManagerAdjustSubscriptionComponent,\n    SecretsManagerSubscribeStandaloneComponent,\n    SubscriptionHiddenComponent,\n    SubscriptionStatusComponent,\n  ],\n})\nexport class OrganizationBillingModule {}\n","// FIXME: Update this file to be type safe and remove this and next line\n// @ts-strict-ignore\nimport { Component, OnDestroy, OnInit } from \"@angular/core\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { firstValueFrom, lastValueFrom, Subject } from \"rxjs\";\n\nimport { OrganizationUserApiService } from \"@bitwarden/admin-console/common\";\nimport { GearIcon } from \"@bitwarden/assets/svg\";\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { OrganizationApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/organization/organization-api.service.abstraction\";\nimport {\n  getOrganizationById,\n  OrganizationService,\n} from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport {\n  OrganizationApiKeyType,\n  OrganizationUserStatusType,\n} from \"@bitwarden/common/admin-console/enums\";\nimport { Organization } from \"@bitwarden/common/admin-console/models/domain/organization\";\nimport { AccountService } from \"@bitwarden/common/auth/abstractions/account.service\";\nimport { getUserId } from \"@bitwarden/common/auth/services/account.service\";\nimport { BillingApiServiceAbstraction } from \"@bitwarden/common/billing/abstractions\";\nimport { PlanType, ProductTierType } from \"@bitwarden/common/billing/enums\";\nimport { OrganizationSubscriptionResponse } from \"@bitwarden/common/billing/models/response/organization-subscription.response\";\nimport { BillingSubscriptionItemResponse } from \"@bitwarden/common/billing/models/response/subscription.response\";\nimport { ConfigService } from \"@bitwarden/common/platform/abstractions/config/config.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { LogService } from \"@bitwarden/common/platform/abstractions/log.service\";\nimport { DialogService, ToastService } from \"@bitwarden/components\";\n\nimport {\n  AdjustStorageDialogComponent,\n  AdjustStorageDialogResultType,\n} from \"../shared/adjust-storage-dialog/adjust-storage-dialog.component\";\nimport {\n  OffboardingSurveyDialogResultType,\n  openOffboardingSurvey,\n} from \"../shared/offboarding-survey.component\";\n\nimport { BillingSyncApiKeyComponent } from \"./billing-sync-api-key.component\";\nimport { ChangePlanDialogResultType, openChangePlanDialog } from \"./change-plan-dialog.component\";\nimport { DownloadLicenceDialogComponent } from \"./download-license.component\";\nimport { SecretsManagerSubscriptionOptions } from \"./sm-adjust-subscription.component\";\n\n@Component({\n  templateUrl: \"organization-subscription-cloud.component.html\",\n  standalone: false,\n})\nexport class OrganizationSubscriptionCloudComponent implements OnInit, OnDestroy {\n  static readonly QUERY_PARAM_UPGRADE: string = \"upgrade\";\n  static readonly ROUTE_PARAM_ORGANIZATION_ID: string = \"organizationId\";\n\n  sub: OrganizationSubscriptionResponse;\n  lineItems: BillingSubscriptionItemResponse[] = [];\n  organizationId: string;\n  userOrg: Organization;\n  showChangePlan = false;\n  hasBillingSyncToken: boolean;\n  showAdjustSecretsManager = false;\n  showSecretsManagerSubscribe = false;\n  loading = true;\n  locale: string;\n  preSelectedProductTier: ProductTierType = ProductTierType.Free;\n  showSubscription = true;\n  showSelfHost = false;\n  organizationIsManagedByConsolidatedBillingMSP = false;\n  resellerSeatsRemainingMessage: string;\n\n  protected readonly gearIcon = GearIcon;\n  protected readonly teamsStarter = ProductTierType.TeamsStarter;\n\n  private destroy$ = new Subject<void>();\n\n  constructor(\n    private apiService: ApiService,\n    private i18nService: I18nService,\n    private logService: LogService,\n    private organizationService: OrganizationService,\n    private accountService: AccountService,\n    private organizationApiService: OrganizationApiServiceAbstraction,\n    private route: ActivatedRoute,\n    private dialogService: DialogService,\n    private configService: ConfigService,\n    private toastService: ToastService,\n    private billingApiService: BillingApiServiceAbstraction,\n    private organizationUserApiService: OrganizationUserApiService,\n  ) {}\n\n  async ngOnInit() {\n    this.organizationId =\n      this.route.snapshot.params[\n        OrganizationSubscriptionCloudComponent.ROUTE_PARAM_ORGANIZATION_ID\n      ];\n    await this.load();\n\n    if (\n      this.route.snapshot.queryParams[OrganizationSubscriptionCloudComponent.QUERY_PARAM_UPGRADE]\n    ) {\n      await this.changePlan();\n      const productTierTypeStr = this.route.snapshot.queryParamMap.get(\"productTierType\");\n      if (productTierTypeStr != null) {\n        const productTier = Number(productTierTypeStr);\n        if (Object.values(ProductTierType).includes(productTier as ProductTierType)) {\n          this.preSelectedProductTier = productTier;\n        }\n      }\n    }\n\n    if (this.userOrg.hasReseller) {\n      const allUsers = await this.organizationUserApiService.getAllUsers(this.userOrg.id);\n\n      const userCount = allUsers.data.filter((user) =>\n        [\n          OrganizationUserStatusType.Invited,\n          OrganizationUserStatusType.Accepted,\n          OrganizationUserStatusType.Confirmed,\n        ].includes(user.status),\n      ).length;\n\n      const remainingSeats = this.userOrg.seats - userCount;\n\n      const seatsRemaining = this.i18nService.t(\n        \"seatsRemaining\",\n        remainingSeats.toString(),\n        this.userOrg.seats.toString(),\n      );\n\n      this.resellerSeatsRemainingMessage = seatsRemaining;\n    }\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  async load() {\n    this.loading = true;\n    this.locale = await firstValueFrom(this.i18nService.locale$);\n    const userId = await firstValueFrom(getUserId(this.accountService.activeAccount$));\n    this.userOrg = await firstValueFrom(\n      this.organizationService\n        .organizations$(userId)\n        .pipe(getOrganizationById(this.organizationId)),\n    );\n\n    const isIndependentOrganizationOwner = !this.userOrg.hasProvider && this.userOrg.isOwner;\n    const isResoldOrganizationOwner = this.userOrg.hasReseller && this.userOrg.isOwner;\n    const isMSPUser = this.userOrg.hasProvider && this.userOrg.isProviderUser;\n\n    this.organizationIsManagedByConsolidatedBillingMSP =\n      this.userOrg.hasProvider && this.userOrg.hasBillableProvider;\n\n    this.showSubscription =\n      isIndependentOrganizationOwner ||\n      isResoldOrganizationOwner ||\n      (isMSPUser && !this.organizationIsManagedByConsolidatedBillingMSP);\n\n    this.showSelfHost =\n      this.userOrg.productTierType === ProductTierType.Families ||\n      this.userOrg.productTierType === ProductTierType.Enterprise;\n\n    if (this.showSubscription) {\n      this.sub = await this.organizationApiService.getSubscription(this.organizationId);\n      this.lineItems = this.sub?.subscription?.items;\n\n      if (this.lineItems && this.lineItems.length) {\n        this.lineItems = this.lineItems\n          .map((item) => {\n            const itemTotalAmount = item.amount * item.quantity;\n            const seatPriceTotal = this.sub.plan?.SecretsManager?.seatPrice * item.quantity;\n            item.productName =\n              itemTotalAmount === seatPriceTotal || item.name.includes(\"Service Accounts\")\n                ? \"secretsManager\"\n                : \"passwordManager\";\n            return item;\n          })\n          .sort(sortSubscriptionItems);\n      }\n\n      if (this.sub?.customerDiscount?.percentOff == 100) {\n        this.lineItems.reverse();\n      }\n    }\n\n    const apiKeyResponse = await this.organizationApiService.getApiKeyInformation(\n      this.organizationId,\n    );\n    this.hasBillingSyncToken = apiKeyResponse.data.some(\n      (i) => i.keyType === OrganizationApiKeyType.BillingSync,\n    );\n\n    this.showSecretsManagerSubscribe =\n      this.userOrg.canEditSubscription &&\n      !this.userOrg.hasProvider &&\n      this.sub?.plan?.SecretsManager &&\n      !this.userOrg.useSecretsManager &&\n      !this.subscription?.cancelled &&\n      !this.subscriptionMarkedForCancel;\n\n    this.showAdjustSecretsManager =\n      this.userOrg.canEditSubscription &&\n      this.userOrg.useSecretsManager &&\n      this.subscription != null &&\n      this.sub.plan?.SecretsManager?.hasAdditionalSeatsOption &&\n      !this.subscription.cancelled &&\n      !this.subscriptionMarkedForCancel;\n\n    this.loading = false;\n  }\n\n  get subscription() {\n    return this.sub != null ? this.sub.subscription : null;\n  }\n\n  get subscriptionLineItems() {\n    return this.lineItems.map((lineItem: BillingSubscriptionItemResponse) => ({\n      name: lineItem.name,\n      amount: this.discountPrice(lineItem.amount, lineItem.productId),\n      quantity: lineItem.quantity,\n      interval: lineItem.interval,\n      sponsoredSubscriptionItem: lineItem.sponsoredSubscriptionItem,\n      addonSubscriptionItem: lineItem.addonSubscriptionItem,\n      productName: lineItem.productName,\n      productId: lineItem.productId,\n    }));\n  }\n\n  get nextInvoice() {\n    return this.sub != null ? this.sub.upcomingInvoice : null;\n  }\n\n  get customerDiscount() {\n    return this.sub != null ? this.sub.customerDiscount : null;\n  }\n\n  get isExpired() {\n    const nextInvoice = this.nextInvoice;\n\n    if (nextInvoice == null) {\n      return false;\n    }\n\n    return new Date(nextInvoice.date).getTime() < Date.now();\n  }\n\n  get storagePercentage() {\n    return this.sub != null && this.sub.maxStorageGb\n      ? +(100 * (this.sub.storageGb / this.sub.maxStorageGb)).toFixed(2)\n      : 0;\n  }\n\n  get billingInterval() {\n    const monthly = !this.sub.plan.isAnnual;\n    return monthly ? \"month\" : \"year\";\n  }\n\n  get storageGbPrice() {\n    return this.sub.plan.PasswordManager.additionalStoragePricePerGb;\n  }\n\n  get seatPrice() {\n    return this.discountPrice(this.sub.plan.PasswordManager.seatPrice);\n  }\n\n  get seats() {\n    return this.sub.seats;\n  }\n\n  get smOptions(): SecretsManagerSubscriptionOptions {\n    return {\n      seatCount: this.sub.smSeats,\n      maxAutoscaleSeats: this.sub.maxAutoscaleSmSeats,\n      seatPrice: this.sub.plan.SecretsManager.seatPrice,\n      maxAutoscaleServiceAccounts: this.sub.maxAutoscaleSmServiceAccounts,\n      additionalServiceAccounts:\n        this.sub.smServiceAccounts - this.sub.plan.SecretsManager.baseServiceAccount,\n      interval: this.sub.plan.isAnnual ? \"year\" : \"month\",\n      additionalServiceAccountPrice: this.sub.plan.SecretsManager.additionalPricePerServiceAccount,\n      baseServiceAccountCount: this.sub.plan.SecretsManager.baseServiceAccount,\n    };\n  }\n\n  get maxAutoscaleSeats() {\n    return this.sub.maxAutoscaleSeats;\n  }\n\n  get canAdjustSeats() {\n    return this.sub.plan.PasswordManager.hasAdditionalSeatsOption;\n  }\n\n  get isSponsoredSubscription(): boolean {\n    return this.sub.subscription?.items.some((i) => i.sponsoredSubscriptionItem);\n  }\n\n  get subscriptionDesc() {\n    if (this.sub.planType === PlanType.Free) {\n      return this.i18nService.t(\"subscriptionFreePlan\", this.sub.seats.toString());\n    } else if (\n      this.sub.planType === PlanType.FamiliesAnnually ||\n      this.sub.planType === PlanType.FamiliesAnnually2019 ||\n      this.sub.planType === PlanType.TeamsStarter2023 ||\n      this.sub.planType === PlanType.TeamsStarter\n    ) {\n      if (this.isSponsoredSubscription) {\n        return this.i18nService.t(\"subscriptionSponsoredFamiliesPlan\", this.sub.seats.toString());\n      } else {\n        return this.i18nService.t(\"subscriptionUpgrade\", this.sub.seats.toString());\n      }\n    } else if (this.sub.maxAutoscaleSeats === this.sub.seats && this.sub.seats != null) {\n      const seatAdjustmentMessage = this.sub.plan.isAnnual\n        ? \"annualSubscriptionUserSeatsMessage\"\n        : \"monthlySubscriptionUserSeatsMessage\";\n      return this.i18nService.t(\n        seatAdjustmentMessage + \"subscriptionSeatMaxReached\",\n        this.sub.seats.toString(),\n      );\n    } else if (this.userOrg.productTierType === ProductTierType.TeamsStarter) {\n      return this.i18nService.t(\"subscriptionUserSeatsWithoutAdditionalSeatsOption\", 10);\n    } else if (this.sub.maxAutoscaleSeats == null) {\n      const seatAdjustmentMessage = this.sub.plan.isAnnual\n        ? \"annualSubscriptionUserSeatsMessage\"\n        : \"monthlySubscriptionUserSeatsMessage\";\n      return this.i18nService.t(seatAdjustmentMessage);\n    } else {\n      const seatAdjustmentMessage = this.sub.plan.isAnnual\n        ? \"annualSubscriptionUserSeatsMessage\"\n        : \"monthlySubscriptionUserSeatsMessage\";\n      return this.i18nService.t(seatAdjustmentMessage, this.sub.maxAutoscaleSeats.toString());\n    }\n  }\n\n  get subscriptionMarkedForCancel() {\n    return (\n      this.subscription != null && !this.subscription.cancelled && this.subscription.cancelAtEndDate\n    );\n  }\n\n  cancelSubscription = async () => {\n    const reference = openOffboardingSurvey(this.dialogService, {\n      data: {\n        type: \"Organization\",\n        id: this.organizationId,\n      },\n    });\n\n    const result = await lastValueFrom(reference.closed);\n\n    if (result === OffboardingSurveyDialogResultType.Closed) {\n      return;\n    }\n\n    await this.load();\n  };\n\n  reinstate = async () => {\n    if (this.loading) {\n      return;\n    }\n\n    const confirmed = await this.dialogService.openSimpleDialog({\n      title: { key: \"reinstateSubscription\" },\n      content: { key: \"reinstateConfirmation\" },\n      type: \"warning\",\n    });\n\n    if (!confirmed) {\n      return;\n    }\n\n    try {\n      await this.organizationApiService.reinstate(this.organizationId);\n      this.toastService.showToast({\n        variant: \"success\",\n        title: null,\n        message: this.i18nService.t(\"reinstated\"),\n      });\n      await this.load();\n    } catch (e) {\n      this.logService.error(e);\n    }\n  };\n\n  async changePlan() {\n    const reference = openChangePlanDialog(this.dialogService, {\n      data: {\n        organizationId: this.organizationId,\n        subscription: this.sub,\n        productTierType: this.userOrg.productTierType,\n      },\n    });\n\n    const result = await lastValueFrom(reference.closed);\n\n    if (result === ChangePlanDialogResultType.Closed) {\n      return;\n    }\n    await this.load();\n  }\n\n  isSecretsManagerTrial(): boolean {\n    return (\n      this.sub?.subscription?.items?.some((item) =>\n        this.sub?.customerDiscount?.appliesTo?.includes(item.productId),\n      ) ?? false\n    );\n  }\n\n  closeChangePlan() {\n    this.showChangePlan = false;\n  }\n\n  async downloadLicense() {\n    DownloadLicenceDialogComponent.open(this.dialogService, {\n      data: {\n        organizationId: this.organizationId,\n      },\n    });\n  }\n\n  async manageBillingSync() {\n    const dialogRef = BillingSyncApiKeyComponent.open(this.dialogService, {\n      organizationId: this.organizationId,\n      hasBillingToken: this.hasBillingSyncToken,\n    });\n\n    await firstValueFrom(dialogRef.closed);\n    await this.load();\n  }\n\n  async subscriptionAdjusted() {\n    await this.load();\n  }\n\n  calculateTotalAppliedDiscount(total: number) {\n    return total / (1 - this.customerDiscount?.percentOff / 100);\n  }\n\n  adjustStorage = (add: boolean) => {\n    return async () => {\n      const dialogRef = AdjustStorageDialogComponent.open(this.dialogService, {\n        data: {\n          price: this.storageGbPrice,\n          cadence: this.billingInterval,\n          type: add ? \"Add\" : \"Remove\",\n          organizationId: this.organizationId,\n        },\n      });\n\n      const result = await lastValueFrom(dialogRef.closed);\n\n      if (result === AdjustStorageDialogResultType.Submitted) {\n        await this.load();\n      }\n    };\n  };\n\n  removeSponsorship = async () => {\n    const confirmed = await this.dialogService.openSimpleDialog({\n      title: { key: \"removeSponsorship\" },\n      content: { key: \"removeSponsorshipConfirmation\" },\n      acceptButtonText: { key: \"remove\" },\n      type: \"warning\",\n    });\n\n    if (!confirmed) {\n      return;\n    }\n\n    try {\n      await this.apiService.deleteRemoveSponsorship(this.organizationId);\n      this.toastService.showToast({\n        variant: \"success\",\n        title: null,\n        message: this.i18nService.t(\"removeSponsorshipSuccess\"),\n      });\n      await this.load();\n    } catch (e) {\n      this.logService.error(e);\n    }\n  };\n\n  discountPrice = (price: number, productId: string = null) => {\n    const discount =\n      this.customerDiscount?.active &&\n      (!productId ||\n        !this.customerDiscount.appliesTo.length ||\n        this.customerDiscount.appliesTo.includes(productId))\n        ? price * (this.customerDiscount.percentOff / 100)\n        : 0;\n\n    return price - discount;\n  };\n\n  get showChangePlanButton() {\n    return (\n      (!this.showChangePlan &&\n        this.sub.plan.productTier !== ProductTierType.Enterprise &&\n        !this.sub.subscription?.cancelled) ||\n      (this.sub.subscription?.cancelled && this.sub.plan.productTier === ProductTierType.Free)\n    );\n  }\n\n  get canUseBillingSync() {\n    return this.userOrg.productTierType === ProductTierType.Enterprise;\n  }\n}\n\n/**\n * Helper to sort subscription items by productTier type and then by addon status\n */\nfunction sortSubscriptionItems(\n  a: BillingSubscriptionItemResponse,\n  b: BillingSubscriptionItemResponse,\n) {\n  if (a.productName == b.productName) {\n    if (a.addonSubscriptionItem == b.addonSubscriptionItem) {\n      return 0;\n    }\n    // sort addon items to the bottom\n    if (a.addonSubscriptionItem) {\n      return 1;\n    }\n    return -1;\n  }\n  return a.productName.localeCompare(b.productName);\n}\n","<app-header></app-header>\n\n<ng-container *ngIf=\"loading\">\n  <i class=\"bwi bwi-spinner bwi-spin tw-text-muted\" title=\"{{ 'loading' | i18n }}\"></i>\n  <span class=\"tw-sr-only\">{{ \"loading\" | i18n }}</span>\n</ng-container>\n\n<bit-container *ngIf=\"showSubscription; else hideSubscription\">\n  <ng-container *ngIf=\"sub && !loading\">\n    <app-subscription-status\n      [organizationSubscriptionResponse]=\"sub\"\n      (reinstatementRequested)=\"reinstate()\"\n      *ngIf=\"!userOrg.isFreeOrg\"\n    ></app-subscription-status>\n    <ng-container *ngIf=\"userOrg.canEditSubscription\">\n      <div class=\"tw-flex-col\">\n        <strong class=\"tw-block tw-border-0 tw-border-b tw-border-solid tw-border-secondary-300\"\n          >{{ \"details\" | i18n\n          }}<span\n            class=\"tw-ml-3\"\n            *ngIf=\"customerDiscount?.percentOff > 0 && !isSecretsManagerTrial()\"\n            bitBadge\n            variant=\"success\"\n            >{{ \"providerDiscount\" | i18n: customerDiscount?.percentOff }}</span\n          ></strong\n        >\n        <bit-table>\n          <ng-template body>\n            <ng-container *ngIf=\"subscription && !userOrg.isFreeOrg\">\n              <tr bitRow *ngFor=\"let i of subscriptionLineItems\">\n                <td\n                  bitCell\n                  [ngClass]=\"{ 'tw-pl-20': i.addonSubscriptionItem }\"\n                  class=\"tw-align-middle\"\n                >\n                  <span *ngIf=\"!i.addonSubscriptionItem\">{{ i.productName | i18n }} -</span>\n                  {{ i.name }} {{ i.quantity > 1 ? \"&times;\" + i.quantity : \"\" }} &#64;\n                  {{ i.amount | currency: \"$\" }}\n                </td>\n                <td bitCell class=\"tw-text-right\">\n                  <ng-container\n                    *ngIf=\"\n                      sub?.customerDiscount?.appliesTo?.includes(i.productId);\n                      else calculateElse\n                    \"\n                  >\n                    {{ \"freeForOneYear\" | i18n }}\n                  </ng-container>\n                  <ng-template #calculateElse>\n                    <div class=\"tw-flex tw-flex-col\">\n                      <span>\n                        {{ i.quantity * i.amount | currency: \"$\" }} /{{ i.interval | i18n }}\n                      </span>\n                      <span\n                        *ngIf=\"customerDiscount?.percentOff && !isSecretsManagerTrial()\"\n                        class=\"tw-line-through !tw-text-muted\"\n                        >{{\n                          calculateTotalAppliedDiscount(i.quantity * i.amount) | currency: \"$\"\n                        }}\n                        / {{ \"year\" | i18n }}</span\n                      >\n                    </div>\n                  </ng-template>\n                </td>\n              </tr>\n            </ng-container>\n            <ng-container *ngIf=\"userOrg.isFreeOrg\">\n              <tr bitRow *ngIf=\"userOrg.usePasswordManager\">\n                <td bitCell>{{ \"passwordManager\" | i18n }} - {{ \"freeOrganization\" | i18n }}</td>\n                <td bitCell class=\"tw-text-right\">{{ \"free\" | i18n }}</td>\n              </tr>\n              <tr bitRow *ngIf=\"userOrg.useSecretsManager\">\n                <td bitCell>{{ \"secretsManager\" | i18n }} - {{ \"freeOrganization\" | i18n }}</td>\n                <td bitCell class=\"tw-text-right\">{{ \"free\" | i18n }}</td>\n              </tr>\n            </ng-container>\n          </ng-template>\n        </bit-table>\n      </div>\n    </ng-container>\n\n    <ng-container *ngIf=\"userOrg.canEditSubscription\">\n      <div class=\"tw-mt-5\">\n        <button\n          bitButton\n          buttonType=\"secondary\"\n          type=\"button\"\n          (click)=\"changePlan()\"\n          *ngIf=\"showChangePlanButton\"\n        >\n          {{ \"changeBillingPlan\" | i18n }}\n        </button>\n        <app-change-plan\n          [organizationId]=\"organizationId\"\n          [currentPlan]=\"sub.plan\"\n          [preSelectedProductTier]=\"preSelectedProductTier\"\n          (onChanged)=\"closeChangePlan()\"\n          (onCanceled)=\"closeChangePlan()\"\n          *ngIf=\"showChangePlan\"\n        ></app-change-plan>\n      </div>\n    </ng-container>\n\n    <ng-container *ngIf=\"showSecretsManagerSubscribe\">\n      <div class=\"tw-mt-7\">\n        <sm-subscribe-standalone\n          [plan]=\"sub.plan\"\n          [organization]=\"userOrg\"\n          [customerDiscount]=\"customerDiscount\"\n          (onSubscribe)=\"subscriptionAdjusted()\"\n        ></sm-subscribe-standalone>\n      </div>\n    </ng-container>\n\n    <ng-container *ngIf=\"userOrg.canEditSubscription\">\n      <h2 bitTypography=\"h2\" class=\"tw-mt-7\">{{ \"manageSubscription\" | i18n }}</h2>\n      <p bitTypography=\"body1\" *ngIf=\"customerDiscount?.id === 'sm-standalone'\">\n        {{ \"smStandaloneTrialSeatCountUpdateMessageFragment1\" | i18n }}\n        {{ \"passwordManager\" | i18n }}\n        {{ \"smStandaloneTrialSeatCountUpdateMessageFragment2\" | i18n }}\n        <a href=\"https://bitwarden.com/contact/\" target=\"_blank\" rel=\"noreferrer\"\n          >{{ \"contactSupportShort\" | i18n }}.\n        </a>\n      </p>\n      <p bitTypography=\"body1\">{{ subscriptionDesc }}</p>\n      <ng-container\n        *ngIf=\"\n          subscription &&\n          canAdjustSeats &&\n          !subscription.cancelled &&\n          !subscriptionMarkedForCancel &&\n          (!customerDiscount || customerDiscount.id != 'sm-standalone')\n        \"\n      >\n        <h3 bitTypography=\"h3\" class=\"tw-mt-7\">{{ \"passwordManager\" | i18n }}</h3>\n        <app-adjust-subscription\n          [seatPrice]=\"seatPrice\"\n          [organizationId]=\"organizationId\"\n          [interval]=\"billingInterval\"\n          [currentSeatCount]=\"seats\"\n          [maxAutoscaleSeats]=\"maxAutoscaleSeats\"\n          (onAdjusted)=\"subscriptionAdjusted()\"\n        >\n        </app-adjust-subscription>\n      </ng-container>\n      <button\n        bitButton\n        buttonType=\"danger\"\n        type=\"button\"\n        [bitAction]=\"removeSponsorship\"\n        *ngIf=\"isSponsoredSubscription\"\n      >\n        {{ \"removeSponsorship\" | i18n }}\n      </button>\n      <ng-container *ngIf=\"!customerDiscount || customerDiscount.id != 'sm-standalone'\">\n        <h4 bitTypography=\"h4\" class=\"tw-mt-9\">{{ \"storage\" | i18n }}</h4>\n        <p bitTypography=\"body1\">\n          {{ \"subscriptionStorage\" | i18n: sub.maxStorageGb || 0 : sub.storageName || \"0 MB\" }}\n        </p>\n        <bit-progress [barWidth]=\"storagePercentage\" bgColor=\"success\"></bit-progress>\n        <ng-container\n          *ngIf=\"subscription && !subscription.cancelled && !subscriptionMarkedForCancel\"\n        >\n          <div class=\"tw-mt-3\">\n            <div class=\"tw-flex tw-space-x-2\">\n              <button\n                bitButton\n                buttonType=\"secondary\"\n                type=\"button\"\n                [bitAction]=\"adjustStorage(true)\"\n              >\n                {{ \"addStorage\" | i18n }}\n              </button>\n              <button\n                bitButton\n                buttonType=\"secondary\"\n                type=\"button\"\n                [bitAction]=\"adjustStorage(false)\"\n              >\n                {{ \"removeStorage\" | i18n }}\n              </button>\n            </div>\n          </div>\n        </ng-container>\n      </ng-container>\n      <ng-container *ngIf=\"showAdjustSecretsManager\">\n        <h3 bitTypography=\"h3\" class=\"tw-mt-9\">{{ \"secretsManager\" | i18n }}</h3>\n        <app-sm-adjust-subscription\n          [organizationId]=\"organizationId\"\n          [options]=\"smOptions\"\n          (onAdjusted)=\"subscriptionAdjusted()\"\n        ></app-sm-adjust-subscription>\n      </ng-container>\n    </ng-container>\n    <ng-container *ngTemplateOutlet=\"setupSelfHost\"></ng-container>\n    <ng-container *ngIf=\"userOrg.canEditSubscription\">\n      <h2 bitTypography=\"h2\" class=\"tw-mt-7\">{{ \"additionalOptions\" | i18n }}</h2>\n      <p bitTypography=\"body1\">\n        {{ \"additionalOptionsDesc\" | i18n }}\n      </p>\n      <div class=\"tw-flex tw-space-x-2\">\n        <button\n          bitButton\n          buttonType=\"danger\"\n          (click)=\"cancelSubscription()\"\n          type=\"button\"\n          *ngIf=\"subscription && !subscription.cancelled && !subscriptionMarkedForCancel\"\n        >\n          {{ \"cancelSubscription\" | i18n }}\n        </button>\n      </div>\n    </ng-container>\n  </ng-container>\n</bit-container>\n<ng-template #hideSubscription>\n  <bit-container *ngIf=\"!loading\">\n    <ng-container\n      *ngIf=\"\n        organizationIsManagedByConsolidatedBillingMSP;\n        else organizationIsNotManagedByConsolidatedBillingMSP\n      \"\n    >\n      <h2 bitTypography=\"h2\">{{ \"manageSubscription\" | i18n }}</h2>\n      <p bitTypography=\"body1\" *ngIf=\"userOrg.isProviderUser; else isOrganizationOwner\">\n        {{ \"manageSubscriptionFromThe\" | i18n }}\n        <a [routerLink]=\"['/providers', userOrg.providerId, 'manage-client-organizations']\">{{\n          \"providerPortal\" | i18n\n        }}</a\n        >.\n      </p>\n      <ng-template #isOrganizationOwner>\n        <p>\n          {{ \"billingManagedByProvider\" | i18n: userOrg.providerName }}.\n          {{ \"billingContactProviderForAssistance\" | i18n }}.\n        </p>\n      </ng-template>\n      <ng-container *ngTemplateOutlet=\"setupSelfHost\"></ng-container>\n    </ng-container>\n    <ng-template #organizationIsNotManagedByConsolidatedBillingMSP>\n      <div class=\"tw-flex tw-flex-col tw-items-center tw-text-info\">\n        <div class=\"tw-size-56 tw-content-center\">\n          <bit-icon [icon]=\"gearIcon\" aria-hidden=\"true\"></bit-icon>\n        </div>\n        <p class=\"tw-font-bold\">{{ \"billingManagedByProvider\" | i18n: userOrg.providerName }}</p>\n        <p>{{ \"billingContactProviderForAssistance\" | i18n }}</p>\n      </div>\n    </ng-template>\n  </bit-container>\n</ng-template>\n\n<ng-template #setupSelfHost>\n  <ng-container *ngIf=\"userOrg.hasReseller && resellerSeatsRemainingMessage\">\n    <h2 bitTypography=\"h2\" class=\"tw-mt-7\">{{ \"manageSubscription\" | i18n }}</h2>\n    <p bitTypography=\"body1\">{{ resellerSeatsRemainingMessage }}</p>\n  </ng-container>\n  <ng-container *ngIf=\"showSelfHost\">\n    <h2 bitTypography=\"h2\" class=\"tw-mt-7\">\n      {{ \"selfHostingTitleProper\" | i18n }}\n    </h2>\n    <p bitTypography=\"body1\">\n      {{ \"toHostBitwardenOnYourOwnServer\" | i18n }}\n    </p>\n    <div class=\"tw-flex tw-space-x-2\">\n      <button bitButton buttonType=\"secondary\" type=\"button\" (click)=\"downloadLicense()\">\n        {{ \"downloadLicense\" | i18n }}\n      </button>\n      <button\n        *ngIf=\"canUseBillingSync\"\n        bitButton\n        buttonType=\"secondary\"\n        type=\"button\"\n        (click)=\"manageBillingSync()\"\n      >\n        {{ (hasBillingSyncToken ? \"viewBillingToken\" : \"setUpBillingSync\") | i18n }}\n      </button>\n    </div>\n  </ng-container>\n</ng-template>\n","// FIXME: Update this file to be type safe and remove this and next line\n// @ts-strict-ignore\nimport { Component, OnDestroy, OnInit } from \"@angular/core\";\nimport { FormControl, FormGroup } from \"@angular/forms\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { concatMap, firstValueFrom, Subject, takeUntil } from \"rxjs\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { OrganizationApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/organization/organization-api.service.abstraction\";\nimport {\n  getOrganizationById,\n  OrganizationService,\n} from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { OrganizationConnectionType } from \"@bitwarden/common/admin-console/enums\";\nimport { Organization } from \"@bitwarden/common/admin-console/models/domain/organization\";\nimport { OrganizationConnectionResponse } from \"@bitwarden/common/admin-console/models/response/organization-connection.response\";\nimport { AccountService } from \"@bitwarden/common/auth/abstractions/account.service\";\nimport { getUserId } from \"@bitwarden/common/auth/services/account.service\";\nimport { ProductTierType } from \"@bitwarden/common/billing/enums\";\nimport { BillingSyncConfigApi } from \"@bitwarden/common/billing/models/api/billing-sync-config.api\";\nimport { SelfHostedOrganizationSubscriptionView } from \"@bitwarden/common/billing/models/view/self-hosted-organization-subscription.view\";\nimport { EnvironmentService } from \"@bitwarden/common/platform/abstractions/environment.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { MessagingService } from \"@bitwarden/common/platform/abstractions/messaging.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { DialogService, ToastService } from \"@bitwarden/components\";\n\nimport { BillingSyncKeyComponent } from \"./billing-sync-key.component\";\n\n// FIXME: update to use a const object instead of a typescript enum\n// eslint-disable-next-line @bitwarden/platform/no-enums\nenum LicenseOptions {\n  SYNC = 0,\n  UPLOAD = 1,\n}\n\n@Component({\n  templateUrl: \"organization-subscription-selfhost.component.html\",\n  standalone: false,\n})\nexport class OrganizationSubscriptionSelfhostComponent implements OnInit, OnDestroy {\n  subscription: SelfHostedOrganizationSubscriptionView;\n  organizationId: string;\n  userOrg: Organization;\n  cloudWebVaultUrl: string;\n  showAutomaticSyncAndManualUpload: boolean;\n\n  licenseOptions = LicenseOptions;\n  form = new FormGroup({\n    updateMethod: new FormControl(LicenseOptions.UPLOAD),\n  });\n\n  disableLicenseSyncControl = false;\n\n  firstLoaded = false;\n  loading = false;\n\n  private _existingBillingSyncConnection: OrganizationConnectionResponse<BillingSyncConfigApi>;\n\n  private destroy$ = new Subject<void>();\n\n  set existingBillingSyncConnection(value: OrganizationConnectionResponse<BillingSyncConfigApi>) {\n    this._existingBillingSyncConnection = value;\n\n    this.form\n      .get(\"updateMethod\")\n      .setValue(this.billingSyncEnabled ? LicenseOptions.SYNC : LicenseOptions.UPLOAD);\n  }\n\n  get existingBillingSyncConnection() {\n    return this._existingBillingSyncConnection;\n  }\n\n  get billingSyncEnabled() {\n    return this.existingBillingSyncConnection?.enabled;\n  }\n\n  /**\n   * Render the subscription as expired.\n   */\n  get showAsExpired() {\n    return this.subscription.hasSeparateGracePeriod\n      ? this.subscription.isExpiredWithoutGracePeriod\n      : this.subscription.isExpiredAndOutsideGracePeriod;\n  }\n\n  constructor(\n    private messagingService: MessagingService,\n    private apiService: ApiService,\n    private organizationService: OrganizationService,\n    private accountService: AccountService,\n    private route: ActivatedRoute,\n    private organizationApiService: OrganizationApiServiceAbstraction,\n    private platformUtilsService: PlatformUtilsService,\n    private i18nService: I18nService,\n    private environmentService: EnvironmentService,\n    private dialogService: DialogService,\n    private toastService: ToastService,\n  ) {}\n\n  async ngOnInit() {\n    this.cloudWebVaultUrl = await firstValueFrom(this.environmentService.cloudWebVaultUrl$);\n\n    this.route.params\n      .pipe(\n        concatMap(async (params) => {\n          this.organizationId = params.organizationId;\n          await this.load();\n          await this.loadOrganizationConnection();\n          this.firstLoaded = true;\n        }),\n        takeUntil(this.destroy$),\n      )\n      .subscribe();\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  async load() {\n    if (this.loading) {\n      return;\n    }\n    this.loading = true;\n    const userId = await firstValueFrom(getUserId(this.accountService.activeAccount$));\n    this.userOrg = await firstValueFrom(\n      this.organizationService\n        .organizations$(userId)\n        .pipe(getOrganizationById(this.organizationId)),\n    );\n    this.showAutomaticSyncAndManualUpload =\n      this.userOrg.productTierType == ProductTierType.Families ? false : true;\n    if (this.userOrg.canViewSubscription) {\n      const subscriptionResponse = await this.organizationApiService.getSubscription(\n        this.organizationId,\n      );\n      this.subscription = new SelfHostedOrganizationSubscriptionView(subscriptionResponse);\n    }\n\n    this.loading = false;\n  }\n\n  async loadOrganizationConnection() {\n    if (!this.firstLoaded) {\n      const cloudCommunicationEnabled = await this.apiService.getCloudCommunicationsEnabled();\n      this.disableLicenseSyncControl = !cloudCommunicationEnabled;\n    }\n\n    if (this.disableLicenseSyncControl) {\n      return;\n    }\n\n    this.existingBillingSyncConnection = await this.apiService.getOrganizationConnection(\n      this.organizationId,\n      OrganizationConnectionType.CloudBillingSync,\n      BillingSyncConfigApi,\n    );\n  }\n\n  licenseUploaded() {\n    // FIXME: Verify that this floating promise is intentional. If it is, add an explanatory comment and ensure there is proper error handling.\n    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n    this.load();\n    this.messagingService.send(\"updatedOrgLicense\");\n  }\n\n  manageBillingSyncSelfHosted() {\n    BillingSyncKeyComponent.open(this.dialogService, {\n      entityId: this.organizationId,\n      existingConnectionId: this.existingBillingSyncConnection?.id,\n      billingSyncKey: this.existingBillingSyncConnection?.config?.billingSyncKey,\n      setParentConnection: (connection: OrganizationConnectionResponse<BillingSyncConfigApi>) => {\n        this.existingBillingSyncConnection = connection;\n      },\n    });\n  }\n\n  syncLicense = async () => {\n    this.form.get(\"updateMethod\").setValue(LicenseOptions.SYNC);\n    await this.organizationApiService.selfHostedSyncLicense(this.organizationId);\n\n    // FIXME: Verify that this floating promise is intentional. If it is, add an explanatory comment and ensure there is proper error handling.\n    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n    this.load();\n    await this.loadOrganizationConnection();\n    this.messagingService.send(\"updatedOrgLicense\");\n    this.toastService.showToast({\n      variant: \"success\",\n      title: null,\n      message: this.i18nService.t(\"licenseSyncSuccess\"),\n    });\n  };\n\n  get billingSyncSetUp() {\n    return this.existingBillingSyncConnection?.id != null;\n  }\n\n  get updateMethod() {\n    return this.form.get(\"updateMethod\").value;\n  }\n\n  get lastLicenseSync() {\n    return this.existingBillingSyncConnection?.config?.lastLicenseSync;\n  }\n}\n","<app-header></app-header>\n\n<bit-container>\n  <ng-container *ngIf=\"!firstLoaded && loading\">\n    <i class=\"bwi bwi-spinner bwi-spin tw-text-muted\" title=\"{{ 'loading' | i18n }}\"></i>\n    <span class=\"tw-sr-only\">{{ \"loading\" | i18n }}</span>\n  </ng-container>\n\n  <app-org-subscription-hidden\n    *ngIf=\"firstLoaded && !userOrg.canViewSubscription\"\n    [providerName]=\"userOrg.providerName\"\n  ></app-org-subscription-hidden>\n\n  <ng-container *ngIf=\"subscription && firstLoaded\">\n    <dl class=\"tw-mb-2\">\n      <dt>{{ \"billingPlan\" | i18n }}</dt>\n      <dd>{{ subscription.planName }}</dd>\n      <ng-container *ngIf=\"billingSyncSetUp\">\n        <dt>{{ \"lastLicenseSync\" | i18n }}</dt>\n        <dd>\n          {{ lastLicenseSync != null ? (lastLicenseSync | date: \"medium\") : (\"never\" | i18n) }}\n        </dd>\n      </ng-container>\n      <dt>\n        <span [ngClass]=\"{ 'tw-text-danger': showAsExpired }\">{{\n          \"subscriptionExpiration\" | i18n\n        }}</span>\n        <a\n          href=\"https://bitwarden.com/help/licensing-on-premise/#update-organization-license\"\n          target=\"_blank\"\n          [appA11yTitle]=\"'licensePaidFeaturesHelp' | i18n\"\n          rel=\"noreferrer\"\n        >\n          <i class=\"bwi bwi-question-circle\" aria-hidden=\"true\"></i>\n          <span class=\"tw-sr-only\">{{ \"licensePaidFeaturesHelp\" | i18n }}</span>\n        </a>\n      </dt>\n      <dd *ngIf=\"subscription.hasExpiration\" [ngClass]=\"{ 'tw-text-danger': showAsExpired }\">\n        {{\n          (subscription.hasSeparateGracePeriod\n            ? subscription.expirationWithoutGracePeriod\n            : subscription.expirationWithGracePeriod\n          ) | date: \"mediumDate\"\n        }}\n        <div\n          *ngIf=\"subscription.hasSeparateGracePeriod && !subscription.isInTrial\"\n          class=\"tw-text-muted tw-break-words tw-whitespace-normal tw-max-w-fit tw-inline-block\"\n        >\n          {{\n            \"selfHostGracePeriodHelp\"\n              | i18n: (subscription.expirationWithGracePeriod | date: \"mediumDate\")\n          }}\n        </div>\n      </dd>\n      <dd *ngIf=\"!subscription.hasExpiration\">{{ \"neverExpires\" | i18n }}</dd>\n    </dl>\n\n    <a\n      bitButton\n      buttonType=\"secondary\"\n      href=\"{{ this.cloudWebVaultUrl }}\"\n      target=\"_blank\"\n      rel=\"noreferrer\"\n      class=\"tw-mb-4\"\n    >\n      {{ \"launchCloudSubscription\" | i18n }}\n    </a>\n    <form [formGroup]=\"form\">\n      <bit-radio-group formControlName=\"updateMethod\" [block]=\"true\">\n        <h2 class=\"tw-mt-5\">\n          {{ \"licenseAndBillingManagement\" | i18n }}\n        </h2>\n        <bit-radio-button\n          id=\"automatic-sync\"\n          [value]=\"licenseOptions.SYNC\"\n          [disabled]=\"disableLicenseSyncControl\"\n          *ngIf=\"showAutomaticSyncAndManualUpload\"\n        >\n          <bit-label\n            >{{ \"automaticSync\" | i18n }}\n            <a\n              href=\"https://bitwarden.com/help/families-for-enterprise-self-hosted/\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              slot=\"end\"\n              bitLink\n            >\n              <i class=\"bwi bwi-question-circle\" aria-hidden=\"true\"></i>\n              <span class=\"tw-sr-only\">{{ \"billingSyncHelp\" | i18n }}</span>\n            </a>\n          </bit-label>\n          <bit-hint>\n            {{ \"automaticBillingSyncDesc\" | i18n }}\n          </bit-hint>\n        </bit-radio-button>\n        <ng-container *ngIf=\"updateMethod === licenseOptions.SYNC\">\n          <div class=\"tw-mt-6 tw-flex tw-gap-2\">\n            <button\n              bitButton\n              buttonType=\"secondary\"\n              type=\"button\"\n              (click)=\"manageBillingSyncSelfHosted()\"\n            >\n              {{ \"manageBillingTokenSync\" | i18n }}\n            </button>\n            <button\n              bitButton\n              buttonType=\"primary\"\n              type=\"button\"\n              [bitAction]=\"syncLicense\"\n              [disabled]=\"!billingSyncEnabled\"\n            >\n              {{ \"syncLicense\" | i18n }}\n            </button>\n          </div>\n        </ng-container>\n\n        <bit-radio-button\n          id=\"manual-upload\"\n          [value]=\"licenseOptions.UPLOAD\"\n          class=\"tw-mt-6\"\n          *ngIf=\"showAutomaticSyncAndManualUpload\"\n        >\n          <bit-label>{{ \"manualUpload\" | i18n }}</bit-label>\n          <bit-hint>\n            {{ \"manualBillingTokenUploadDesc\" | i18n }}\n          </bit-hint>\n        </bit-radio-button>\n        <ng-container *ngIf=\"updateMethod === licenseOptions.UPLOAD\">\n          <bit-label class=\"tw-mb-6 tw-block\" *ngIf=\"!showAutomaticSyncAndManualUpload\">\n            {{ \"licenseAndBillingManagementDesc\" | i18n }}\n          </bit-label>\n          <h3 *ngIf=\"showAutomaticSyncAndManualUpload\" class=\"tw-font-semibold tw-mt-6\">\n            {{ \"uploadLicense\" | i18n }}\n          </h3>\n          <app-update-license\n            [showAutomaticSyncAndManualUpload]=\"showAutomaticSyncAndManualUpload\"\n            [organizationId]=\"organizationId\"\n            [showCancel]=\"false\"\n            (onUpdated)=\"licenseUploaded()\"\n          ></app-update-license>\n        </ng-container>\n      </bit-radio-group>\n    </form>\n  </ng-container>\n</bit-container>\n","import { Component, OnDestroy, OnInit } from \"@angular/core\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport {\n  BehaviorSubject,\n  combineLatest,\n  filter,\n  firstValueFrom,\n  lastValueFrom,\n  merge,\n  Observable,\n  of,\n  shareReplay,\n  Subject,\n  switchMap,\n  take,\n  takeUntil,\n  tap,\n  withLatestFrom,\n} from \"rxjs\";\n\nimport { OrganizationService } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { Organization } from \"@bitwarden/common/admin-console/models/domain/organization\";\nimport { AccountService } from \"@bitwarden/common/auth/abstractions/account.service\";\nimport { getUserId } from \"@bitwarden/common/auth/services/account.service\";\nimport { FeatureFlag } from \"@bitwarden/common/enums/feature-flag.enum\";\nimport { ConfigService } from \"@bitwarden/common/platform/abstractions/config/config.service\";\nimport { getById } from \"@bitwarden/common/platform/misc\";\nimport { DialogService } from \"@bitwarden/components\";\nimport { CommandDefinition, MessageListener } from \"@bitwarden/messaging\";\nimport { SubscriberBillingClient } from \"@bitwarden/web-vault/app/billing/clients\";\nimport { OrganizationFreeTrialWarningComponent } from \"@bitwarden/web-vault/app/billing/organizations/warnings/components\";\nimport { OrganizationWarningsService } from \"@bitwarden/web-vault/app/billing/organizations/warnings/services\";\nimport {\n  ChangePaymentMethodDialogComponent,\n  DisplayAccountCreditComponent,\n  DisplayBillingAddressComponent,\n  DisplayPaymentMethodComponent,\n} from \"@bitwarden/web-vault/app/billing/payment/components\";\nimport {\n  BillingAddress,\n  MaskedPaymentMethod,\n} from \"@bitwarden/web-vault/app/billing/payment/types\";\nimport {\n  BitwardenSubscriber,\n  mapOrganizationToSubscriber,\n} from \"@bitwarden/web-vault/app/billing/types\";\nimport { TaxIdWarningType } from \"@bitwarden/web-vault/app/billing/warnings/types\";\nimport { HeaderModule } from \"@bitwarden/web-vault/app/layouts/header/header.module\";\nimport { SharedModule } from \"@bitwarden/web-vault/app/shared\";\n\ntype View = {\n  organization: BitwardenSubscriber;\n  paymentMethod: MaskedPaymentMethod | null;\n  billingAddress: BillingAddress | null;\n  credit: number | null;\n  taxIdWarning: TaxIdWarningType | null;\n};\n\nconst BANK_ACCOUNT_VERIFIED_COMMAND = new CommandDefinition<{ organizationId: string }>(\n  \"organizationBankAccountVerified\",\n);\n\n@Component({\n  templateUrl: \"./organization-payment-details.component.html\",\n  standalone: true,\n  imports: [\n    DisplayAccountCreditComponent,\n    DisplayBillingAddressComponent,\n    DisplayPaymentMethodComponent,\n    HeaderModule,\n    OrganizationFreeTrialWarningComponent,\n    SharedModule,\n  ],\n})\nexport class OrganizationPaymentDetailsComponent implements OnInit, OnDestroy {\n  private viewState$ = new BehaviorSubject<View | null>(null);\n\n  protected organization$ = this.accountService.activeAccount$.pipe(\n    getUserId,\n    switchMap((userId) =>\n      this.organizationService\n        .organizations$(userId)\n        .pipe(getById(this.activatedRoute.snapshot.params.organizationId)),\n    ),\n    filter((organization): organization is Organization => !!organization),\n  );\n\n  private load$: Observable<View> = this.organization$.pipe(\n    mapOrganizationToSubscriber,\n    switchMap(async (organization) => {\n      const getTaxIdWarning = firstValueFrom(\n        this.organizationWarningsService.getTaxIdWarning$(organization.data as Organization),\n      );\n\n      const [paymentMethod, billingAddress, credit, taxIdWarning] = await Promise.all([\n        this.subscriberBillingClient.getPaymentMethod(organization),\n        this.subscriberBillingClient.getBillingAddress(organization),\n        this.subscriberBillingClient.getCredit(organization),\n        getTaxIdWarning,\n      ]);\n\n      return {\n        organization,\n        paymentMethod,\n        billingAddress,\n        credit,\n        taxIdWarning,\n      };\n    }),\n  );\n\n  view$: Observable<View> = merge(\n    this.load$.pipe(tap((view) => this.viewState$.next(view))),\n    this.viewState$.pipe(filter((view): view is View => view !== null)),\n  ).pipe(shareReplay({ bufferSize: 1, refCount: true }));\n\n  private destroy$ = new Subject<void>();\n\n  protected enableTaxIdWarning!: boolean;\n\n  constructor(\n    private accountService: AccountService,\n    private activatedRoute: ActivatedRoute,\n    private configService: ConfigService,\n    private dialogService: DialogService,\n    private messageListener: MessageListener,\n    private organizationService: OrganizationService,\n    private organizationWarningsService: OrganizationWarningsService,\n    private subscriberBillingClient: SubscriberBillingClient,\n  ) {}\n\n  async ngOnInit() {\n    const openChangePaymentMethodDialogOnStart =\n      (history.state?.launchPaymentModalAutomatically as boolean) ?? false;\n\n    if (openChangePaymentMethodDialogOnStart) {\n      history.replaceState({ ...history.state, launchPaymentModalAutomatically: false }, \"\");\n      await this.changePaymentMethod();\n    }\n\n    this.enableTaxIdWarning = await this.configService.getFeatureFlag(\n      FeatureFlag.PM22415_TaxIDWarnings,\n    );\n\n    if (this.enableTaxIdWarning) {\n      this.organizationWarningsService.taxIdWarningRefreshed$\n        .pipe(\n          switchMap((warning) =>\n            combineLatest([\n              of(warning),\n              this.organization$.pipe(take(1)).pipe(\n                mapOrganizationToSubscriber,\n                switchMap((organization) =>\n                  this.subscriberBillingClient.getBillingAddress(organization),\n                ),\n              ),\n            ]),\n          ),\n          takeUntil(this.destroy$),\n        )\n        .subscribe(([taxIdWarning, billingAddress]) => {\n          if (this.viewState$.value) {\n            this.viewState$.next({\n              ...this.viewState$.value,\n              taxIdWarning,\n              billingAddress,\n            });\n          }\n        });\n    }\n\n    this.messageListener\n      .messages$(BANK_ACCOUNT_VERIFIED_COMMAND)\n      .pipe(\n        withLatestFrom(this.view$),\n        filter(([message, view]) => message.organizationId === view.organization.data.id),\n        switchMap(\n          async ([_, view]) =>\n            await Promise.all([\n              this.subscriberBillingClient.getPaymentMethod(view.organization),\n              this.subscriberBillingClient.getBillingAddress(view.organization),\n            ]),\n        ),\n        tap(async ([paymentMethod, billingAddress]) => {\n          if (paymentMethod) {\n            await this.setPaymentMethod(paymentMethod);\n          }\n          if (billingAddress) {\n            this.setBillingAddress(billingAddress);\n          }\n        }),\n        takeUntil(this.destroy$),\n      )\n      .subscribe();\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  changePaymentMethod = async () => {\n    const view = await firstValueFrom(this.view$);\n    const dialogRef = ChangePaymentMethodDialogComponent.open(this.dialogService, {\n      data: {\n        subscriber: view.organization,\n      },\n    });\n    const result = await lastValueFrom(dialogRef.closed);\n    if (result?.type === \"success\") {\n      await this.setPaymentMethod(result.paymentMethod);\n    }\n  };\n\n  setBillingAddress = (billingAddress: BillingAddress) => {\n    if (this.viewState$.value) {\n      if (\n        this.enableTaxIdWarning &&\n        this.viewState$.value.billingAddress?.taxId !== billingAddress.taxId\n      ) {\n        this.organizationWarningsService.refreshTaxIdWarning();\n      }\n      this.viewState$.next({\n        ...this.viewState$.value,\n        billingAddress,\n      });\n    }\n  };\n\n  setPaymentMethod = async (paymentMethod: MaskedPaymentMethod) => {\n    if (this.viewState$.value) {\n      if (!this.viewState$.value.paymentMethod) {\n        this.organizationWarningsService.refreshFreeTrialWarning();\n      }\n\n      const billingAddress =\n        this.viewState$.value.billingAddress ??\n        (await this.subscriberBillingClient.getBillingAddress(this.viewState$.value.organization));\n\n      this.viewState$.next({\n        ...this.viewState$.value,\n        paymentMethod,\n        billingAddress,\n      });\n    }\n  };\n}\n","@let organization = organization$ | async;\n@if (organization) {\n  <app-organization-free-trial-warning\n    [organization]=\"organization\"\n    (clicked)=\"changePaymentMethod()\"\n  >\n  </app-organization-free-trial-warning>\n}\n<app-header></app-header>\n<bit-container>\n  @let view = view$ | async;\n  @if (!view) {\n    <ng-container>\n      <i\n        class=\"bwi bwi-spinner bwi-spin tw-text-muted\"\n        title=\"{{ 'loading' | i18n }}\"\n        aria-hidden=\"true\"\n      ></i>\n      <span class=\"tw-sr-only\">{{ \"loading\" | i18n }}</span>\n    </ng-container>\n  } @else {\n    <ng-container>\n      <app-display-payment-method\n        [subscriber]=\"view.organization\"\n        [paymentMethod]=\"view.paymentMethod\"\n        (updated)=\"setPaymentMethod($event)\"\n      ></app-display-payment-method>\n\n      <app-display-billing-address\n        [subscriber]=\"view.organization\"\n        [billingAddress]=\"view.billingAddress\"\n        [taxIdWarning]=\"enableTaxIdWarning ? view.taxIdWarning : null\"\n        (updated)=\"setBillingAddress($event)\"\n      ></app-display-billing-address>\n\n      <app-display-account-credit\n        [subscriber]=\"view.organization\"\n        [credit]=\"view.credit\"\n      ></app-display-account-credit>\n    </ng-container>\n  }\n</bit-container>\n","// FIXME: Update this file to be type safe and remove this and next line\n// @ts-strict-ignore\nimport { Component, EventEmitter, Input, OnDestroy, OnInit, Output } from \"@angular/core\";\nimport { FormBuilder, Validators } from \"@angular/forms\";\nimport { Subject, firstValueFrom, takeUntil } from \"rxjs\";\n\nimport { OrganizationApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/organization/organization-api.service.abstraction\";\nimport {\n  getOrganizationById,\n  InternalOrganizationServiceAbstraction,\n} from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { OrganizationData } from \"@bitwarden/common/admin-console/models/data/organization.data\";\nimport { AccountService } from \"@bitwarden/common/auth/abstractions/account.service\";\nimport { getUserId } from \"@bitwarden/common/auth/services/account.service\";\nimport { OrganizationSmSubscriptionUpdateRequest } from \"@bitwarden/common/billing/models/request/organization-sm-subscription-update.request\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { ToastService } from \"@bitwarden/components\";\n\nexport interface SecretsManagerSubscriptionOptions {\n  interval: \"year\" | \"month\";\n\n  /**\n   * The current number of seats the organization subscribes to.\n   */\n  seatCount: number;\n\n  /**\n   * Optional auto-scaling limit for the number of seats the organization can subscribe to.\n   */\n  maxAutoscaleSeats: number;\n\n  /**\n   * The price per seat for the subscription.\n   */\n  seatPrice: number;\n\n  /**\n   * The number of service accounts that are included in the base subscription.\n   */\n  baseServiceAccountCount: number;\n\n  /**\n   * The current number of additional service accounts the organization subscribes to.\n   */\n  additionalServiceAccounts: number;\n\n  /**\n   * Optional auto-scaling limit for the number of additional service accounts the organization can subscribe to.\n   */\n  maxAutoscaleServiceAccounts: number;\n\n  /**\n   * The price per additional service account for the subscription.\n   */\n  additionalServiceAccountPrice: number;\n}\n\n@Component({\n  selector: \"app-sm-adjust-subscription\",\n  templateUrl: \"sm-adjust-subscription.component.html\",\n  standalone: false,\n})\nexport class SecretsManagerAdjustSubscriptionComponent implements OnInit, OnDestroy {\n  @Input() organizationId: string;\n  @Input() options: SecretsManagerSubscriptionOptions;\n  @Output() onAdjusted = new EventEmitter();\n\n  private destroy$ = new Subject<void>();\n\n  formGroup = this.formBuilder.group({\n    seatCount: [0, [Validators.required, Validators.min(1)]],\n    limitSeats: [false],\n    maxAutoscaleSeats: [null as number | null],\n    additionalServiceAccounts: [0, [Validators.required, Validators.min(0)]],\n    limitServiceAccounts: [false],\n    maxAutoscaleServiceAccounts: [null as number | null],\n  });\n\n  get monthlyServiceAccountPrice(): number {\n    return this.options.interval == \"month\"\n      ? this.options.additionalServiceAccountPrice\n      : this.options.additionalServiceAccountPrice / 12;\n  }\n\n  get serviceAccountTotalCost(): number {\n    return Math.abs(\n      this.formGroup.value.additionalServiceAccounts * this.options.additionalServiceAccountPrice,\n    );\n  }\n\n  get seatTotalCost(): number {\n    return Math.abs(this.formGroup.value.seatCount * this.options.seatPrice);\n  }\n\n  get maxAdditionalServiceAccounts(): number {\n    const maxTotalServiceAccounts = this.formGroup.value.maxAutoscaleServiceAccounts ?? 0;\n    return Math.max(0, maxTotalServiceAccounts - this.options.baseServiceAccountCount);\n  }\n\n  get maxServiceAccountTotalCost(): number {\n    return this.maxAdditionalServiceAccounts * this.options.additionalServiceAccountPrice;\n  }\n\n  get maxSeatTotalCost(): number {\n    return Math.abs((this.formGroup.value.maxAutoscaleSeats ?? 0) * this.options.seatPrice);\n  }\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private organizationApiService: OrganizationApiServiceAbstraction,\n    private i18nService: I18nService,\n    private platformUtilsService: PlatformUtilsService,\n    private toastService: ToastService,\n    private internalOrganizationService: InternalOrganizationServiceAbstraction,\n    private accountService: AccountService,\n  ) {}\n\n  ngOnInit() {\n    this.formGroup.valueChanges.pipe(takeUntil(this.destroy$)).subscribe((value) => {\n      const maxAutoscaleSeatsControl = this.formGroup.controls.maxAutoscaleSeats;\n      const maxAutoscaleServiceAccountsControl =\n        this.formGroup.controls.maxAutoscaleServiceAccounts;\n\n      if (value.limitSeats) {\n        maxAutoscaleSeatsControl.setValidators([Validators.min(value.seatCount)]);\n        maxAutoscaleSeatsControl.enable({ emitEvent: false });\n      } else {\n        maxAutoscaleSeatsControl.disable({ emitEvent: false });\n      }\n\n      if (value.limitServiceAccounts) {\n        maxAutoscaleServiceAccountsControl.setValidators([\n          Validators.min(value.additionalServiceAccounts + this.options.baseServiceAccountCount),\n        ]);\n        maxAutoscaleServiceAccountsControl.enable({ emitEvent: false });\n      } else {\n        maxAutoscaleServiceAccountsControl.disable({ emitEvent: false });\n      }\n    });\n\n    this.formGroup.patchValue({\n      seatCount: this.options.seatCount,\n      maxAutoscaleSeats: this.options.maxAutoscaleSeats,\n      additionalServiceAccounts: this.options.additionalServiceAccounts,\n      maxAutoscaleServiceAccounts: this.options.maxAutoscaleServiceAccounts,\n      limitSeats: this.options.maxAutoscaleSeats != null,\n      limitServiceAccounts: this.options.maxAutoscaleServiceAccounts != null,\n    });\n  }\n\n  submit = async () => {\n    this.formGroup.markAllAsTouched();\n\n    if (this.formGroup.invalid) {\n      return;\n    }\n\n    const request = new OrganizationSmSubscriptionUpdateRequest();\n    request.seatAdjustment = this.formGroup.value.seatCount - this.options.seatCount;\n    request.serviceAccountAdjustment =\n      this.formGroup.value.additionalServiceAccounts - this.options.additionalServiceAccounts;\n    request.maxAutoscaleSeats = this.formGroup.value.limitSeats\n      ? this.formGroup.value.maxAutoscaleSeats\n      : null;\n    request.maxAutoscaleServiceAccounts = this.formGroup.value.limitServiceAccounts\n      ? this.formGroup.value.maxAutoscaleServiceAccounts\n      : null;\n\n    const response = await this.organizationApiService.updateSecretsManagerSubscription(\n      this.organizationId,\n      request,\n    );\n\n    const userId = await firstValueFrom(getUserId(this.accountService.activeAccount$));\n    const organization = await firstValueFrom(\n      this.internalOrganizationService\n        .organizations$(userId)\n        .pipe(getOrganizationById(this.organizationId)),\n    );\n\n    const organizationData = new OrganizationData(response, {\n      isMember: organization.isMember,\n      isProviderUser: organization.isProviderUser,\n    });\n\n    await this.internalOrganizationService.upsert(organizationData, userId);\n\n    this.toastService.showToast({\n      variant: \"success\",\n      title: null,\n      message: this.i18nService.t(\"subscriptionUpdated\"),\n    });\n\n    this.onAdjusted.emit();\n  };\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n}\n","<form [formGroup]=\"formGroup\" [bitSubmit]=\"submit\">\n  <bit-form-field class=\"tw-w-2/3\">\n    <bit-label>{{ \"subscriptionSeats\" | i18n }}</bit-label>\n    <input bitInput id=\"smSeatCount\" formControlName=\"seatCount\" type=\"number\" step=\"1\" min=\"1\" />\n    <bit-hint>\n      <strong>{{ \"total\" | i18n }}:</strong>\n      {{ formGroup.value.seatCount || 0 }} &times; {{ options.seatPrice | currency: \"$\" }} =\n      {{ seatTotalCost | currency: \"$\" }} / {{ options.interval | i18n }}\n    </bit-hint>\n  </bit-form-field>\n  <bit-form-control>\n    <bit-label>{{ \"limitSubscription\" | i18n }}</bit-label>\n    <input type=\"checkbox\" bitCheckbox id=\"limitSmSeats\" formControlName=\"limitSeats\" />\n    <bit-hint>\n      {{ \"limitSmSubscriptionDesc\" | i18n }}\n    </bit-hint>\n  </bit-form-control>\n  <bit-form-field class=\"tw-w-2/3\" *ngIf=\"formGroup.value.limitSeats\">\n    <bit-label>{{ \"maxSeatLimit\" | i18n }}</bit-label>\n    <input\n      bitInput\n      id=\"smSeatLimit\"\n      formControlName=\"maxAutoscaleSeats\"\n      type=\"number\"\n      step=\"1\"\n      [min]=\"formGroup.value.seatCount\"\n    />\n    <bit-hint>\n      <strong>{{ \"maxSeatCost\" | i18n }}:</strong>\n      {{ formGroup.value.maxAutoscaleSeats || 0 }} &times; {{ options.seatPrice | currency: \"$\" }} =\n      {{ maxSeatTotalCost | currency: \"$\" }} /\n      {{ options.interval | i18n }}\n    </bit-hint>\n  </bit-form-field>\n  <bit-form-field class=\"tw-w-2/3\">\n    <bit-label>{{ \"additionalMachineAccounts\" | i18n }}</bit-label>\n    <input\n      bitInput\n      id=\"additionalServiceAccountCount\"\n      formControlName=\"additionalServiceAccounts\"\n      type=\"number\"\n      step=\"1\"\n      min=\"0\"\n    />\n    <bit-hint>\n      <div>\n        {{ \"includedMachineAccounts\" | i18n: options.baseServiceAccountCount }}\n        {{ \"addAdditionalMachineAccounts\" | i18n: (monthlyServiceAccountPrice | currency: \"$\") }}\n      </div>\n      <div>\n        <strong>{{ \"total\" | i18n }}:</strong>\n        {{ formGroup.value.additionalServiceAccounts || 0 }} &times;\n        {{ options.additionalServiceAccountPrice | currency: \"$\" }} =\n        {{ serviceAccountTotalCost | currency: \"$\" }} / {{ options.interval | i18n }}\n      </div>\n    </bit-hint>\n  </bit-form-field>\n  <bit-form-control>\n    <bit-label>{{ \"limitMachineAccounts\" | i18n }}</bit-label>\n    <input\n      type=\"checkbox\"\n      bitCheckbox\n      id=\"limitServiceAccounts\"\n      formControlName=\"limitServiceAccounts\"\n    />\n    <bit-hint>\n      {{ \"limitMachineAccountsDesc\" | i18n }}\n    </bit-hint>\n  </bit-form-control>\n  <bit-form-field class=\"tw-w-2/3\" *ngIf=\"formGroup.value.limitServiceAccounts\">\n    <bit-label>{{ \"machineAccountLimit\" | i18n }}</bit-label>\n    <input\n      bitInput\n      id=\"additionalServiceAccountLimit\"\n      formControlName=\"maxAutoscaleServiceAccounts\"\n      type=\"number\"\n      step=\"1\"\n      [min]=\"formGroup.value.additionalServiceAccounts\"\n    />\n    <bit-hint>\n      <div>\n        {{ \"includedMachineAccounts\" | i18n: options.baseServiceAccountCount }}\n      </div>\n      <strong>{{ \"maxMachineAccountCost\" | i18n }}:</strong>\n      {{ maxAdditionalServiceAccounts }} &times;\n      {{ options.additionalServiceAccountPrice | currency: \"$\" }} =\n      {{ maxServiceAccountTotalCost | currency: \"$\" }} / {{ options.interval | i18n }}\n    </bit-hint>\n  </bit-form-field>\n  <button type=\"submit\" bitButton buttonType=\"primary\" bitFormButton>\n    {{ \"save\" | i18n }}\n  </button>\n  <bit-error-summary [formGroup]=\"formGroup\" class=\"tw-mt-2\"></bit-error-summary>\n</form>\n","// FIXME: Update this file to be type safe and remove this and next line\n// @ts-strict-ignore\nimport { Component, EventEmitter, Input, Output } from \"@angular/core\";\nimport { FormBuilder } from \"@angular/forms\";\nimport { firstValueFrom } from \"rxjs\";\n\nimport { ApiService } from \"@bitwarden/common/abstractions/api.service\";\nimport { OrganizationApiServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/organization/organization-api.service.abstraction\";\nimport { InternalOrganizationServiceAbstraction } from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { OrganizationData } from \"@bitwarden/common/admin-console/models/data/organization.data\";\nimport { Organization } from \"@bitwarden/common/admin-console/models/domain/organization\";\nimport { AccountService } from \"@bitwarden/common/auth/abstractions/account.service\";\nimport { getUserId } from \"@bitwarden/common/auth/services/account.service\";\nimport { SecretsManagerSubscribeRequest } from \"@bitwarden/common/billing/models/request/sm-subscribe.request\";\nimport { BillingCustomerDiscount } from \"@bitwarden/common/billing/models/response/organization-subscription.response\";\nimport { PlanResponse } from \"@bitwarden/common/billing/models/response/plan.response\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\nimport { ToastService } from \"@bitwarden/components\";\n\nimport { secretsManagerSubscribeFormFactory } from \"../shared\";\n\n@Component({\n  selector: \"sm-subscribe-standalone\",\n  templateUrl: \"sm-subscribe-standalone.component.html\",\n  standalone: false,\n})\nexport class SecretsManagerSubscribeStandaloneComponent {\n  @Input() plan: PlanResponse;\n  @Input() organization: Organization;\n  @Input() customerDiscount: BillingCustomerDiscount;\n  @Output() onSubscribe = new EventEmitter<void>();\n\n  formGroup = secretsManagerSubscribeFormFactory(this.formBuilder);\n\n  constructor(\n    private apiService: ApiService,\n    private formBuilder: FormBuilder,\n    private platformUtilsService: PlatformUtilsService,\n    private i18nService: I18nService,\n    private organizationApiService: OrganizationApiServiceAbstraction,\n    private organizationService: InternalOrganizationServiceAbstraction,\n    private toastService: ToastService,\n    private accountService: AccountService,\n  ) {}\n\n  submit = async () => {\n    const request = new SecretsManagerSubscribeRequest();\n    request.additionalSmSeats = this.plan.SecretsManager.hasAdditionalSeatsOption\n      ? this.formGroup.value.userSeats\n      : 0;\n    request.additionalServiceAccounts = this.plan.SecretsManager.hasAdditionalServiceAccountOption\n      ? this.formGroup.value.additionalServiceAccounts\n      : 0;\n\n    const profileOrganization = await this.organizationApiService.subscribeToSecretsManager(\n      this.organization.id,\n      request,\n    );\n    const organizationData = new OrganizationData(profileOrganization, {\n      isMember: this.organization.isMember,\n      isProviderUser: this.organization.isProviderUser,\n    });\n    const userId = await firstValueFrom(getUserId(this.accountService.activeAccount$));\n    await this.organizationService.upsert(organizationData, userId);\n\n    /*\n      Because subscribing to Secrets Manager automatically provides access to Secrets Manager for the\n      subscribing user, we need to refresh the identity token to account for their updated permissions.\n    */\n    await this.apiService.refreshIdentityToken();\n\n    this.toastService.showToast({\n      variant: \"success\",\n      title: null,\n      message: this.i18nService.t(\"subscribedToSecretsManager\"),\n    });\n\n    this.onSubscribe.emit();\n  };\n}\n","<form [formGroup]=\"formGroup\" [bitSubmit]=\"submit\" *ngIf=\"plan\">\n  <sm-subscribe\n    [formGroup]=\"formGroup\"\n    [selectedPlan]=\"plan\"\n    [upgradeOrganization]=\"false\"\n    [showSubmitButton]=\"true\"\n    [customerDiscount]=\"customerDiscount\"\n  ></sm-subscribe>\n</form>\n","// FIXME: Update this file to be type safe and remove this and next line\n// @ts-strict-ignore\nimport { Component, Input } from \"@angular/core\";\n\nimport { GearIcon } from \"@bitwarden/assets/svg\";\n\n@Component({\n  selector: \"app-org-subscription-hidden\",\n  template: `<div class=\"tw-flex tw-flex-col tw-items-center tw-text-info\">\n    <div class=\"tw-size-56 tw-content-center\">\n      <bit-icon [icon]=\"gearIcon\" aria-hidden=\"true\"></bit-icon>\n    </div>\n    <p class=\"tw-font-bold\">{{ \"billingManagedByProvider\" | i18n: providerName }}</p>\n    <p>{{ \"billingContactProviderForAssistance\" | i18n }}</p>\n  </div>`,\n  standalone: false,\n})\nexport class SubscriptionHiddenComponent {\n  @Input() providerName: string;\n  gearIcon = GearIcon;\n}\n","// FIXME: Update this file to be type safe and remove this and next line\n// @ts-strict-ignore\nimport { DatePipe } from \"@angular/common\";\nimport { Component, EventEmitter, Input, Output } from \"@angular/core\";\n\nimport { OrganizationSubscriptionResponse } from \"@bitwarden/common/billing/models/response/organization-subscription.response\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\n\ntype ComponentData = {\n  status?: {\n    label: string;\n    value: string;\n  };\n  date?: {\n    label: string;\n    value: string;\n  };\n  callout?: {\n    severity: \"danger\" | \"warning\";\n    header: string;\n    body: string;\n    showReinstatementButton: boolean;\n  };\n};\n\n@Component({\n  selector: \"app-subscription-status\",\n  templateUrl: \"subscription-status.component.html\",\n  standalone: false,\n})\nexport class SubscriptionStatusComponent {\n  @Input({ required: true }) organizationSubscriptionResponse: OrganizationSubscriptionResponse;\n  @Output() reinstatementRequested = new EventEmitter<void>();\n\n  constructor(\n    private datePipe: DatePipe,\n    private i18nService: I18nService,\n  ) {}\n\n  get displayedStatus(): string {\n    const sponsored = this.subscription.items.some((item) => item.sponsoredSubscriptionItem);\n    return sponsored ? this.i18nService.t(\"sponsored\") : this.data.status.value;\n  }\n\n  get planName() {\n    return this.organizationSubscriptionResponse.plan.name;\n  }\n\n  get status(): string {\n    return this.subscription\n      ? this.subscription.status != \"canceled\" && this.subscription.cancelAtEndDate\n        ? \"pending_cancellation\"\n        : this.subscription.status\n      : \"free\";\n  }\n\n  get subscription() {\n    return this.organizationSubscriptionResponse?.subscription;\n  }\n\n  get data(): ComponentData {\n    const defaultStatusLabel = this.i18nService.t(\"status\");\n\n    const nextChargeDateLabel = this.i18nService.t(\"nextCharge\");\n    const subscriptionExpiredDateLabel = this.i18nService.t(\"subscriptionExpired\");\n    const cancellationDateLabel = this.i18nService.t(\"cancellationDate\");\n\n    switch (this.status) {\n      case \"free\": {\n        return {};\n      }\n      case \"trialing\": {\n        return {\n          status: {\n            label: defaultStatusLabel,\n            value: this.i18nService.t(\"trial\"),\n          },\n          date: {\n            label: nextChargeDateLabel,\n            value: this.subscription.periodEndDate,\n          },\n        };\n      }\n      case \"active\": {\n        return {\n          status: {\n            label: defaultStatusLabel,\n            value: this.i18nService.t(\"active\"),\n          },\n          date: {\n            label: nextChargeDateLabel,\n            value: this.subscription.periodEndDate,\n          },\n        };\n      }\n      case \"past_due\": {\n        const pastDueText = this.i18nService.t(\"pastDue\");\n        const suspensionDate = this.datePipe.transform(\n          this.subscription.suspensionDate,\n          \"mediumDate\",\n        );\n        const calloutBody =\n          this.subscription.collectionMethod === \"charge_automatically\"\n            ? this.i18nService.t(\n                \"pastDueWarningForChargeAutomatically\",\n                this.subscription.gracePeriod,\n                suspensionDate,\n              )\n            : this.i18nService.t(\n                \"pastDueWarningForSendInvoice\",\n                this.subscription.gracePeriod,\n                suspensionDate,\n              );\n        return {\n          status: {\n            label: defaultStatusLabel,\n            value: pastDueText,\n          },\n          date: {\n            label: subscriptionExpiredDateLabel,\n            value: this.subscription.unpaidPeriodEndDate,\n          },\n          callout: {\n            severity: \"warning\",\n            header: pastDueText,\n            body: calloutBody,\n            showReinstatementButton: false,\n          },\n        };\n      }\n      case \"unpaid\": {\n        return {\n          status: {\n            label: defaultStatusLabel,\n            value: this.i18nService.t(\"unpaid\"),\n          },\n          date: {\n            label: subscriptionExpiredDateLabel,\n            value: this.subscription.unpaidPeriodEndDate,\n          },\n          callout: {\n            severity: \"danger\",\n            header: this.i18nService.t(\"unpaidInvoice\"),\n            body: this.i18nService.t(\"toReactivateYourSubscription\"),\n            showReinstatementButton: false,\n          },\n        };\n      }\n      case \"pending_cancellation\": {\n        const pendingCancellationText = this.i18nService.t(\"pendingCancellation\");\n        return {\n          status: {\n            label: defaultStatusLabel,\n            value: pendingCancellationText,\n          },\n          date: {\n            label: cancellationDateLabel,\n            value: this.subscription.periodEndDate,\n          },\n          callout: {\n            severity: \"warning\",\n            header: pendingCancellationText,\n            body: this.i18nService.t(\"subscriptionPendingCanceled\"),\n            showReinstatementButton: true,\n          },\n        };\n      }\n      case \"incomplete_expired\":\n      case \"canceled\": {\n        const canceledText = this.i18nService.t(\"canceled\");\n        return {\n          status: {\n            label: defaultStatusLabel,\n            value: canceledText,\n          },\n          date: {\n            label: cancellationDateLabel,\n            value: this.subscription.periodEndDate,\n          },\n          callout: {\n            severity: \"danger\",\n            header: canceledText,\n            body: this.i18nService.t(\"subscriptionCanceled\"),\n            showReinstatementButton: false,\n          },\n        };\n      }\n    }\n  }\n\n  requestReinstatement = () => this.reinstatementRequested.emit();\n}\n","<ng-container>\n  <bit-callout *ngIf=\"data.callout\" [type]=\"data.callout.severity\" [title]=\"data.callout.header\">\n    <p>{{ data.callout.body }}</p>\n    <button\n      *ngIf=\"data.callout.showReinstatementButton\"\n      bitButton\n      buttonType=\"secondary\"\n      [bitAction]=\"requestReinstatement\"\n      type=\"button\"\n    >\n      {{ \"reinstateSubscription\" | i18n }}\n    </button>\n  </bit-callout>\n  <dl class=\"tw-grid tw-grid-flow-col tw-grid-rows-2\">\n    <dt>{{ \"billingPlan\" | i18n }}</dt>\n    <dd>{{ planName }}</dd>\n    <ng-container *ngIf=\"data.status && data.date\">\n      <dt>{{ data.status.label }}</dt>\n      <dd>\n        <span class=\"tw-capitalize\">\n          {{ displayedStatus }}\n        </span>\n      </dd>\n      <dt>\n        {{ data.date.label | titlecase }}\n      </dt>\n      <dd>\n        {{ data.date.value | date: \"mediumDate\" }}\n      </dd>\n    </ng-container>\n  </dl>\n</ng-container>\n"],"names":[],"sourceRoot":""}