{"version":3,"file":"src_app_auth_emergency-access_accept_accept-emergency_component_ts.050df73721c745fc0679.js","mappings":"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","sources":["webpack://@bitwarden/web-vault/./src/app/auth/emergency-access/accept/accept-emergency.component.ts","webpack://@bitwarden/web-vault/./src/app/auth/emergency-access/accept/accept-emergency.component.html"],"sourcesContent":["// FIXME: Update this file to be type safe and remove this and next line\n// @ts-strict-ignore\nimport { Component } from \"@angular/core\";\nimport { ActivatedRoute, Params, Router } from \"@angular/router\";\n\nimport { AuthService } from \"@bitwarden/common/auth/abstractions/auth.service\";\nimport { I18nService } from \"@bitwarden/common/platform/abstractions/i18n.service\";\nimport { PlatformUtilsService } from \"@bitwarden/common/platform/abstractions/platform-utils.service\";\n\nimport { BaseAcceptComponent } from \"../../../common/base.accept.component\";\nimport { SharedModule } from \"../../../shared\";\nimport { EmergencyAccessModule } from \"../emergency-access.module\";\nimport { EmergencyAccessService } from \"../services/emergency-access.service\";\n\n@Component({\n  imports: [SharedModule, EmergencyAccessModule],\n  templateUrl: \"accept-emergency.component.html\",\n})\nexport class AcceptEmergencyComponent extends BaseAcceptComponent {\n  name: string;\n  emergencyAccessId: string;\n  acceptEmergencyAccessInviteToken: string;\n\n  protected requiredParameters: string[] = [\"id\", \"name\", \"email\", \"token\"];\n  protected failedShortMessage = \"emergencyInviteAcceptFailedShort\";\n  protected failedMessage = \"emergencyInviteAcceptFailed\";\n\n  constructor(\n    router: Router,\n    platformUtilsService: PlatformUtilsService,\n    i18nService: I18nService,\n    route: ActivatedRoute,\n    authService: AuthService,\n    private emergencyAccessService: EmergencyAccessService,\n  ) {\n    super(router, platformUtilsService, i18nService, route, authService);\n  }\n\n  async authedHandler(qParams: Params): Promise<void> {\n    this.actionPromise = this.emergencyAccessService.accept(qParams.id, qParams.token);\n    await this.actionPromise;\n    this.platformUtilService.showToast(\n      \"success\",\n      this.i18nService.t(\"inviteAccepted\"),\n      this.i18nService.t(\"emergencyInviteAcceptedDesc\"),\n      { timeout: 10000 },\n    );\n    // FIXME: Verify that this floating promise is intentional. If it is, add an explanatory comment and ensure there is proper error handling.\n    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n    this.router.navigate([\"/vault\"]);\n  }\n\n  async unauthedHandler(qParams: Params): Promise<void> {\n    this.name = qParams.name;\n    if (this.name != null) {\n      // Fix URL encoding of space issue with Angular\n      this.name = this.name.replace(/\\+/g, \" \");\n    }\n\n    if (qParams.id) {\n      this.emergencyAccessId = qParams.id;\n    }\n\n    if (qParams.token) {\n      this.acceptEmergencyAccessInviteToken = qParams.token;\n    }\n  }\n\n  async register() {\n    // We don't need users to complete email verification if they are coming directly from an emailed invite.\n    // Therefore, we skip /signup and navigate directly to /finish-signup.\n    await this.router.navigate([\"/finish-signup\"], {\n      queryParams: {\n        email: this.email,\n        acceptEmergencyAccessInviteToken: this.acceptEmergencyAccessInviteToken,\n        emergencyAccessId: this.emergencyAccessId,\n      },\n    });\n  }\n}\n","<div class=\"tw-mt-5 tw-flex tw-justify-center\" *ngIf=\"loading\">\n  <div>\n    <p class=\"tw-text-center\">\n      <i\n        class=\"bwi bwi-spinner bwi-spin bwi-2x tw-text-muted\"\n        title=\"{{ 'loading' | i18n }}\"\n        aria-hidden=\"true\"\n      ></i>\n      <span class=\"tw-sr-only\">{{ \"loading\" | i18n }}</span>\n    </p>\n  </div>\n</div>\n<div *ngIf=\"!loading && !authed\">\n  <p bitTypography=\"body1\" class=\"tw-text-center\">\n    {{ name }}\n  </p>\n  <p bitTypography=\"body1\">{{ \"acceptEmergencyAccess\" | i18n }}</p>\n  <hr />\n  <div class=\"tw-flex tw-gap-2\">\n    <a\n      bitButton\n      buttonType=\"primary\"\n      routerLink=\"/login\"\n      [queryParams]=\"{ email: email }\"\n      [block]=\"true\"\n    >\n      {{ \"logIn\" | i18n }}\n    </a>\n    <button type=\"button\" bitButton buttonType=\"primary\" (click)=\"register()\" [block]=\"true\">\n      {{ \"createAccount\" | i18n }}\n    </button>\n  </div>\n</div>\n"],"names":[],"sourceRoot":""}