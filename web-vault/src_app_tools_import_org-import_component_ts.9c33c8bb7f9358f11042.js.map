{"version":3,"file":"src_app_tools_import_org-import_component_ts.9c33c8bb7f9358f11042.js","mappings":"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","sources":["webpack://@bitwarden/web-vault/../../libs/importer/src/index.ts","webpack://@bitwarden/web-vault/./src/app/tools/import/import-collection-admin.service.ts","webpack://@bitwarden/web-vault/./src/app/tools/import/org-import.component.ts","webpack://@bitwarden/web-vault/./src/app/tools/import/org-import.component.html"],"sourcesContent":["export * from \"./models\";\nexport * from \"./metadata\";\nexport * from \"./services\";\n\nexport { Importer } from \"./importers/importer\";\n","import { Injectable } from \"@angular/core\";\nimport { firstValueFrom } from \"rxjs\";\n\nimport { CollectionAdminService, CollectionAdminView } from \"@bitwarden/admin-console/common\";\nimport { ImportCollectionServiceAbstraction } from \"@bitwarden/importer-core\";\nimport { UserId } from \"@bitwarden/user-core\";\n\n@Injectable()\nexport class ImportCollectionAdminService implements ImportCollectionServiceAbstraction {\n  constructor(private collectionAdminService: CollectionAdminService) {}\n\n  async getAllAdminCollections(\n    organizationId: string,\n    userId: UserId,\n  ): Promise<CollectionAdminView[]> {\n    return await firstValueFrom(\n      this.collectionAdminService.collectionAdminViews$(organizationId, userId),\n    );\n  }\n}\n","import { Component, OnInit } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { firstValueFrom, map } from \"rxjs\";\n\nimport { CollectionAdminService } from \"@bitwarden/admin-console/common\";\nimport {\n  canAccessVaultTab,\n  OrganizationService,\n} from \"@bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction\";\nimport { AccountService } from \"@bitwarden/common/auth/abstractions/account.service\";\nimport { getUserId } from \"@bitwarden/common/auth/services/account.service\";\nimport { isId, OrganizationId } from \"@bitwarden/common/types/guid\";\nimport {\n  DefaultImportMetadataService,\n  ImportCollectionServiceAbstraction,\n  ImportMetadataServiceAbstraction,\n} from \"@bitwarden/importer-core\";\nimport {\n  ImportComponent,\n  ImporterProviders,\n  SYSTEM_SERVICE_PROVIDER,\n} from \"@bitwarden/importer-ui\";\nimport { safeProvider } from \"@bitwarden/ui-common\";\n\nimport { HeaderModule } from \"../../layouts/header/header.module\";\nimport { SharedModule } from \"../../shared\";\n\nimport { ImportCollectionAdminService } from \"./import-collection-admin.service\";\n\n@Component({\n  templateUrl: \"org-import.component.html\",\n  imports: [SharedModule, ImportComponent, HeaderModule],\n  providers: [\n    ...ImporterProviders,\n    safeProvider({\n      provide: ImportMetadataServiceAbstraction,\n      useClass: DefaultImportMetadataService,\n      deps: [SYSTEM_SERVICE_PROVIDER],\n    }),\n    {\n      provide: ImportCollectionServiceAbstraction,\n      useClass: ImportCollectionAdminService,\n      deps: [CollectionAdminService],\n    },\n  ],\n})\nexport class OrgImportComponent implements OnInit {\n  protected routeOrgId: OrganizationId | undefined = undefined;\n  protected loading = false;\n  protected disabled = false;\n\n  constructor(\n    private route: ActivatedRoute,\n    private organizationService: OrganizationService,\n    private router: Router,\n    private accountService: AccountService,\n  ) {}\n\n  ngOnInit(): void {\n    const orgIdParam = this.route.snapshot.paramMap.get(\"organizationId\");\n    if (orgIdParam === undefined) {\n      throw new Error(\"`organizationId` is a required route parameter\");\n    }\n\n    if (!isId<OrganizationId>(orgIdParam)) {\n      throw new Error(\"Invalid OrganizationId provided in route parameter `organizationId`\");\n    }\n\n    this.routeOrgId = orgIdParam;\n  }\n\n  /**\n   * Callback that is called after a successful import.\n   */\n  protected async onSuccessfulImport(organizationId: string): Promise<void> {\n    const userId = await firstValueFrom(getUserId(this.accountService.activeAccount$));\n    const organization = await firstValueFrom(\n      this.organizationService\n        .organizations$(userId)\n        .pipe(map((organizations) => organizations.find((o) => o.id === organizationId))),\n    );\n    if (organization == null) {\n      return;\n    }\n\n    if (canAccessVaultTab(organization)) {\n      await this.router.navigate([\"organizations\", organizationId, \"vault\"]);\n    }\n  }\n}\n","<app-header></app-header>\n\n<bit-container>\n  <tools-import\n    (formDisabled)=\"this.disabled = $event\"\n    (formLoading)=\"this.loading = $event\"\n    (onSuccessfulImport)=\"this.onSuccessfulImport($event)\"\n    organizationId=\"{{ routeOrgId }}\"\n  ></tools-import>\n  <button\n    [disabled]=\"disabled\"\n    [loading]=\"loading\"\n    form=\"import_form_importForm\"\n    bitButton\n    type=\"submit\"\n    bitFormButton\n    buttonType=\"primary\"\n  >\n    {{ \"importData\" | i18n }}\n  </button>\n</bit-container>\n"],"names":[],"sourceRoot":""}