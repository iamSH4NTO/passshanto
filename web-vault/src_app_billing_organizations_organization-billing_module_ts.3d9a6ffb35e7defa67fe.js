"use strict";
(self["webpackChunk_bitwarden_web_vault"] = self["webpackChunk_bitwarden_web_vault"] || []).push([["src_app_billing_organizations_organization-billing_module_ts"],{

/***/ "../../libs/assets/src/svg/svgs/gear.ts":
/*!**********************************************!*\
  !*** ../../libs/assets/src/svg/svgs/gear.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GearIcon: () => (/* binding */ GearIcon)
/* harmony export */ });
/* harmony import */ var _icon_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../icon-service */ "../../libs/assets/src/svg/icon-service.ts");

const GearIcon = (0,_icon_service__WEBPACK_IMPORTED_MODULE_0__.svgIcon) `
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="4.8 6 110.4 107.52">
    <path class="tw-fill-illustration-bg-primary" d="M59.64 84.96c12.924 0 23.4-10.316 23.4-23.04 0-12.725-10.476-23.04-23.4-23.04-12.923 0-23.4 10.315-23.4 23.04 0 12.724 10.477 23.04 23.4 23.04Z"/>
    <path class="tw-fill-illustration-outline" fill-rule="evenodd" d="M59.64 40.08c-12.278 0-22.2 9.795-22.2 21.84 0 12.044 9.922 21.84 22.2 21.84 12.278 0 22.2-9.796 22.2-21.84 0-12.045-9.922-21.84-22.2-21.84Zm-24.6 21.84c0-13.405 11.031-24.24 24.6-24.24s24.6 10.835 24.6 24.24c0 13.405-11.031 24.24-24.6 24.24s-24.6-10.835-24.6-24.24Z" clip-rule="evenodd"/>
    <path class="tw-fill-illustration-bg-primary" d="M96 28.8a8.64 8.64 0 0 0 8.639-8.64 8.64 8.64 0 1 0-17.28 0A8.64 8.64 0 0 0 96 28.8Z"/>
    <path class="tw-fill-illustration-outline" fill-rule="evenodd" d="M96 12.72a7.44 7.44 0 1 0 0 14.88 7.44 7.44 0 0 0 0-14.88Zm-9.84 7.44c0-5.434 4.405-9.84 9.84-9.84 5.434 0 9.84 4.406 9.84 9.84 0 5.435-4.406 9.84-9.84 9.84-5.435 0-9.84-4.405-9.84-9.84Z" clip-rule="evenodd"/>
    <path class="tw-fill-illustration-bg-secondary" d="M105.359 72.72a8.64 8.64 0 0 0 8.64-8.64 8.64 8.64 0 1 0-17.28 0 8.64 8.64 0 0 0 8.64 8.64Z"/>
    <path class="tw-fill-illustration-outline" fill-rule="evenodd" d="M105.36 56.64a7.44 7.44 0 1 0 0 14.881 7.44 7.44 0 0 0 0-14.88Zm-9.84 7.44c0-5.434 4.405-9.84 9.84-9.84 5.434 0 9.84 4.406 9.84 9.84 0 5.435-4.406 9.84-9.84 9.84-5.435 0-9.84-4.405-9.84-9.84Z" clip-rule="evenodd"/>
    <path class="tw-fill-illustration-bg-tertiary" d="M97.44 112.32a8.64 8.64 0 1 0 0-17.28 8.64 8.64 0 0 0 0 17.28Z"/>
    <path class="tw-fill-illustration-outline" fill-rule="evenodd" d="M97.44 96.24a7.44 7.44 0 1 0 0 14.88 7.44 7.44 0 0 0 0-14.88Zm-9.84 7.44c0-5.435 4.405-9.84 9.84-9.84 5.434 0 9.84 4.405 9.84 9.84 0 5.434-4.406 9.84-9.84 9.84-5.435 0-9.84-4.406-9.84-9.84Z" clip-rule="evenodd"/>
    <path class="tw-fill-illustration-bg-primary" d="M39.119 111.599a8.64 8.64 0 1 0 0-17.28 8.64 8.64 0 0 0 0 17.28Z"/>
    <path class="tw-fill-illustration-outline" fill-rule="evenodd" d="M39.12 95.52a7.44 7.44 0 1 0 0 14.88 7.44 7.44 0 0 0 0-14.88Zm-9.84 7.44c0-5.434 4.405-9.84 9.84-9.84 5.434 0 9.84 4.406 9.84 9.84 0 5.435-4.406 9.84-9.84 9.84-5.435 0-9.84-4.405-9.84-9.84Z" clip-rule="evenodd"/>
    <path class="tw-fill-illustration-bg-secondary" d="M14.64 58.32a8.64 8.64 0 1 0 0-17.28 8.64 8.64 0 0 0 0 17.28Z"/>
    <path class="tw-fill-illustration-outline" fill-rule="evenodd" d="M14.64 42.24a7.44 7.44 0 1 0 0 14.88 7.44 7.44 0 0 0 0-14.88ZM4.8 49.68c0-5.435 4.405-9.84 9.84-9.84 5.434 0 9.84 4.405 9.84 9.84 0 5.434-4.406 9.84-9.84 9.84-5.435 0-9.84-4.406-9.84-9.84Z" clip-rule="evenodd"/>
    <path class="tw-fill-illustration-bg-tertiary" d="M39.84 24.48a8.64 8.64 0 1 0 0-17.28 8.64 8.64 0 0 0 0 17.28Z"/>
    <path class="tw-fill-illustration-outline" fill-rule="evenodd" d="M39.84 8.4a7.44 7.44 0 1 0 0 14.88 7.44 7.44 0 0 0 0-14.88ZM30 15.84C30 10.406 34.406 6 39.84 6s9.84 4.405 9.84 9.84c0 5.434-4.405 9.84-9.84 9.84-5.434 0-9.84-4.405-9.84-9.84Z" clip-rule="evenodd"/>
    <path class="tw-fill-illustration-outline" fill-rule="evenodd" d="M43.687 24.097a1.2 1.2 0 0 1 1.576.63l6.48 15.12a1.2 1.2 0 0 1-2.206.946l-6.48-15.12a1.2 1.2 0 0 1 .63-1.576ZM90.305 26.452a1.2 1.2 0 0 1 .123 1.692l-13.68 15.84a1.2 1.2 0 1 1-1.816-1.568l13.68-15.84a1.2 1.2 0 0 1 1.693-.124ZM22.844 52.239a1.2 1.2 0 0 1 1.477-.835l12.96 3.6a1.2 1.2 0 1 1-.642 2.312l-12.96-3.6a1.2 1.2 0 0 1-.835-1.477ZM51.228 82.475a1.2 1.2 0 0 1 .458 1.634l-6.48 11.52a1.2 1.2 0 1 1-2.092-1.177l6.48-11.52a1.2 1.2 0 0 1 1.634-.457ZM75.065 77.564a1.2 1.2 0 0 1 1.691.141l15.84 18.72a1.2 1.2 0 1 1-1.832 1.55l-15.84-18.72a1.2 1.2 0 0 1 .141-1.69ZM82.568 61.78a1.2 1.2 0 0 1 1.332-1.052l12.24 1.44a1.2 1.2 0 0 1-.28 2.384l-12.24-1.44a1.2 1.2 0 0 1-1.052-1.332Z" clip-rule="evenodd"/>
    <path class="tw-fill-illustration-tertiary" d="M72.633 60.217a1.2 1.2 0 0 0-.397.892v1.668c0 .354.156.69.427.918l2.501 2.107c.403.339.537.9.333 1.384l-.788 1.868a1.2 1.2 0 0 1-1.158.733l-3.424-.149a1.2 1.2 0 0 0-.898.349l-1.17 1.165a1.2 1.2 0 0 0-.349.956l.289 3.26a1.2 1.2 0 0 1-.732 1.212l-1.874.784a1.2 1.2 0 0 1-1.352-.302l-2.262-2.497a1.2 1.2 0 0 0-.89-.394h-1.685a1.2 1.2 0 0 0-.915.423l-2.122 2.498a1.2 1.2 0 0 1-1.378.33l-1.884-.788a1.2 1.2 0 0 1-.736-1.16l.148-3.397a1.2 1.2 0 0 0-.352-.902l-1.17-1.165a1.2 1.2 0 0 0-.952-.345l-3.287.288a1.2 1.2 0 0 1-1.21-.729l-.784-1.857a1.2 1.2 0 0 1 .304-1.36l2.501-2.245a1.2 1.2 0 0 0 .398-.893v-1.676a1.2 1.2 0 0 0-.416-.909l-2.526-2.176a1.2 1.2 0 0 1-.323-1.376l.792-1.877a1.2 1.2 0 0 1 1.158-.732l3.424.148a1.2 1.2 0 0 0 .898-.349l1.172-1.166c.251-.25.379-.6.348-.953L52 48.402a1.2 1.2 0 0 1 .732-1.21l1.869-.782a1.2 1.2 0 0 1 1.359.31l2.33 2.616a1.2 1.2 0 0 0 .897.402h1.68a1.2 1.2 0 0 0 .914-.423l2.123-2.497a1.2 1.2 0 0 1 1.377-.33l1.884.788a1.2 1.2 0 0 1 .736 1.159l-.148 3.397a1.2 1.2 0 0 0 .352.902l1.17 1.166c.251.25.6.376.952.345l3.287-.29a1.2 1.2 0 0 1 1.21.73l.784 1.858a1.2 1.2 0 0 1-.302 1.359l-2.573 2.315Zm-14.677-3.025c-2.704 1.105-3.952 4.141-2.843 6.764 1.11 2.692 4.16 3.934 6.794 2.83 2.634-1.104 3.951-4.141 2.842-6.764-1.04-2.692-4.09-3.934-6.793-2.83Z"/>
    <path class="tw-fill-illustration-outline" fill-rule="evenodd" d="M54.138 45.303a2.4 2.4 0 0 1 2.718.618l2.33 2.617h1.68l2.123-2.498a2.4 2.4 0 0 1 2.755-.66l1.884.788a2.4 2.4 0 0 1 1.472 2.32l-.148 3.396 1.17 1.165 3.287-.289a2.4 2.4 0 0 1 2.421 1.458l.784 1.859a2.4 2.4 0 0 1-.606 2.717l-2.572 2.315v1.668l2.501 2.107a2.4 2.4 0 0 1 .665 2.769l-.788 1.868a2.4 2.4 0 0 1-2.315 1.465l-3.424-.149-1.17 1.165.29 3.26a2.4 2.4 0 0 1-1.465 2.425l-1.874.784a2.4 2.4 0 0 1-2.705-.603L60.89 75.37h-1.685l-2.123 2.498a2.4 2.4 0 0 1-2.755.66l-1.884-.788a2.4 2.4 0 0 1-1.472-2.32l.148-3.396-1.17-1.165-3.287.289a2.4 2.4 0 0 1-2.421-1.458l-.784-1.858a2.4 2.4 0 0 1 .608-2.718l2.501-2.246v-1.676l-2.526-2.176a2.4 2.4 0 0 1-.645-2.751l.792-1.878a2.4 2.4 0 0 1 2.315-1.465l3.425.149 1.17-1.166-.292-3.401a2.4 2.4 0 0 1 1.465-2.42l1.869-.782Zm.926 2.214-1.869.782.293 3.4a2.4 2.4 0 0 1-.698 1.907l-1.171 1.166a2.4 2.4 0 0 1-1.797.697l-3.424-.148-.792 1.878 2.526 2.176a2.4 2.4 0 0 1 .833 1.818v1.676a2.4 2.4 0 0 1-.796 1.785L45.668 66.9l.783 1.858 3.287-.289a2.4 2.4 0 0 1 1.904.69l1.17 1.165a2.4 2.4 0 0 1 .704 1.806l-.148 3.397 1.884.787 2.123-2.497a2.4 2.4 0 0 1 1.829-.846h1.685a2.4 2.4 0 0 1 1.78.789l2.261 2.496 1.874-.783-.29-3.26a2.4 2.4 0 0 1 .698-1.912l1.17-1.165a2.4 2.4 0 0 1 1.797-.697l3.424.149.788-1.868-2.502-2.108a2.4 2.4 0 0 1-.853-1.835v-1.669a2.4 2.4 0 0 1 .794-1.783l2.573-2.315-.784-1.859-3.287.289a2.4 2.4 0 0 1-1.903-.69l-1.17-1.165a2.4 2.4 0 0 1-.705-1.806l.148-3.397-1.884-.788-2.123 2.498a2.4 2.4 0 0 1-1.828.846h-1.68a2.4 2.4 0 0 1-1.792-.804l-2.331-2.617Zm10.798 12.055c-1.301-3.338-5.073-4.834-8.36-3.49-3.313 1.352-4.865 5.091-3.496 8.336 1.364 3.302 5.117 4.836 8.365 3.474 3.21-1.345 4.858-5.06 3.49-8.32Zm-2.232.882c-.786-2.033-3.107-3.014-5.22-2.151-2.094.855-3.037 3.187-2.191 5.186l.004.01a3.98 3.98 0 0 0 5.22 2.18c2.052-.86 3.038-3.209 2.2-5.19a1.065 1.065 0 0 1-.013-.035Z" clip-rule="evenodd"/>
  </svg>
`;


/***/ }),

/***/ "../../libs/common/src/admin-console/models/request/organization-api-key.request.ts":
/*!******************************************************************************************!*\
  !*** ../../libs/common/src/admin-console/models/request/organization-api-key.request.ts ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OrganizationApiKeyRequest: () => (/* binding */ OrganizationApiKeyRequest)
/* harmony export */ });
/* harmony import */ var _auth_models_request_secret_verification_request__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../auth/models/request/secret-verification.request */ "../../libs/common/src/auth/models/request/secret-verification.request.ts");
/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../enums */ "../../libs/common/src/admin-console/enums/index.ts");


class OrganizationApiKeyRequest extends _auth_models_request_secret_verification_request__WEBPACK_IMPORTED_MODULE_0__.SecretVerificationRequest {
    constructor() {
        super(...arguments);
        this.type = _enums__WEBPACK_IMPORTED_MODULE_1__.OrganizationApiKeyType.Default;
    }
}


/***/ }),

/***/ "../../libs/common/src/admin-console/models/request/organization-connection.request.ts":
/*!*********************************************************************************************!*\
  !*** ../../libs/common/src/admin-console/models/request/organization-connection.request.ts ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OrganizationConnectionRequest: () => (/* binding */ OrganizationConnectionRequest)
/* harmony export */ });
class OrganizationConnectionRequest {
    constructor(organizationId, type, enabled, config) {
        this.organizationId = organizationId;
        this.type = type;
        this.enabled = enabled;
        this.config = config;
    }
}


/***/ }),

/***/ "../../libs/common/src/billing/models/api/billing-sync-config.api.ts":
/*!***************************************************************************!*\
  !*** ../../libs/common/src/billing/models/api/billing-sync-config.api.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BillingSyncConfigApi: () => (/* binding */ BillingSyncConfigApi)
/* harmony export */ });
/* harmony import */ var _models_response_base_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../models/response/base.response */ "../../libs/common/src/models/response/base.response.ts");
// FIXME: Update this file to be type safe and remove this and next line
// @ts-strict-ignore

class BillingSyncConfigApi extends _models_response_base_response__WEBPACK_IMPORTED_MODULE_0__.BaseResponse {
    constructor(data) {
        super(data);
        if (data == null) {
            return;
        }
        this.billingSyncKey = this.getResponseProperty("BillingSyncKey");
        const lastLicenseSyncString = this.getResponseProperty("LastLicenseSync");
        if (lastLicenseSyncString) {
            this.lastLicenseSync = new Date(lastLicenseSyncString);
        }
    }
}


/***/ }),

/***/ "../../libs/common/src/billing/models/request/billing-sync-config.request.ts":
/*!***********************************************************************************!*\
  !*** ../../libs/common/src/billing/models/request/billing-sync-config.request.ts ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BillingSyncConfigRequest: () => (/* binding */ BillingSyncConfigRequest)
/* harmony export */ });
class BillingSyncConfigRequest {
    constructor(billingSyncKey) {
        this.billingSyncKey = billingSyncKey;
    }
}


/***/ }),

/***/ "../../libs/common/src/billing/models/request/organization-sm-subscription-update.request.ts":
/*!***************************************************************************************************!*\
  !*** ../../libs/common/src/billing/models/request/organization-sm-subscription-update.request.ts ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OrganizationSmSubscriptionUpdateRequest: () => (/* binding */ OrganizationSmSubscriptionUpdateRequest)
/* harmony export */ });
// FIXME: Update this file to be type safe and remove this and next line
// @ts-strict-ignore
class OrganizationSmSubscriptionUpdateRequest {
}


/***/ }),

/***/ "../../libs/common/src/billing/models/request/organization-subscription-update.request.ts":
/*!************************************************************************************************!*\
  !*** ../../libs/common/src/billing/models/request/organization-subscription-update.request.ts ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OrganizationSubscriptionUpdateRequest: () => (/* binding */ OrganizationSubscriptionUpdateRequest)
/* harmony export */ });
class OrganizationSubscriptionUpdateRequest {
    /**
     * Build a subscription update request for the Password Manager product type.
     * @param seatAdjustment - The number of seats to add or remove from the subscription.
     * @param maxAutoscaleSeats - The maximum number of seats that can be auto-scaled for the subscription.
     */
    constructor(seatAdjustment, maxAutoscaleSeats) {
        this.seatAdjustment = seatAdjustment;
        this.maxAutoscaleSeats = maxAutoscaleSeats;
    }
}


/***/ }),

/***/ "../../libs/common/src/billing/models/request/sm-subscribe.request.ts":
/*!****************************************************************************!*\
  !*** ../../libs/common/src/billing/models/request/sm-subscribe.request.ts ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SecretsManagerSubscribeRequest: () => (/* binding */ SecretsManagerSubscribeRequest)
/* harmony export */ });
// FIXME: Update this file to be type safe and remove this and next line
// @ts-strict-ignore
class SecretsManagerSubscribeRequest {
}


/***/ }),

/***/ "../../libs/common/src/billing/models/view/self-hosted-organization-subscription.view.ts":
/*!***********************************************************************************************!*\
  !*** ../../libs/common/src/billing/models/view/self-hosted-organization-subscription.view.ts ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SelfHostedOrganizationSubscriptionView: () => (/* binding */ SelfHostedOrganizationSubscriptionView)
/* harmony export */ });
class SelfHostedOrganizationSubscriptionView {
    constructor(response) {
        if (response == null) {
            return;
        }
        this.planName = response.plan.name;
        this.expirationWithGracePeriod =
            response.expiration != null ? new Date(response.expiration) : null;
        this.expirationWithoutGracePeriod =
            response.expirationWithoutGracePeriod != null
                ? new Date(response.expirationWithoutGracePeriod)
                : null;
    }
    /**
     * The subscription has separate expiration dates for the subscription and the end of grace period.
     */
    get hasSeparateGracePeriod() {
        return this.expirationWithGracePeriod != null && this.expirationWithoutGracePeriod != null;
    }
    /**
     * True if the subscription has an expiration date.
     */
    get hasExpiration() {
        return this.expirationWithGracePeriod != null;
    }
    /**
     * True if the subscription has an expiration date that has past, but may still be within the grace period.
     * For older licenses (< v12), this will always be false because they do not include the `expirationWithoutGracePeriod`.
     */
    get isExpiredWithoutGracePeriod() {
        return this.hasSeparateGracePeriod && this.expirationWithoutGracePeriod < new Date();
    }
    /**
     * True if the subscription has an expiration date that has past, including the grace period.
     */
    get isExpiredAndOutsideGracePeriod() {
        return this.hasExpiration && this.expirationWithGracePeriod < new Date();
    }
    /**
     * In the case of a trial, where there is no grace period, the expirationWithGracePeriod and expirationWithoutGracePeriod will
     * be exactly the same. This can be used to hide the grace period note.
     */
    get isInTrial() {
        return (this.expirationWithGracePeriod &&
            this.expirationWithoutGracePeriod &&
            this.expirationWithGracePeriod.getTime() === this.expirationWithoutGracePeriod.getTime());
    }
}


/***/ }),

/***/ "./src/app/billing/guards/organization-is-unmanaged.guard.ts":
/*!*******************************************************************!*\
  !*** ./src/app/billing/guards/organization-is-unmanaged.guard.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   organizationIsUnmanaged: () => (/* binding */ organizationIsUnmanaged)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/fesm2022/core.mjs");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/operators/map.js");
/* harmony import */ var _bitwarden_common_admin_console_abstractions_organization_organization_service_abstraction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction */ "../../libs/common/src/admin-console/abstractions/organization/organization.service.abstraction.ts");
/* harmony import */ var _bitwarden_common_admin_console_abstractions_provider_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bitwarden/common/admin-console/abstractions/provider.service */ "../../libs/common/src/admin-console/abstractions/provider.service.ts");
/* harmony import */ var _bitwarden_common_admin_console_enums__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bitwarden/common/admin-console/enums */ "../../libs/common/src/admin-console/enums/index.ts");
/* harmony import */ var _bitwarden_common_auth_abstractions_account_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bitwarden/common/auth/abstractions/account.service */ "../../libs/common/src/auth/abstractions/account.service.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};






const organizationIsUnmanaged = (route) => __awaiter(void 0, void 0, void 0, function* () {
    const organizationService = (0,_angular_core__WEBPACK_IMPORTED_MODULE_4__.inject)(_bitwarden_common_admin_console_abstractions_organization_organization_service_abstraction__WEBPACK_IMPORTED_MODULE_0__.OrganizationService);
    const providerService = (0,_angular_core__WEBPACK_IMPORTED_MODULE_4__.inject)(_bitwarden_common_admin_console_abstractions_provider_service__WEBPACK_IMPORTED_MODULE_1__.ProviderService);
    const accountService = (0,_angular_core__WEBPACK_IMPORTED_MODULE_4__.inject)(_bitwarden_common_auth_abstractions_account_service__WEBPACK_IMPORTED_MODULE_3__.AccountService);
    const userId = yield (0,rxjs__WEBPACK_IMPORTED_MODULE_5__.firstValueFrom)(accountService.activeAccount$.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_6__.map)((a) => a === null || a === void 0 ? void 0 : a.id)));
    if (!userId) {
        throw new Error("No user found.");
    }
    const organization = yield (0,rxjs__WEBPACK_IMPORTED_MODULE_5__.firstValueFrom)(organizationService
        .organizations$(userId)
        .pipe((0,_bitwarden_common_admin_console_abstractions_organization_organization_service_abstraction__WEBPACK_IMPORTED_MODULE_0__.getOrganizationById)(route.params.organizationId)));
    if (!organization) {
        throw new Error("No organization found.");
    }
    if (!organization.hasProvider) {
        return true;
    }
    const provider = yield (0,rxjs__WEBPACK_IMPORTED_MODULE_5__.firstValueFrom)(providerService.get$(organization.providerId, userId));
    if (!provider) {
        return true;
    }
    return provider.providerStatus !== _bitwarden_common_admin_console_enums__WEBPACK_IMPORTED_MODULE_2__.ProviderStatusType.Billable;
});


/***/ }),

/***/ "./src/app/billing/organizations/adjust-subscription.component.ts":
/*!************************************************************************!*\
  !*** ./src/app/billing/organizations/adjust-subscription.component.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AdjustSubscription: () => (/* binding */ AdjustSubscription)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/fesm2022/core.mjs");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/forms */ "../../node_modules/@angular/forms/fesm2022/forms.mjs");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/Subject.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js");
/* harmony import */ var _bitwarden_common_admin_console_abstractions_organization_organization_api_service_abstraction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bitwarden/common/admin-console/abstractions/organization/organization-api.service.abstraction */ "../../libs/common/src/admin-console/abstractions/organization/organization-api.service.abstraction.ts");
/* harmony import */ var _bitwarden_common_admin_console_abstractions_organization_organization_service_abstraction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction */ "../../libs/common/src/admin-console/abstractions/organization/organization.service.abstraction.ts");
/* harmony import */ var _bitwarden_common_admin_console_models_data_organization_data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bitwarden/common/admin-console/models/data/organization.data */ "../../libs/common/src/admin-console/models/data/organization.data.ts");
/* harmony import */ var _bitwarden_common_auth_abstractions_account_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bitwarden/common/auth/abstractions/account.service */ "../../libs/common/src/auth/abstractions/account.service.ts");
/* harmony import */ var _bitwarden_common_auth_services_account_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bitwarden/common/auth/services/account.service */ "../../libs/common/src/auth/services/account.service.ts");
/* harmony import */ var _bitwarden_common_billing_models_request_organization_subscription_update_request__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bitwarden/common/billing/models/request/organization-subscription-update.request */ "../../libs/common/src/billing/models/request/organization-subscription-update.request.ts");
/* harmony import */ var _bitwarden_common_platform_abstractions_i18n_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @bitwarden/common/platform/abstractions/i18n.service */ "../../libs/common/src/platform/abstractions/i18n.service.ts");
/* harmony import */ var _bitwarden_components__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @bitwarden/components */ "../../libs/components/src/toast/toast.service.ts");
/* harmony import */ var _libs_components_src_async_actions_form_button_directive__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../../../libs/components/src/async-actions/form-button.directive */ "../../libs/components/src/async-actions/form-button.directive.ts");
/* harmony import */ var _libs_components_src_async_actions_bit_submit_directive__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../../../libs/components/src/async-actions/bit-submit.directive */ "../../libs/components/src/async-actions/bit-submit.directive.ts");
/* harmony import */ var _libs_components_src_button_button_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../../../libs/components/src/button/button.component */ "../../libs/components/src/button/button.component.ts");
/* harmony import */ var _libs_components_src_checkbox_checkbox_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../../../libs/components/src/checkbox/checkbox.component */ "../../libs/components/src/checkbox/checkbox.component.ts");
/* harmony import */ var _libs_components_src_form_control_form_control_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../../../../libs/components/src/form-control/form-control.component */ "../../libs/components/src/form-control/form-control.component.ts");
/* harmony import */ var _libs_components_src_form_control_label_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../../../../libs/components/src/form-control/label.component */ "../../libs/components/src/form-control/label.component.ts");
/* harmony import */ var _libs_components_src_form_control_hint_component__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../../../../libs/components/src/form-control/hint.component */ "../../libs/components/src/form-control/hint.component.ts");
/* harmony import */ var _libs_components_src_input_input_directive__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../../../../libs/components/src/input/input.directive */ "../../libs/components/src/input/input.directive.ts");
/* harmony import */ var _libs_components_src_form_field_form_field_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../../../../libs/components/src/form-field/form-field.component */ "../../libs/components/src/form-field/form-field.component.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @angular/common */ "../../node_modules/@angular/common/fesm2022/common_module-Dx7dWex5.mjs");
/* harmony import */ var _libs_angular_src_platform_pipes_i18n_pipe__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../libs/angular/src/platform/pipes/i18n.pipe */ "../../libs/angular/src/platform/pipes/i18n.pipe.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
// FIXME: Update this file to be type safe and remove this and next line
// @ts-strict-ignore





























class AdjustSubscription {
    constructor(i18nService, organizationApiService, formBuilder, toastService, internalOrganizationService, accountService) {
        this.i18nService = i18nService;
        this.organizationApiService = organizationApiService;
        this.formBuilder = formBuilder;
        this.toastService = toastService;
        this.internalOrganizationService = internalOrganizationService;
        this.accountService = accountService;
        this.seatPrice = 0;
        this.interval = "year";
        this.onAdjusted = new _angular_core__WEBPACK_IMPORTED_MODULE_8__.EventEmitter();
        this.destroy$ = new rxjs__WEBPACK_IMPORTED_MODULE_9__.Subject();
        this.adjustSubscriptionForm = this.formBuilder.group({
            newSeatCount: [0, [_angular_forms__WEBPACK_IMPORTED_MODULE_10__.Validators.min(0)]],
            limitSubscription: [false],
            newMaxSeats: [0, [_angular_forms__WEBPACK_IMPORTED_MODULE_10__.Validators.min(0)]],
        });
        this.submit = () => __awaiter(this, void 0, void 0, function* () {
            this.adjustSubscriptionForm.markAllAsTouched();
            if (this.adjustSubscriptionForm.invalid) {
                return;
            }
            const request = new _bitwarden_common_billing_models_request_organization_subscription_update_request__WEBPACK_IMPORTED_MODULE_5__.OrganizationSubscriptionUpdateRequest(this.additionalSeatCount, this.adjustSubscriptionForm.value.newMaxSeats);
            const response = yield this.organizationApiService.updatePasswordManagerSeats(this.organizationId, request);
            const userId = yield (0,rxjs__WEBPACK_IMPORTED_MODULE_11__.firstValueFrom)((0,_bitwarden_common_auth_services_account_service__WEBPACK_IMPORTED_MODULE_4__.getUserId)(this.accountService.activeAccount$));
            const organization = yield (0,rxjs__WEBPACK_IMPORTED_MODULE_11__.firstValueFrom)(this.internalOrganizationService
                .organizations$(userId)
                .pipe((0,_bitwarden_common_admin_console_abstractions_organization_organization_service_abstraction__WEBPACK_IMPORTED_MODULE_1__.getOrganizationById)(this.organizationId)));
            const organizationData = new _bitwarden_common_admin_console_models_data_organization_data__WEBPACK_IMPORTED_MODULE_2__.OrganizationData(response, {
                isMember: organization.isMember,
                isProviderUser: organization.isProviderUser,
            });
            yield this.internalOrganizationService.upsert(organizationData, userId);
            this.toastService.showToast({
                variant: "success",
                title: null,
                message: this.i18nService.t("subscriptionUpdated"),
            });
            this.onAdjusted.emit();
        });
    }
    ngOnInit() {
        this.adjustSubscriptionForm.valueChanges.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_12__.takeUntil)(this.destroy$)).subscribe((value) => {
            const maxAutoscaleSeatsControl = this.adjustSubscriptionForm.controls.newMaxSeats;
            if (value.limitSubscription) {
                maxAutoscaleSeatsControl.setValidators([_angular_forms__WEBPACK_IMPORTED_MODULE_10__.Validators.min(value.newSeatCount)]);
                maxAutoscaleSeatsControl.enable({ emitEvent: false });
            }
            else {
                maxAutoscaleSeatsControl.disable({ emitEvent: false });
            }
        });
        this.adjustSubscriptionForm.patchValue({
            newSeatCount: this.currentSeatCount,
            newMaxSeats: this.maxAutoscaleSeats,
            limitSubscription: this.maxAutoscaleSeats != null,
        });
    }
    limitSubscriptionChanged() {
        if (!this.adjustSubscriptionForm.value.limitSubscription) {
            this.adjustSubscriptionForm.value.newMaxSeats = null;
        }
    }
    get additionalSeatCount() {
        return this.adjustSubscriptionForm.value.newSeatCount
            ? this.adjustSubscriptionForm.value.newSeatCount - this.currentSeatCount
            : 0;
    }
    get maxSeatTotal() {
        var _a;
        return Math.abs(((_a = this.adjustSubscriptionForm.value.newMaxSeats) !== null && _a !== void 0 ? _a : 0) * this.seatPrice);
    }
    get seatTotalCost() {
        return Math.abs(this.adjustSubscriptionForm.value.newSeatCount * this.seatPrice);
    }
    get limitSubscription() {
        return this.adjustSubscriptionForm.value.limitSubscription;
    }
    ngOnDestroy() {
        this.destroy$.next();
        this.destroy$.complete();
    }
}
AdjustSubscription.ɵfac = function AdjustSubscription_Factory(__ngFactoryType__) { return new (__ngFactoryType__ || AdjustSubscription)(_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_bitwarden_common_platform_abstractions_i18n_service__WEBPACK_IMPORTED_MODULE_6__.I18nService), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_bitwarden_common_admin_console_abstractions_organization_organization_api_service_abstraction__WEBPACK_IMPORTED_MODULE_0__.OrganizationApiServiceAbstraction), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_angular_forms__WEBPACK_IMPORTED_MODULE_10__.FormBuilder), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_bitwarden_components__WEBPACK_IMPORTED_MODULE_13__.ToastService), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_bitwarden_common_admin_console_abstractions_organization_organization_service_abstraction__WEBPACK_IMPORTED_MODULE_1__.InternalOrganizationServiceAbstraction), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_bitwarden_common_auth_abstractions_account_service__WEBPACK_IMPORTED_MODULE_3__.AccountService)); };
AdjustSubscription.ɵcmp = /*@__PURE__*/ _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdefineComponent"]({ type: AdjustSubscription, selectors: [["app-adjust-subscription"]], inputs: { organizationId: "organizationId", maxAutoscaleSeats: "maxAutoscaleSeats", currentSeatCount: "currentSeatCount", seatPrice: "seatPrice", interval: "interval" }, outputs: { onAdjusted: "onAdjusted" }, standalone: false, decls: 43, vars: 49, consts: [[3, "formGroup", "bitSubmit"], [1, "tw-grid", "tw-grid-cols-12", "tw-gap-4"], [1, "tw-col-span-8"], ["bitInput", "", "formControlName", "newSeatCount", "type", "number", "min", "0", "step", "1"], ["bitCheckbox", "", "formControlName", "limitSubscription", "type", "checkbox", 3, "change"], [1, "tw-grid", "tw-grid-cols-12", "tw-gap-4", "tw-mb-4", 3, "hidden"], ["bitInput", "", "formControlName", "newMaxSeats", "type", "number", "step", "1", 3, "min"], ["bitButton", "", "buttonType", "primary", "bitFormButton", "", "type", "submit"]], template: function AdjustSubscription_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "form", 0)(1, "div", 1)(2, "div", 2)(3, "bit-form-field")(4, "bit-label");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](6, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelement"](7, "input", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](8, "bit-hint")(9, "strong");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](10);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](11, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](12);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](13, "currency");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](14, "currency");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](15, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](16, "div")(17, "bit-form-control")(18, "input", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("change", function AdjustSubscription_Template_input_change_18_listener() { return ctx.limitSubscriptionChanged(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](19, "bit-label");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](20);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](21, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](22, "bit-hint");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](23);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](24, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](25, "div", 5)(26, "div", 2)(27, "bit-form-field")(28, "bit-label");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](29);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](30, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelement"](31, "input", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](32, "bit-hint")(33, "strong");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](34);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](35, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](36);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](37, "currency");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](38, "currency");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](39, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](40, "button", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](41);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](42, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("formGroup", ctx.adjustSubscriptionForm)("bitSubmit", ctx.submit);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](6, 19, "subscriptionSeats"));
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"]("", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](11, 21, "total"), ":");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate4"](" ", ctx.adjustSubscriptionForm.value.newSeatCount || 0, " \u00D7 ", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind2"](13, 23, ctx.seatPrice, "$"), " = ", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind2"](14, 26, ctx.seatTotalCost, "$"), " / ", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](15, 29, ctx.interval), "");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](8);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](21, 31, "limitSubscription"));
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](24, 33, "limitSubscriptionDesc"), "");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("hidden", !ctx.adjustSubscriptionForm.value.limitSubscription);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](30, 35, "maxSeatLimit"));
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("min", ctx.adjustSubscriptionForm.value.newSeatCount == null ? 1 : ctx.adjustSubscriptionForm.value.newSeatCount);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"]("", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](35, 37, "maxSeatCost"), ":");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate4"](" ", ctx.adjustSubscriptionForm.value.newMaxSeats || 0, " \u00D7 ", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind2"](37, 39, ctx.seatPrice, "$"), " = ", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind2"](38, 42, ctx.maxSeatTotal, "$"), " / ", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](39, 45, ctx.interval), "");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](42, 47, "save"), " ");
    } }, dependencies: [_angular_forms__WEBPACK_IMPORTED_MODULE_10__["ɵNgNoValidate"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.NumberValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.CheckboxControlValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.MinValidator, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.FormControlName, _libs_components_src_async_actions_form_button_directive__WEBPACK_IMPORTED_MODULE_14__.BitFormButtonDirective, _libs_components_src_async_actions_bit_submit_directive__WEBPACK_IMPORTED_MODULE_15__.BitSubmitDirective, _libs_components_src_button_button_component__WEBPACK_IMPORTED_MODULE_16__.ButtonComponent, _libs_components_src_checkbox_checkbox_component__WEBPACK_IMPORTED_MODULE_17__.CheckboxComponent, _libs_components_src_form_control_form_control_component__WEBPACK_IMPORTED_MODULE_18__.FormControlComponent, _libs_components_src_form_control_label_component__WEBPACK_IMPORTED_MODULE_19__.BitLabel, _libs_components_src_form_control_hint_component__WEBPACK_IMPORTED_MODULE_20__.BitHintComponent, _libs_components_src_input_input_directive__WEBPACK_IMPORTED_MODULE_21__.BitInputDirective, _libs_components_src_form_field_form_field_component__WEBPACK_IMPORTED_MODULE_22__.BitFormFieldComponent, _angular_common__WEBPACK_IMPORTED_MODULE_23__.CurrencyPipe, _libs_angular_src_platform_pipes_i18n_pipe__WEBPACK_IMPORTED_MODULE_7__.I18nPipe], encapsulation: 2 });


/***/ }),

/***/ "./src/app/billing/organizations/billing-sync-api-key.component.ts":
/*!*************************************************************************!*\
  !*** ./src/app/billing/organizations/billing-sync-api-key.component.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BillingSyncApiKeyComponent: () => (/* binding */ BillingSyncApiKeyComponent)
/* harmony export */ });
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/forms */ "../../node_modules/@angular/forms/fesm2022/forms.mjs");
/* harmony import */ var _bitwarden_common_abstractions_api_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bitwarden/common/abstractions/api.service */ "../../libs/common/src/abstractions/api.service.ts");
/* harmony import */ var _bitwarden_common_admin_console_abstractions_organization_organization_api_service_abstraction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bitwarden/common/admin-console/abstractions/organization/organization-api.service.abstraction */ "../../libs/common/src/admin-console/abstractions/organization/organization-api.service.abstraction.ts");
/* harmony import */ var _bitwarden_common_admin_console_enums__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bitwarden/common/admin-console/enums */ "../../libs/common/src/admin-console/enums/index.ts");
/* harmony import */ var _bitwarden_common_admin_console_models_request_organization_api_key_request__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bitwarden/common/admin-console/models/request/organization-api-key.request */ "../../libs/common/src/admin-console/models/request/organization-api-key.request.ts");
/* harmony import */ var _bitwarden_common_auth_abstractions_user_verification_user_verification_service_abstraction__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bitwarden/common/auth/abstractions/user-verification/user-verification.service.abstraction */ "../../libs/common/src/auth/abstractions/user-verification/user-verification.service.abstraction.ts");
/* harmony import */ var _bitwarden_common_platform_abstractions_i18n_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bitwarden/common/platform/abstractions/i18n.service */ "../../libs/common/src/platform/abstractions/i18n.service.ts");
/* harmony import */ var _bitwarden_common_platform_abstractions_log_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @bitwarden/common/platform/abstractions/log.service */ "../../libs/common/src/platform/abstractions/log.service.ts");
/* harmony import */ var _bitwarden_common_platform_abstractions_platform_utils_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @bitwarden/common/platform/abstractions/platform-utils.service */ "../../libs/common/src/platform/abstractions/platform-utils.service.ts");
/* harmony import */ var _bitwarden_components__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @bitwarden/components */ "../../node_modules/@angular/cdk/fesm2022/dialog.mjs");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/fesm2022/core.mjs");
/* harmony import */ var _bitwarden_components__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @bitwarden/components */ "../../libs/components/src/toast/toast.service.ts");
/* harmony import */ var _auth_shared_components_user_verification_user_verification_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../auth/shared/components/user-verification/user-verification.component */ "./src/app/auth/shared/components/user-verification/user-verification.component.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @angular/common */ "../../node_modules/@angular/common/fesm2022/common_module-Dx7dWex5.mjs");
/* harmony import */ var _libs_components_src_copy_click_copy_click_directive__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../../../libs/components/src/copy-click/copy-click.directive */ "../../libs/components/src/copy-click/copy-click.directive.ts");
/* harmony import */ var _libs_components_src_async_actions_form_button_directive__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../../../libs/components/src/async-actions/form-button.directive */ "../../libs/components/src/async-actions/form-button.directive.ts");
/* harmony import */ var _libs_components_src_async_actions_bit_submit_directive__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../../../libs/components/src/async-actions/bit-submit.directive */ "../../libs/components/src/async-actions/bit-submit.directive.ts");
/* harmony import */ var _libs_components_src_button_button_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../../../../libs/components/src/button/button.component */ "../../libs/components/src/button/button.component.ts");
/* harmony import */ var _libs_components_src_callout_callout_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../../../../libs/components/src/callout/callout.component */ "../../libs/components/src/callout/callout.component.ts");
/* harmony import */ var _libs_components_src_dialog_directives_dialog_close_directive__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../../../../libs/components/src/dialog/directives/dialog-close.directive */ "../../libs/components/src/dialog/directives/dialog-close.directive.ts");
/* harmony import */ var _libs_components_src_dialog_dialog_dialog_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../../../../libs/components/src/dialog/dialog/dialog.component */ "../../libs/components/src/dialog/dialog/dialog.component.ts");
/* harmony import */ var _libs_components_src_form_control_label_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../../../../libs/components/src/form-control/label.component */ "../../libs/components/src/form-control/label.component.ts");
/* harmony import */ var _libs_components_src_input_input_directive__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../../../../libs/components/src/input/input.directive */ "../../libs/components/src/input/input.directive.ts");
/* harmony import */ var _libs_components_src_form_field_form_field_component__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../../../../libs/components/src/form-field/form-field.component */ "../../libs/components/src/form-field/form-field.component.ts");
/* harmony import */ var _libs_components_src_form_field_suffix_directive__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../../../../../libs/components/src/form-field/suffix.directive */ "../../libs/components/src/form-field/suffix.directive.ts");
/* harmony import */ var _libs_components_src_icon_button_icon_button_component__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../../../../../libs/components/src/icon-button/icon-button.component */ "../../libs/components/src/icon-button/icon-button.component.ts");
/* harmony import */ var _libs_angular_src_platform_pipes_i18n_pipe__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../libs/angular/src/platform/pipes/i18n.pipe */ "../../libs/angular/src/platform/pipes/i18n.pipe.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


































function BillingSyncApiKeyComponent_app_user_verification_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelement"](0, "app-user-verification", 9);
} }
function BillingSyncApiKeyComponent_ng_container_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementStart"](1, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵpipe"](3, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementStart"](4, "bit-callout", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵpipe"](6, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵpipeBind1"](3, 2, "rotateBillingSyncTokenTitle"));
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵpipeBind1"](6, 4, "rotateBillingSyncTokenWarning"), " ");
} }
function BillingSyncApiKeyComponent_div_8_div_12_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementStart"](0, "div", 15)(1, "b", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵpipe"](3, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵpipe"](5, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵtextInterpolate1"]("", _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵpipeBind1"](3, 2, "lastSync"), ":");
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵpipeBind2"](5, 4, ctx_r0.lastSyncDate, "medium"), " ");
} }
function BillingSyncApiKeyComponent_div_8_div_13_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementStart"](0, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelement"](1, "i", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵpipe"](3, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵpipeBind2"](3, 1, ctx_r0.daysBetween === 1 ? "awaitingSyncSingular" : "awaitingSyncPlural", ctx_r0.daysBetween), " ");
} }
function BillingSyncApiKeyComponent_div_8_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementStart"](0, "div")(1, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵpipe"](3, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementStart"](4, "bit-form-field")(5, "bit-label");
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵtext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵpipe"](7, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelement"](8, "input", 11)(9, "button", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵpipe"](10, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵpipe"](11, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵtemplate"](12, BillingSyncApiKeyComponent_div_8_div_12_Template, 6, 7, "div", 13)(13, BillingSyncApiKeyComponent_div_8_div_13_Template, 4, 4, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵpipeBind1"](3, 8, "copyPasteBillingSync"));
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵpipeBind1"](7, 10, "billingSyncKey"));
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵproperty"]("value", ctx_r0.clientSecret);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵproperty"]("valueLabel", _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵpipeBind1"](10, 12, "billingSyncKey"))("appCopyClick", ctx_r0.clientSecret)("label", _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵpipeBind1"](11, 14, "copyValue"));
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵproperty"]("ngIf", ctx_r0.showLastSyncText);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵproperty"]("ngIf", ctx_r0.showAwaitingSyncText);
} }
function BillingSyncApiKeyComponent_button_10_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementStart"](0, "button", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵtextInterpolate1"](" ", ctx_r0.submitButtonText, " ");
} }
function BillingSyncApiKeyComponent_button_11_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementStart"](0, "button", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵpipe"](2, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵpipeBind1"](2, 1, "close"), " ");
} }
function BillingSyncApiKeyComponent_button_12_Template(rf, ctx) { if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementStart"](0, "button", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵlistener"]("click", function BillingSyncApiKeyComponent_button_12_Template_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵrestoreView"](_r2); const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵnextContext"](); return _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵresetView"](ctx_r0.cancelRotate()); });
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵpipe"](2, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵpipeBind1"](2, 1, "cancel"), " ");
} }
function BillingSyncApiKeyComponent_button_13_Template(rf, ctx) { if (rf & 1) {
    const _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementStart"](0, "button", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵlistener"]("click", function BillingSyncApiKeyComponent_button_13_Template_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵrestoreView"](_r3); const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵnextContext"](); return _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵresetView"](ctx_r0.rotateToken()); });
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵpipe"](2, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵpipeBind1"](2, 1, "rotateToken"), " ");
} }
class BillingSyncApiKeyComponent {
    constructor(data, userVerificationService, apiService, platformUtilsService, i18nService, organizationApiService, logService, toastService) {
        this.data = data;
        this.userVerificationService = userVerificationService;
        this.apiService = apiService;
        this.platformUtilsService = platformUtilsService;
        this.i18nService = i18nService;
        this.organizationApiService = organizationApiService;
        this.logService = logService;
        this.toastService = toastService;
        this.formGroup = new _angular_forms__WEBPACK_IMPORTED_MODULE_11__.FormGroup({
            verification: new _angular_forms__WEBPACK_IMPORTED_MODULE_11__.FormControl(null, _angular_forms__WEBPACK_IMPORTED_MODULE_11__.Validators.required),
        });
        this.submit = () => __awaiter(this, void 0, void 0, function* () {
            try {
                const request = this.userVerificationService
                    .buildRequest(this.formGroup.value.verification, _bitwarden_common_admin_console_models_request_organization_api_key_request__WEBPACK_IMPORTED_MODULE_3__.OrganizationApiKeyRequest)
                    .then((request) => {
                    request.type = _bitwarden_common_admin_console_enums__WEBPACK_IMPORTED_MODULE_2__.OrganizationApiKeyType.BillingSync;
                    return request;
                });
                if (this.showRotateScreen) {
                    const response = yield request.then((request) => {
                        return this.organizationApiService.rotateApiKey(this.organizationId, request);
                    });
                    yield this.load(response);
                    this.showRotateScreen = false;
                    this.toastService.showToast({
                        variant: "success",
                        title: null,
                        message: this.i18nService.t("billingSyncApiKeyRotated"),
                    });
                }
                else {
                    const response = yield request.then((request) => {
                        return this.organizationApiService.getOrCreateApiKey(this.organizationId, request);
                    });
                    yield this.load(response);
                }
            }
            catch (e) {
                this.logService.error(e);
                throw e;
            }
        });
        this.organizationId = data.organizationId;
        this.hasBillingToken = data.hasBillingToken;
    }
    copy() {
        this.platformUtilsService.copyToClipboard(this.clientSecret);
    }
    load(response) {
        return __awaiter(this, void 0, void 0, function* () {
            this.clientSecret = response.apiKey;
            this.keyRevisionDate = response.revisionDate;
            this.hasBillingToken = true;
            const syncStatus = yield this.apiService.getSponsorshipSyncStatus(this.organizationId);
            this.lastSyncDate = syncStatus.lastSyncDate;
        });
    }
    cancelRotate() {
        this.showRotateScreen = false;
    }
    rotateToken() {
        this.showRotateScreen = true;
    }
    dayDiff(date1, date2) {
        const diffTime = Math.abs(date2.getTime() - date1.getTime());
        return Math.round(diffTime / (1000 * 60 * 60 * 24));
    }
    get submitButtonText() {
        if (this.showRotateScreen) {
            return this.i18nService.t("rotateToken");
        }
        return this.i18nService.t(this.hasBillingToken ? "continue" : "generateToken");
    }
    get showLastSyncText() {
        // If the keyRevisionDate is later than the lastSyncDate we need to show
        // a warning that they need to put the billing sync key in their self hosted install
        return this.lastSyncDate && this.lastSyncDate > this.keyRevisionDate;
    }
    get showAwaitingSyncText() {
        return this.lastSyncDate && this.lastSyncDate <= this.keyRevisionDate;
    }
    get daysBetween() {
        return this.dayDiff(this.keyRevisionDate, new Date());
    }
    static open(dialogService, data) {
        return dialogService.open(BillingSyncApiKeyComponent, { data });
    }
}
BillingSyncApiKeyComponent.ɵfac = function BillingSyncApiKeyComponent_Factory(__ngFactoryType__) { return new (__ngFactoryType__ || BillingSyncApiKeyComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵdirectiveInject"](_bitwarden_components__WEBPACK_IMPORTED_MODULE_12__.DIALOG_DATA), _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵdirectiveInject"](_bitwarden_common_auth_abstractions_user_verification_user_verification_service_abstraction__WEBPACK_IMPORTED_MODULE_4__.UserVerificationService), _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵdirectiveInject"](_bitwarden_common_abstractions_api_service__WEBPACK_IMPORTED_MODULE_0__.ApiService), _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵdirectiveInject"](_bitwarden_common_platform_abstractions_platform_utils_service__WEBPACK_IMPORTED_MODULE_7__.PlatformUtilsService), _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵdirectiveInject"](_bitwarden_common_platform_abstractions_i18n_service__WEBPACK_IMPORTED_MODULE_5__.I18nService), _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵdirectiveInject"](_bitwarden_common_admin_console_abstractions_organization_organization_api_service_abstraction__WEBPACK_IMPORTED_MODULE_1__.OrganizationApiServiceAbstraction), _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵdirectiveInject"](_bitwarden_common_platform_abstractions_log_service__WEBPACK_IMPORTED_MODULE_6__.LogService), _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵdirectiveInject"](_bitwarden_components__WEBPACK_IMPORTED_MODULE_13__.ToastService)); };
BillingSyncApiKeyComponent.ɵcmp = /*@__PURE__*/ _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵdefineComponent"]({ type: BillingSyncApiKeyComponent, selectors: [["ng-component"]], standalone: false, decls: 14, vars: 12, consts: [[3, "formGroup", "bitSubmit"], ["bitDialogTitle", ""], ["bitDialogContent", ""], ["formControlName", "verification", 4, "ngIf"], [4, "ngIf"], ["bitDialogFooter", ""], ["type", "submit", "bitButton", "", "bitFormButton", "", "buttonType", "primary", 4, "ngIf"], ["bitButton", "", "bitDialogClose", "", "type", "button", 4, "ngIf"], ["bitButton", "", "type", "button", 3, "click", 4, "ngIf"], ["formControlName", "verification"], ["type", "warning"], ["bitInput", "", "id", "clientSecret", "type", "text", "disabled", "", 1, "tw-font-mono", 3, "value"], ["bitIconButton", "bwi-clone", "bitSuffix", "", "type", "button", "showToast", "", 3, "valueLabel", "appCopyClick", "label"], ["class", "tw-mt-2 tw-text-sm tw-text-muted", 4, "ngIf"], ["class", "tw-mt-2 tw-text-sm tw-text-danger", 4, "ngIf"], [1, "tw-mt-2", "tw-text-sm", "tw-text-muted"], [1, "tw-font-semibold"], [1, "tw-mt-2", "tw-text-sm", "tw-text-danger"], [1, "bwi", "bwi-error"], ["type", "submit", "bitButton", "", "bitFormButton", "", "buttonType", "primary"], ["bitButton", "", "bitDialogClose", "", "type", "button"], ["bitButton", "", "type", "button", 3, "click"]], template: function BillingSyncApiKeyComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementStart"](0, "form", 0)(1, "bit-dialog")(2, "span", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵtext"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵpipe"](4, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementStart"](5, "div", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵtemplate"](6, BillingSyncApiKeyComponent_app_user_verification_6_Template, 1, 0, "app-user-verification", 3)(7, BillingSyncApiKeyComponent_ng_container_7_Template, 7, 6, "ng-container", 4)(8, BillingSyncApiKeyComponent_div_8_Template, 14, 16, "div", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementContainerStart"](9, 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵtemplate"](10, BillingSyncApiKeyComponent_button_10_Template, 2, 1, "button", 6)(11, BillingSyncApiKeyComponent_button_11_Template, 3, 3, "button", 7)(12, BillingSyncApiKeyComponent_button_12_Template, 3, 3, "button", 8)(13, BillingSyncApiKeyComponent_button_13_Template, 3, 3, "button", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementContainerEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵelementEnd"]()();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵproperty"]("formGroup", ctx.formGroup)("bitSubmit", ctx.submit);
        _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵpipeBind1"](4, 10, ctx.hasBillingToken ? "viewBillingToken" : "generateBillingToken"), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵproperty"]("ngIf", !ctx.clientSecret);
        _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵproperty"]("ngIf", ctx.clientSecret && ctx.showRotateScreen);
        _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵproperty"]("ngIf", ctx.clientSecret && !ctx.showRotateScreen);
        _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵproperty"]("ngIf", !ctx.clientSecret || ctx.showRotateScreen);
        _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵproperty"]("ngIf", !ctx.showRotateScreen);
        _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵproperty"]("ngIf", ctx.showRotateScreen);
        _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_10__["ɵɵproperty"]("ngIf", ctx.clientSecret && !ctx.showRotateScreen);
    } }, dependencies: [_auth_shared_components_user_verification_user_verification_component__WEBPACK_IMPORTED_MODULE_8__.UserVerificationComponent, _angular_common__WEBPACK_IMPORTED_MODULE_14__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_11__["ɵNgNoValidate"], _angular_forms__WEBPACK_IMPORTED_MODULE_11__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_11__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_11__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_11__.FormControlName, _libs_components_src_copy_click_copy_click_directive__WEBPACK_IMPORTED_MODULE_15__.CopyClickDirective, _libs_components_src_async_actions_form_button_directive__WEBPACK_IMPORTED_MODULE_16__.BitFormButtonDirective, _libs_components_src_async_actions_bit_submit_directive__WEBPACK_IMPORTED_MODULE_17__.BitSubmitDirective, _libs_components_src_button_button_component__WEBPACK_IMPORTED_MODULE_18__.ButtonComponent, _libs_components_src_callout_callout_component__WEBPACK_IMPORTED_MODULE_19__.CalloutComponent, _libs_components_src_dialog_directives_dialog_close_directive__WEBPACK_IMPORTED_MODULE_20__.DialogCloseDirective, _libs_components_src_dialog_dialog_dialog_component__WEBPACK_IMPORTED_MODULE_21__.DialogComponent, _libs_components_src_form_control_label_component__WEBPACK_IMPORTED_MODULE_22__.BitLabel, _libs_components_src_input_input_directive__WEBPACK_IMPORTED_MODULE_23__.BitInputDirective, _libs_components_src_form_field_form_field_component__WEBPACK_IMPORTED_MODULE_24__.BitFormFieldComponent, _libs_components_src_form_field_suffix_directive__WEBPACK_IMPORTED_MODULE_25__.BitSuffixDirective, _libs_components_src_icon_button_icon_button_component__WEBPACK_IMPORTED_MODULE_26__.BitIconButtonComponent, _angular_common__WEBPACK_IMPORTED_MODULE_14__.DatePipe, _libs_angular_src_platform_pipes_i18n_pipe__WEBPACK_IMPORTED_MODULE_9__.I18nPipe], encapsulation: 2 });


/***/ }),

/***/ "./src/app/billing/organizations/billing-sync-key.component.ts":
/*!*********************************************************************!*\
  !*** ./src/app/billing/organizations/billing-sync-key.component.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BillingSyncKeyComponent: () => (/* binding */ BillingSyncKeyComponent)
/* harmony export */ });
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/forms */ "../../node_modules/@angular/forms/fesm2022/forms.mjs");
/* harmony import */ var _bitwarden_common_abstractions_api_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bitwarden/common/abstractions/api.service */ "../../libs/common/src/abstractions/api.service.ts");
/* harmony import */ var _bitwarden_common_admin_console_enums__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bitwarden/common/admin-console/enums */ "../../libs/common/src/admin-console/enums/index.ts");
/* harmony import */ var _bitwarden_common_admin_console_models_request_organization_connection_request__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bitwarden/common/admin-console/models/request/organization-connection.request */ "../../libs/common/src/admin-console/models/request/organization-connection.request.ts");
/* harmony import */ var _bitwarden_common_billing_models_api_billing_sync_config_api__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bitwarden/common/billing/models/api/billing-sync-config.api */ "../../libs/common/src/billing/models/api/billing-sync-config.api.ts");
/* harmony import */ var _bitwarden_common_billing_models_request_billing_sync_config_request__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bitwarden/common/billing/models/request/billing-sync-config.request */ "../../libs/common/src/billing/models/request/billing-sync-config.request.ts");
/* harmony import */ var _bitwarden_common_platform_abstractions_log_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bitwarden/common/platform/abstractions/log.service */ "../../libs/common/src/platform/abstractions/log.service.ts");
/* harmony import */ var _bitwarden_components__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @bitwarden/components */ "../../node_modules/@angular/cdk/fesm2022/dialog.mjs");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/fesm2022/core.mjs");
/* harmony import */ var _bitwarden_components__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @bitwarden/components */ "../../libs/components/src/dialog/dialog.service.ts");
/* harmony import */ var _libs_components_src_input_autofocus_directive__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../../libs/components/src/input/autofocus.directive */ "../../libs/components/src/input/autofocus.directive.ts");
/* harmony import */ var _libs_angular_src_directives_input_verbatim_directive__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../libs/angular/src/directives/input-verbatim.directive */ "../../libs/angular/src/directives/input-verbatim.directive.ts");
/* harmony import */ var _libs_components_src_async_actions_bit_action_directive__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../../libs/components/src/async-actions/bit-action.directive */ "../../libs/components/src/async-actions/bit-action.directive.ts");
/* harmony import */ var _libs_components_src_async_actions_form_button_directive__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../../../libs/components/src/async-actions/form-button.directive */ "../../libs/components/src/async-actions/form-button.directive.ts");
/* harmony import */ var _libs_components_src_async_actions_bit_submit_directive__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../../../libs/components/src/async-actions/bit-submit.directive */ "../../libs/components/src/async-actions/bit-submit.directive.ts");
/* harmony import */ var _libs_components_src_button_button_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../../../libs/components/src/button/button.component */ "../../libs/components/src/button/button.component.ts");
/* harmony import */ var _libs_components_src_dialog_directives_dialog_close_directive__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../../../libs/components/src/dialog/directives/dialog-close.directive */ "../../libs/components/src/dialog/directives/dialog-close.directive.ts");
/* harmony import */ var _libs_components_src_dialog_dialog_dialog_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../../../../libs/components/src/dialog/dialog/dialog.component */ "../../libs/components/src/dialog/dialog/dialog.component.ts");
/* harmony import */ var _libs_components_src_form_control_label_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../../../../libs/components/src/form-control/label.component */ "../../libs/components/src/form-control/label.component.ts");
/* harmony import */ var _libs_components_src_input_input_directive__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../../../../libs/components/src/input/input.directive */ "../../libs/components/src/input/input.directive.ts");
/* harmony import */ var _libs_components_src_form_field_form_field_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../../../../libs/components/src/form-field/form-field.component */ "../../libs/components/src/form-field/form-field.component.ts");
/* harmony import */ var _libs_components_src_icon_button_icon_button_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../../../../libs/components/src/icon-button/icon-button.component */ "../../libs/components/src/icon-button/icon-button.component.ts");
/* harmony import */ var _libs_angular_src_platform_pipes_i18n_pipe__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../libs/angular/src/platform/pipes/i18n.pipe */ "../../libs/angular/src/platform/pipes/i18n.pipe.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


























class BillingSyncKeyComponent {
    constructor(dialogRef, data, apiService, logService) {
        this.dialogRef = dialogRef;
        this.data = data;
        this.apiService = apiService;
        this.logService = logService;
        this.submit = () => __awaiter(this, void 0, void 0, function* () {
            var _a;
            try {
                const request = new _bitwarden_common_admin_console_models_request_organization_connection_request__WEBPACK_IMPORTED_MODULE_2__.OrganizationConnectionRequest(this.entityId, _bitwarden_common_admin_console_enums__WEBPACK_IMPORTED_MODULE_1__.OrganizationConnectionType.CloudBillingSync, true, new _bitwarden_common_billing_models_request_billing_sync_config_request__WEBPACK_IMPORTED_MODULE_4__.BillingSyncConfigRequest(this.formGroup.value.billingSyncKey));
                const response = this.existingConnectionId == null
                    ? yield this.apiService.createOrganizationConnection(request, _bitwarden_common_billing_models_api_billing_sync_config_api__WEBPACK_IMPORTED_MODULE_3__.BillingSyncConfigApi)
                    : yield this.apiService.updateOrganizationConnection(request, _bitwarden_common_billing_models_api_billing_sync_config_api__WEBPACK_IMPORTED_MODULE_3__.BillingSyncConfigApi, this.existingConnectionId);
                this.existingConnectionId = response === null || response === void 0 ? void 0 : response.id;
                this.billingSyncKey = (_a = response === null || response === void 0 ? void 0 : response.config) === null || _a === void 0 ? void 0 : _a.billingSyncKey;
                this.setParentConnection(response);
                this.dialogRef.close();
            }
            catch (e) {
                this.logService.error(e);
            }
        });
        this.deleteConnection = () => __awaiter(this, void 0, void 0, function* () {
            yield this.apiService.deleteOrganizationConnection(this.existingConnectionId);
            this.setParentConnection(null);
            this.dialogRef.close();
        });
        this.entityId = data.entityId;
        this.existingConnectionId = data.existingConnectionId;
        this.billingSyncKey = data.billingSyncKey;
        this.setParentConnection = data.setParentConnection;
        this.formGroup = new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormGroup({
            billingSyncKey: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(this.billingSyncKey, _angular_forms__WEBPACK_IMPORTED_MODULE_8__.Validators.required),
        });
    }
    static open(dialogService, data) {
        return dialogService.open(BillingSyncKeyComponent, { data });
    }
}
BillingSyncKeyComponent.ɵfac = function BillingSyncKeyComponent_Factory(__ngFactoryType__) { return new (__ngFactoryType__ || BillingSyncKeyComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdirectiveInject"](_bitwarden_components__WEBPACK_IMPORTED_MODULE_10__.DialogRef), _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdirectiveInject"](_bitwarden_components__WEBPACK_IMPORTED_MODULE_11__.DIALOG_DATA), _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdirectiveInject"](_bitwarden_common_abstractions_api_service__WEBPACK_IMPORTED_MODULE_0__.ApiService), _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdirectiveInject"](_bitwarden_common_platform_abstractions_log_service__WEBPACK_IMPORTED_MODULE_5__.LogService)); };
BillingSyncKeyComponent.ɵcmp = /*@__PURE__*/ _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdefineComponent"]({ type: BillingSyncKeyComponent, selectors: [["ng-component"]], standalone: false, decls: 23, vars: 21, consts: [[3, "formGroup", "bitSubmit"], ["bitDialogTitle", ""], ["bitDialogContent", ""], ["bitInput", "", "id", "billingSyncKey", "type", "text", "formControlName", "billingSyncKey", "appAutofocus", "", "appInputVerbatim", ""], ["bitDialogFooter", ""], ["type", "submit", "bitButton", "", "bitFormButton", "", "buttonType", "primary"], ["bitButton", "", "bitDialogClose", "", "type", "button"], ["type", "button", "buttonType", "danger", "bitIconButton", "bwi-trash", "bitFormButton", "", 1, "tw-ml-auto", 3, "bitAction", "label"]], template: function BillingSyncKeyComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](0, "form", 0)(1, "bit-dialog")(2, "span", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](4, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](5, "div", 2)(6, "p");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](8, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](9, "bit-form-field")(10, "bit-label");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](11);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](12, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelement"](13, "input", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementContainerStart"](14, 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](15, "button", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](16);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](17, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](18, "button", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](19);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](20, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelement"](21, "button", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](22, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementContainerEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]()();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("formGroup", ctx.formGroup)("bitSubmit", ctx.submit);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind1"](4, 9, "manageBillingTokenSync"), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind1"](8, 11, "billingSyncKeyDesc"));
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind1"](12, 13, "billingSyncKey"), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind1"](17, 15, "save"), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind1"](20, 17, "cancel"), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpropertyInterpolate"]("label", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind1"](22, 19, "delete"));
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("bitAction", ctx.deleteConnection);
    } }, dependencies: [_angular_forms__WEBPACK_IMPORTED_MODULE_8__["ɵNgNoValidate"], _angular_forms__WEBPACK_IMPORTED_MODULE_8__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_8__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_8__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControlName, _libs_components_src_input_autofocus_directive__WEBPACK_IMPORTED_MODULE_12__.AutofocusDirective, _libs_angular_src_directives_input_verbatim_directive__WEBPACK_IMPORTED_MODULE_6__.InputVerbatimDirective, _libs_components_src_async_actions_bit_action_directive__WEBPACK_IMPORTED_MODULE_13__.BitActionDirective, _libs_components_src_async_actions_form_button_directive__WEBPACK_IMPORTED_MODULE_14__.BitFormButtonDirective, _libs_components_src_async_actions_bit_submit_directive__WEBPACK_IMPORTED_MODULE_15__.BitSubmitDirective, _libs_components_src_button_button_component__WEBPACK_IMPORTED_MODULE_16__.ButtonComponent, _libs_components_src_dialog_directives_dialog_close_directive__WEBPACK_IMPORTED_MODULE_17__.DialogCloseDirective, _libs_components_src_dialog_dialog_dialog_component__WEBPACK_IMPORTED_MODULE_18__.DialogComponent, _libs_components_src_form_control_label_component__WEBPACK_IMPORTED_MODULE_19__.BitLabel, _libs_components_src_input_input_directive__WEBPACK_IMPORTED_MODULE_20__.BitInputDirective, _libs_components_src_form_field_form_field_component__WEBPACK_IMPORTED_MODULE_21__.BitFormFieldComponent, _libs_components_src_icon_button_icon_button_component__WEBPACK_IMPORTED_MODULE_22__.BitIconButtonComponent, _libs_angular_src_platform_pipes_i18n_pipe__WEBPACK_IMPORTED_MODULE_7__.I18nPipe], encapsulation: 2 });


/***/ }),

/***/ "./src/app/billing/organizations/change-plan.component.ts":
/*!****************************************************************!*\
  !*** ./src/app/billing/organizations/change-plan.component.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ChangePlanComponent: () => (/* binding */ ChangePlanComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/fesm2022/core.mjs");
/* harmony import */ var _bitwarden_common_billing_enums__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bitwarden/common/billing/enums */ "../../libs/common/src/billing/enums/index.ts");
/* harmony import */ var _bitwarden_common_billing_models_response_plan_response__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bitwarden/common/billing/models/response/plan.response */ "../../libs/common/src/billing/models/response/plan.response.ts");
/* harmony import */ var _bitwarden_common_platform_abstractions_log_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bitwarden/common/platform/abstractions/log.service */ "../../libs/common/src/platform/abstractions/log.service.ts");
/* harmony import */ var _libs_components_src_icon_button_icon_button_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../libs/components/src/icon-button/icon-button.component */ "../../libs/components/src/icon-button/icon-button.component.ts");
/* harmony import */ var _libs_components_src_typography_typography_directive__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../libs/components/src/typography/typography.directive */ "../../libs/components/src/typography/typography.directive.ts");
/* harmony import */ var _organization_plans_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./organization-plans.component */ "./src/app/billing/organizations/organization-plans.component.ts");
/* harmony import */ var _libs_angular_src_platform_pipes_i18n_pipe__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../libs/angular/src/platform/pipes/i18n.pipe */ "../../libs/angular/src/platform/pipes/i18n.pipe.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
// FIXME: Update this file to be type safe and remove this and next line
// @ts-strict-ignore










class ChangePlanComponent {
    constructor(logService) {
        this.logService = logService;
        this.onChanged = new _angular_core__WEBPACK_IMPORTED_MODULE_5__.EventEmitter();
        this.onCanceled = new _angular_core__WEBPACK_IMPORTED_MODULE_5__.EventEmitter();
    }
    submit() {
        return __awaiter(this, void 0, void 0, function* () {
            try {
                this.onChanged.emit();
            }
            catch (e) {
                this.logService.error(e);
            }
        });
    }
    cancel() {
        this.onCanceled.emit();
    }
}
ChangePlanComponent.ɵfac = function ChangePlanComponent_Factory(__ngFactoryType__) { return new (__ngFactoryType__ || ChangePlanComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](_bitwarden_common_platform_abstractions_log_service__WEBPACK_IMPORTED_MODULE_2__.LogService)); };
ChangePlanComponent.ɵcmp = /*@__PURE__*/ _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdefineComponent"]({ type: ChangePlanComponent, selectors: [["app-change-plan"]], inputs: { organizationId: "organizationId", currentPlan: "currentPlan", preSelectedProductTier: "preSelectedProductTier" }, outputs: { onChanged: "onChanged", onCanceled: "onCanceled" }, standalone: false, decls: 11, vars: 14, consts: [[1, "tw-relative", "tw-flex", "tw-flex-col", "tw-min-w-0", "tw-rounded", "tw-border", "tw-border-solid", "tw-border-secondary-300"], [1, "tw-flex-auto", "tw-p-5"], ["bitIconButton", "bwi-close", "buttonType", "main", "type", "button", "size", "small", 1, "tw-float-right", 3, "click", "label"], ["bitTypography", "h2"], ["bitTypography", "body1", 1, "tw-mb-0"], [3, "onCanceled", "showFree", "showCancel", "organizationId", "currentPlan", "preSelectedProductTier"]], template: function ChangePlanComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 0)(1, "div", 1)(2, "button", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](3, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function ChangePlanComponent_Template_button_click_2_listener() { return ctx.cancel(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](4, "h2", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](6, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](7, "p", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](8);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](9, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](10, "app-organization-plans", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("onCanceled", function ChangePlanComponent_Template_app_organization_plans_onCanceled_10_listener() { return ctx.cancel(); });
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpropertyInterpolate"]("label", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](3, 8, "cancel"));
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](6, 10, "changeBillingPlan"));
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](9, 12, "changeBillingPlanUpgrade"));
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("showFree", false)("showCancel", true)("organizationId", ctx.organizationId)("currentPlan", ctx.currentPlan)("preSelectedProductTier", ctx.preSelectedProductTier);
    } }, dependencies: [_libs_components_src_icon_button_icon_button_component__WEBPACK_IMPORTED_MODULE_6__.BitIconButtonComponent, _libs_components_src_typography_typography_directive__WEBPACK_IMPORTED_MODULE_7__.TypographyDirective, _organization_plans_component__WEBPACK_IMPORTED_MODULE_3__.OrganizationPlansComponent, _libs_angular_src_platform_pipes_i18n_pipe__WEBPACK_IMPORTED_MODULE_4__.I18nPipe], encapsulation: 2 });


/***/ }),

/***/ "./src/app/billing/organizations/download-license.component.ts":
/*!*********************************************************************!*\
  !*** ./src/app/billing/organizations/download-license.component.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DownloadLicenceDialogComponent: () => (/* binding */ DownloadLicenceDialogComponent),
/* harmony export */   DownloadLicenseDialogResult: () => (/* binding */ DownloadLicenseDialogResult)
/* harmony export */ });
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/forms */ "../../node_modules/@angular/forms/fesm2022/forms.mjs");
/* harmony import */ var _bitwarden_common_admin_console_abstractions_organization_organization_api_service_abstraction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bitwarden/common/admin-console/abstractions/organization/organization-api.service.abstraction */ "../../libs/common/src/admin-console/abstractions/organization/organization-api.service.abstraction.ts");
/* harmony import */ var _bitwarden_common_platform_abstractions_file_download_file_download_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bitwarden/common/platform/abstractions/file-download/file-download.service */ "../../libs/common/src/platform/abstractions/file-download/file-download.service.ts");
/* harmony import */ var _bitwarden_components__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bitwarden/components */ "../../node_modules/@angular/cdk/fesm2022/dialog.mjs");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/fesm2022/core.mjs");
/* harmony import */ var _bitwarden_components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @bitwarden/components */ "../../libs/components/src/dialog/dialog.service.ts");
/* harmony import */ var _libs_components_src_a11y_a11y_title_directive__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../libs/components/src/a11y/a11y-title.directive */ "../../libs/components/src/a11y/a11y-title.directive.ts");
/* harmony import */ var _libs_components_src_async_actions_bit_action_directive__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../libs/components/src/async-actions/bit-action.directive */ "../../libs/components/src/async-actions/bit-action.directive.ts");
/* harmony import */ var _libs_components_src_async_actions_form_button_directive__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../../libs/components/src/async-actions/form-button.directive */ "../../libs/components/src/async-actions/form-button.directive.ts");
/* harmony import */ var _libs_components_src_async_actions_bit_submit_directive__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../../libs/components/src/async-actions/bit-submit.directive */ "../../libs/components/src/async-actions/bit-submit.directive.ts");
/* harmony import */ var _libs_components_src_button_button_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../../libs/components/src/button/button.component */ "../../libs/components/src/button/button.component.ts");
/* harmony import */ var _libs_components_src_dialog_dialog_dialog_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../../libs/components/src/dialog/dialog/dialog.component */ "../../libs/components/src/dialog/dialog/dialog.component.ts");
/* harmony import */ var _libs_components_src_form_control_label_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../../libs/components/src/form-control/label.component */ "../../libs/components/src/form-control/label.component.ts");
/* harmony import */ var _libs_components_src_input_input_directive__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../../../libs/components/src/input/input.directive */ "../../libs/components/src/input/input.directive.ts");
/* harmony import */ var _libs_components_src_form_field_form_field_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../../../libs/components/src/form-field/form-field.component */ "../../libs/components/src/form-field/form-field.component.ts");
/* harmony import */ var _libs_components_src_link_link_directive__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../../../libs/components/src/link/link.directive */ "../../libs/components/src/link/link.directive.ts");
/* harmony import */ var _libs_angular_src_platform_pipes_i18n_pipe__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../../libs/angular/src/platform/pipes/i18n.pipe */ "../../libs/angular/src/platform/pipes/i18n.pipe.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};




















// FIXME: update to use a const object instead of a typescript enum
// eslint-disable-next-line @bitwarden/platform/no-enums
var DownloadLicenseDialogResult;
(function (DownloadLicenseDialogResult) {
    DownloadLicenseDialogResult["Cancelled"] = "cancelled";
    DownloadLicenseDialogResult["Downloaded"] = "downloaded";
})(DownloadLicenseDialogResult || (DownloadLicenseDialogResult = {}));
class DownloadLicenceDialogComponent {
    constructor(data, dialogRef, fileDownloadService, organizationApiService, formBuilder) {
        this.data = data;
        this.dialogRef = dialogRef;
        this.fileDownloadService = fileDownloadService;
        this.organizationApiService = organizationApiService;
        this.formBuilder = formBuilder;
        this.licenseForm = this.formBuilder.group({
            installationId: ["", [_angular_forms__WEBPACK_IMPORTED_MODULE_3__.Validators.required]],
        });
        this.submit = () => __awaiter(this, void 0, void 0, function* () {
            this.licenseForm.markAllAsTouched();
            const installationId = this.licenseForm.get("installationId").value;
            if (installationId == null || installationId === "") {
                return;
            }
            const license = yield this.organizationApiService.getLicense(this.data.organizationId, installationId);
            const licenseString = JSON.stringify(license, null, 2);
            this.fileDownloadService.download({
                fileName: "bitwarden_organization_license.json",
                blobData: licenseString,
            });
            this.dialogRef.close(DownloadLicenseDialogResult.Downloaded);
        });
        this.cancel = () => {
            this.dialogRef.close(DownloadLicenseDialogResult.Cancelled);
        };
    }
    /**
     * Strongly typed helper to open a DownloadLicenceDialogComponent
     * @param dialogService Instance of the dialog service that will be used to open the dialog
     * @param config Configuration for the dialog
     */
    static open(dialogService, config) {
        return dialogService.open(DownloadLicenceDialogComponent, config);
    }
}
DownloadLicenceDialogComponent.ɵfac = function DownloadLicenceDialogComponent_Factory(__ngFactoryType__) { return new (__ngFactoryType__ || DownloadLicenceDialogComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_bitwarden_components__WEBPACK_IMPORTED_MODULE_5__.DIALOG_DATA), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_bitwarden_components__WEBPACK_IMPORTED_MODULE_6__.DialogRef), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_bitwarden_common_platform_abstractions_file_download_file_download_service__WEBPACK_IMPORTED_MODULE_1__.FileDownloadService), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_bitwarden_common_admin_console_abstractions_organization_organization_api_service_abstraction__WEBPACK_IMPORTED_MODULE_0__.OrganizationApiServiceAbstraction), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormBuilder)); };
DownloadLicenceDialogComponent.ɵcmp = /*@__PURE__*/ _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefineComponent"]({ type: DownloadLicenceDialogComponent, selectors: [["ng-component"]], standalone: false, decls: 23, vars: 18, consts: [[3, "formGroup", "bitSubmit"], ["bitDialogTitle", ""], ["bitDialogContent", ""], [1, "tw-grid", "tw-grid-cols-12", "tw-gap-4"], [1, "tw-col-span-8"], ["bitLink", "", "target", "_blank", "rel", "noreferrer", "href", "https://bitwarden.com/help/licensing-on-premise/#organization-account-sharing", "slot", "end", 1, "tw-ml-auto", 3, "appA11yTitle"], ["aria-hidden", "true", 1, "bwi", "bwi-question-circle"], ["type", "text", "bitInput", "", "formControlName", "installationId"], ["bitDialogFooter", ""], ["bitButton", "", "bitFormButton", "", "buttonType", "primary", "type", "submit"], ["bitButton", "", "bitFormButton", "", "buttonType", "secondary", "type", "button", 3, "bitAction"]], template: function DownloadLicenceDialogComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "form", 0)(1, "bit-dialog")(2, "span", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](4, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](5, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](6, "div", 3)(7, "div", 4)(8, "bit-form-field")(9, "bit-label");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](10);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](11, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](12, "a", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](13, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](14, "i", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](15, "input", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](16, 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](17, "button", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](18);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](19, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](20, "button", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](21);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](22, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("formGroup", ctx.licenseForm)("bitSubmit", ctx.submit);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](4, 8, "downloadLicense"));
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"]("", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](11, 10, "enterInstallationId"), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpropertyInterpolate"]("appA11yTitle", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](13, 12, "learnMore"));
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](19, 14, "submit"), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("bitAction", ctx.cancel);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](22, 16, "cancel"), " ");
    } }, dependencies: [_angular_forms__WEBPACK_IMPORTED_MODULE_3__["ɵNgNoValidate"], _angular_forms__WEBPACK_IMPORTED_MODULE_3__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_3__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_3__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControlName, _libs_components_src_a11y_a11y_title_directive__WEBPACK_IMPORTED_MODULE_7__.A11yTitleDirective, _libs_components_src_async_actions_bit_action_directive__WEBPACK_IMPORTED_MODULE_8__.BitActionDirective, _libs_components_src_async_actions_form_button_directive__WEBPACK_IMPORTED_MODULE_9__.BitFormButtonDirective, _libs_components_src_async_actions_bit_submit_directive__WEBPACK_IMPORTED_MODULE_10__.BitSubmitDirective, _libs_components_src_button_button_component__WEBPACK_IMPORTED_MODULE_11__.ButtonComponent, _libs_components_src_dialog_dialog_dialog_component__WEBPACK_IMPORTED_MODULE_12__.DialogComponent, _libs_components_src_form_control_label_component__WEBPACK_IMPORTED_MODULE_13__.BitLabel, _libs_components_src_input_input_directive__WEBPACK_IMPORTED_MODULE_14__.BitInputDirective, _libs_components_src_form_field_form_field_component__WEBPACK_IMPORTED_MODULE_15__.BitFormFieldComponent, _libs_components_src_link_link_directive__WEBPACK_IMPORTED_MODULE_16__.AnchorLinkDirective, _libs_angular_src_platform_pipes_i18n_pipe__WEBPACK_IMPORTED_MODULE_2__.I18nPipe], encapsulation: 2 });


/***/ }),

/***/ "./src/app/billing/organizations/organization-billing-history-view.component.ts":
/*!**************************************************************************************!*\
  !*** ./src/app/billing/organizations/organization-billing-history-view.component.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OrgBillingHistoryViewComponent: () => (/* binding */ OrgBillingHistoryViewComponent)
/* harmony export */ });
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/Subject.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/operators/concatMap.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js");
/* harmony import */ var _bitwarden_common_billing_abstractions_organizations_organization_billing_api_service_abstraction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bitwarden/common/billing/abstractions/organizations/organization-billing-api.service.abstraction */ "../../libs/common/src/billing/abstractions/organizations/organization-billing-api.service.abstraction.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/fesm2022/core.mjs");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/router */ "../../node_modules/@angular/router/fesm2022/router-Dwfin5Au.mjs");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/common */ "../../node_modules/@angular/common/fesm2022/common_module-Dx7dWex5.mjs");
/* harmony import */ var _libs_components_src_button_button_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../../libs/components/src/button/button.component */ "../../libs/components/src/button/button.component.ts");
/* harmony import */ var _libs_components_src_container_container_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../../libs/components/src/container/container.component */ "../../libs/components/src/container/container.component.ts");
/* harmony import */ var _shared_billing_history_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../shared/billing-history.component */ "./src/app/billing/shared/billing-history.component.ts");
/* harmony import */ var _layouts_header_web_header_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../layouts/header/web-header.component */ "./src/app/layouts/header/web-header.component.ts");
/* harmony import */ var _libs_angular_src_platform_pipes_i18n_pipe__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../libs/angular/src/platform/pipes/i18n.pipe */ "../../libs/angular/src/platform/pipes/i18n.pipe.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};












function OrgBillingHistoryViewComponent_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](1, "i", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](2, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "span", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](5, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpropertyInterpolate"]("title", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](2, 2, "loading"));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](5, 4, "loading"));
} }
function OrgBillingHistoryViewComponent_ng_container_3_button_2_Template(rf, ctx) { if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "button", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function OrgBillingHistoryViewComponent_ng_container_3_button_2_Template_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1); const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2); return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r1.load()); });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](2, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](2, 1, "loadMore"), " ");
} }
function OrgBillingHistoryViewComponent_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](1, "app-billing-history", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](2, OrgBillingHistoryViewComponent_ng_container_3_button_2_Template, 3, 3, "button", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("openInvoices", ctx_r1.openInvoices)("paidInvoices", ctx_r1.paidInvoices)("transactions", ctx_r1.transactions);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx_r1.hasAdditionalHistory);
} }
class OrgBillingHistoryViewComponent {
    constructor(organizationBillingApiService, route) {
        this.organizationBillingApiService = organizationBillingApiService;
        this.route = route;
        this.loading = false;
        this.firstLoaded = false;
        this.openInvoices = [];
        this.paidInvoices = [];
        this.transactions = [];
        this.hasAdditionalHistory = false;
        this.destroy$ = new rxjs__WEBPACK_IMPORTED_MODULE_5__.Subject();
    }
    ngOnInit() {
        return __awaiter(this, void 0, void 0, function* () {
            this.route.params
                .pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_6__.concatMap)((params) => __awaiter(this, void 0, void 0, function* () {
                this.organizationId = params.organizationId;
                yield this.load();
                this.firstLoaded = true;
            })), (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.takeUntil)(this.destroy$))
                .subscribe();
        });
    }
    ngOnDestroy() {
        this.destroy$.next();
        this.destroy$.complete();
    }
    load() {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.loading) {
                return;
            }
            this.loading = true;
            /* disable billing history
            const openInvoicesPromise = this.organizationBillingApiService.getBillingInvoices(
              this.organizationId,
              "open",
              this.openInvoices.length > 0 ? this.openInvoices[this.openInvoices.length - 1].id : null,
            );
        
            const paidInvoicesPromise = this.organizationBillingApiService.getBillingInvoices(
              this.organizationId,
              "paid",
              this.paidInvoices.length > 0 ? this.paidInvoices[this.paidInvoices.length - 1].id : null,
            );
        
            const transactionsPromise = this.organizationBillingApiService.getBillingTransactions(
              this.organizationId,
              this.transactions.length > 0
                ? this.transactions[this.transactions.length - 1].createdDate
                : null,
            );
        
            const openInvoices = await openInvoicesPromise;
            const paidInvoices = await paidInvoicesPromise;
            const transactions = await transactionsPromise;
        
            const pageSize = 5;
        
            this.openInvoices = [...this.openInvoices, ...openInvoices];
            this.paidInvoices = [...this.paidInvoices, ...paidInvoices];
            this.transactions = [...this.transactions, ...transactions];
        
            this.hasAdditionalHistory =
              openInvoices.length <= pageSize ||
              paidInvoices.length <= pageSize ||
              transactions.length <= pageSize;
            */
            this.loading = false;
        });
    }
}
OrgBillingHistoryViewComponent.ɵfac = function OrgBillingHistoryViewComponent_Factory(__ngFactoryType__) { return new (__ngFactoryType__ || OrgBillingHistoryViewComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_bitwarden_common_billing_abstractions_organizations_organization_billing_api_service_abstraction__WEBPACK_IMPORTED_MODULE_0__.OrganizationBillingApiServiceAbstraction), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_8__.ActivatedRoute)); };
OrgBillingHistoryViewComponent.ɵcmp = /*@__PURE__*/ _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefineComponent"]({ type: OrgBillingHistoryViewComponent, selectors: [["ng-component"]], standalone: false, decls: 4, vars: 2, consts: [[4, "ngIf"], ["aria-hidden", "true", 1, "bwi", "bwi-spinner", "bwi-spin", "tw-text-muted", 3, "title"], [1, "tw-sr-only"], [3, "openInvoices", "paidInvoices", "transactions"], ["type", "button", "bitButton", "", "buttonType", "secondary", 3, "click", 4, "ngIf"], ["type", "button", "bitButton", "", "buttonType", "secondary", 3, "click"]], template: function OrgBillingHistoryViewComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](0, "app-header");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](1, "bit-container");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](2, OrgBillingHistoryViewComponent_ng_container_2_Template, 6, 6, "ng-container", 0)(3, OrgBillingHistoryViewComponent_ng_container_3_Template, 3, 4, "ng-container", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", !ctx.firstLoaded && ctx.loading);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx.openInvoices || ctx.paidInvoices || ctx.transactions);
    } }, dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_9__.NgIf, _libs_components_src_button_button_component__WEBPACK_IMPORTED_MODULE_10__.ButtonComponent, _libs_components_src_container_container_component__WEBPACK_IMPORTED_MODULE_11__.ContainerComponent, _shared_billing_history_component__WEBPACK_IMPORTED_MODULE_1__.BillingHistoryComponent, _layouts_header_web_header_component__WEBPACK_IMPORTED_MODULE_2__.WebHeaderComponent, _libs_angular_src_platform_pipes_i18n_pipe__WEBPACK_IMPORTED_MODULE_3__.I18nPipe], encapsulation: 2 });


/***/ }),

/***/ "./src/app/billing/organizations/organization-billing-routing.module.ts":
/*!******************************************************************************!*\
  !*** ./src/app/billing/organizations/organization-billing-routing.module.ts ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OrganizationBillingRoutingModule: () => (/* binding */ OrganizationBillingRoutingModule)
/* harmony export */ });
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/router */ "../../node_modules/@angular/router/fesm2022/router_module-DTJgGWLd.mjs");
/* harmony import */ var _bitwarden_common_admin_console_abstractions_organization_organization_service_abstraction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction */ "../../libs/common/src/admin-console/abstractions/organization/organization.service.abstraction.ts");
/* harmony import */ var _bitwarden_web_vault_app_billing_organizations_payment_details_organization_payment_details_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bitwarden/web-vault/app/billing/organizations/payment-details/organization-payment-details.component */ "./src/app/billing/organizations/payment-details/organization-payment-details.component.ts");
/* harmony import */ var _admin_console_organizations_guards_org_permissions_guard__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../admin-console/organizations/guards/org-permissions.guard */ "./src/app/admin-console/organizations/guards/org-permissions.guard.ts");
/* harmony import */ var _billing_guards_organization_is_unmanaged_guard__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../billing/guards/organization-is-unmanaged.guard */ "./src/app/billing/guards/organization-is-unmanaged.guard.ts");
/* harmony import */ var _core_web_platform_utils_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/web-platform-utils.service */ "./src/app/core/web-platform-utils.service.ts");
/* harmony import */ var _organization_billing_history_view_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./organization-billing-history-view.component */ "./src/app/billing/organizations/organization-billing-history-view.component.ts");
/* harmony import */ var _organization_subscription_cloud_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./organization-subscription-cloud.component */ "./src/app/billing/organizations/organization-subscription-cloud.component.ts");
/* harmony import */ var _organization_subscription_selfhost_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./organization-subscription-selfhost.component */ "./src/app/billing/organizations/organization-subscription-selfhost.component.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/fesm2022/core.mjs");











const routes = [
    {
        path: "",
        canActivate: [(0,_admin_console_organizations_guards_org_permissions_guard__WEBPACK_IMPORTED_MODULE_2__.organizationPermissionsGuard)(_bitwarden_common_admin_console_abstractions_organization_organization_service_abstraction__WEBPACK_IMPORTED_MODULE_0__.canAccessBillingTab)],
        children: [
            { path: "", pathMatch: "full", redirectTo: "subscription" },
            {
                path: "subscription",
                component: _core_web_platform_utils_service__WEBPACK_IMPORTED_MODULE_4__.WebPlatformUtilsService.isSelfHost()
                    ? _organization_subscription_selfhost_component__WEBPACK_IMPORTED_MODULE_7__.OrganizationSubscriptionSelfhostComponent
                    : _organization_subscription_cloud_component__WEBPACK_IMPORTED_MODULE_6__.OrganizationSubscriptionCloudComponent,
                data: { titleId: "subscription" },
            },
            {
                path: "payment-details",
                component: _bitwarden_web_vault_app_billing_organizations_payment_details_organization_payment_details_component__WEBPACK_IMPORTED_MODULE_1__.OrganizationPaymentDetailsComponent,
                canActivate: [
                    (0,_admin_console_organizations_guards_org_permissions_guard__WEBPACK_IMPORTED_MODULE_2__.organizationPermissionsGuard)((org) => org.canEditPaymentMethods),
                    _billing_guards_organization_is_unmanaged_guard__WEBPACK_IMPORTED_MODULE_3__.organizationIsUnmanaged,
                ],
                data: {
                    titleId: "paymentDetails",
                },
            },
            {
                path: "history",
                component: _organization_billing_history_view_component__WEBPACK_IMPORTED_MODULE_5__.OrgBillingHistoryViewComponent,
                canActivate: [
                    (0,_admin_console_organizations_guards_org_permissions_guard__WEBPACK_IMPORTED_MODULE_2__.organizationPermissionsGuard)((org) => org.canViewBillingHistory),
                    _billing_guards_organization_is_unmanaged_guard__WEBPACK_IMPORTED_MODULE_3__.organizationIsUnmanaged,
                ],
                data: {
                    titleId: "billingHistory",
                },
            },
        ],
    },
];
class OrganizationBillingRoutingModule {
}
OrganizationBillingRoutingModule.ɵfac = function OrganizationBillingRoutingModule_Factory(__ngFactoryType__) { return new (__ngFactoryType__ || OrganizationBillingRoutingModule)(); };
OrganizationBillingRoutingModule.ɵmod = /*@__PURE__*/ _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdefineNgModule"]({ type: OrganizationBillingRoutingModule });
OrganizationBillingRoutingModule.ɵinj = /*@__PURE__*/ _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdefineInjector"]({ imports: [_angular_router__WEBPACK_IMPORTED_MODULE_9__.RouterModule.forChild(routes), _angular_router__WEBPACK_IMPORTED_MODULE_9__.RouterModule] });


/***/ }),

/***/ "./src/app/billing/organizations/organization-billing.module.ts":
/*!**********************************************************************!*\
  !*** ./src/app/billing/organizations/organization-billing.module.ts ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OrganizationBillingModule: () => (/* binding */ OrganizationBillingModule)
/* harmony export */ });
/* harmony import */ var _libs_components_src_banner_banner_module__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../libs/components/src/banner/banner.module */ "../../libs/components/src/banner/banner.module.ts");
/* harmony import */ var _auth_shared_components_user_verification__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../auth/shared/components/user-verification */ "./src/app/auth/shared/components/user-verification/index.ts");
/* harmony import */ var _layouts_header_header_module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../layouts/header/header.module */ "./src/app/layouts/header/header.module.ts");
/* harmony import */ var _shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../shared */ "./src/app/billing/shared/index.ts");
/* harmony import */ var _organization_billing_routing_module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./organization-billing-routing.module */ "./src/app/billing/organizations/organization-billing-routing.module.ts");
/* harmony import */ var _organization_plans_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./organization-plans.component */ "./src/app/billing/organizations/organization-plans.component.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/fesm2022/core.mjs");
// FIXME: remove `src` and fix import
// eslint-disable-next-line no-restricted-imports







class OrganizationBillingModule {
}
OrganizationBillingModule.ɵfac = function OrganizationBillingModule_Factory(__ngFactoryType__) { return new (__ngFactoryType__ || OrganizationBillingModule)(); };
OrganizationBillingModule.ɵmod = /*@__PURE__*/ _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdefineNgModule"]({ type: OrganizationBillingModule });
OrganizationBillingModule.ɵinj = /*@__PURE__*/ _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdefineInjector"]({ imports: [_organization_billing_routing_module__WEBPACK_IMPORTED_MODULE_3__.OrganizationBillingRoutingModule,
        _auth_shared_components_user_verification__WEBPACK_IMPORTED_MODULE_0__.UserVerificationModule,
        _shared__WEBPACK_IMPORTED_MODULE_2__.BillingSharedModule,
        _organization_plans_component__WEBPACK_IMPORTED_MODULE_4__.OrganizationPlansComponent,
        _layouts_header_header_module__WEBPACK_IMPORTED_MODULE_1__.HeaderModule,
        _libs_components_src_banner_banner_module__WEBPACK_IMPORTED_MODULE_6__.BannerModule] });


/***/ }),

/***/ "./src/app/billing/organizations/organization-subscription-cloud.component.ts":
/*!************************************************************************************!*\
  !*** ./src/app/billing/organizations/organization-subscription-cloud.component.ts ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OrganizationSubscriptionCloudComponent: () => (/* binding */ OrganizationSubscriptionCloudComponent)
/* harmony export */ });
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/Subject.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/lastValueFrom.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");
/* harmony import */ var _bitwarden_admin_console_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bitwarden/admin-console/common */ "../../libs/admin-console/src/common/index.ts");
/* harmony import */ var _bitwarden_assets_svg__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @bitwarden/assets/svg */ "../../libs/assets/src/svg/svgs/gear.ts");
/* harmony import */ var _bitwarden_common_abstractions_api_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bitwarden/common/abstractions/api.service */ "../../libs/common/src/abstractions/api.service.ts");
/* harmony import */ var _bitwarden_common_admin_console_abstractions_organization_organization_api_service_abstraction__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bitwarden/common/admin-console/abstractions/organization/organization-api.service.abstraction */ "../../libs/common/src/admin-console/abstractions/organization/organization-api.service.abstraction.ts");
/* harmony import */ var _bitwarden_common_admin_console_abstractions_organization_organization_service_abstraction__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction */ "../../libs/common/src/admin-console/abstractions/organization/organization.service.abstraction.ts");
/* harmony import */ var _bitwarden_common_admin_console_enums__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bitwarden/common/admin-console/enums */ "../../libs/common/src/admin-console/enums/index.ts");
/* harmony import */ var _bitwarden_common_auth_abstractions_account_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bitwarden/common/auth/abstractions/account.service */ "../../libs/common/src/auth/abstractions/account.service.ts");
/* harmony import */ var _bitwarden_common_auth_services_account_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @bitwarden/common/auth/services/account.service */ "../../libs/common/src/auth/services/account.service.ts");
/* harmony import */ var _bitwarden_common_billing_abstractions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @bitwarden/common/billing/abstractions */ "../../libs/common/src/billing/abstractions/index.ts");
/* harmony import */ var _bitwarden_common_billing_enums__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @bitwarden/common/billing/enums */ "../../libs/common/src/billing/enums/index.ts");
/* harmony import */ var _bitwarden_common_platform_abstractions_config_config_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @bitwarden/common/platform/abstractions/config/config.service */ "../../libs/common/src/platform/abstractions/config/config.service.ts");
/* harmony import */ var _bitwarden_common_platform_abstractions_i18n_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @bitwarden/common/platform/abstractions/i18n.service */ "../../libs/common/src/platform/abstractions/i18n.service.ts");
/* harmony import */ var _bitwarden_common_platform_abstractions_log_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @bitwarden/common/platform/abstractions/log.service */ "../../libs/common/src/platform/abstractions/log.service.ts");
/* harmony import */ var _shared_adjust_storage_dialog_adjust_storage_dialog_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../shared/adjust-storage-dialog/adjust-storage-dialog.component */ "./src/app/billing/shared/adjust-storage-dialog/adjust-storage-dialog.component.ts");
/* harmony import */ var _shared_offboarding_survey_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../shared/offboarding-survey.component */ "./src/app/billing/shared/offboarding-survey.component.ts");
/* harmony import */ var _billing_sync_api_key_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./billing-sync-api-key.component */ "./src/app/billing/organizations/billing-sync-api-key.component.ts");
/* harmony import */ var _change_plan_dialog_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./change-plan-dialog.component */ "./src/app/billing/organizations/change-plan-dialog.component.ts");
/* harmony import */ var _download_license_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./download-license.component */ "./src/app/billing/organizations/download-license.component.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/fesm2022/core.mjs");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! @angular/router */ "../../node_modules/@angular/router/fesm2022/router-Dwfin5Au.mjs");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! @angular/router */ "../../node_modules/@angular/router/fesm2022/router_module-DTJgGWLd.mjs");
/* harmony import */ var _bitwarden_components__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! @bitwarden/components */ "../../libs/components/src/dialog/dialog.service.ts");
/* harmony import */ var _bitwarden_components__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! @bitwarden/components */ "../../libs/components/src/toast/toast.service.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! @angular/common */ "../../node_modules/@angular/common/fesm2022/common_module-Dx7dWex5.mjs");
/* harmony import */ var _libs_components_src_async_actions_bit_action_directive__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ../../../../../../libs/components/src/async-actions/bit-action.directive */ "../../libs/components/src/async-actions/bit-action.directive.ts");
/* harmony import */ var _libs_components_src_badge_badge_component__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ../../../../../../libs/components/src/badge/badge.component */ "../../libs/components/src/badge/badge.component.ts");
/* harmony import */ var _libs_components_src_button_button_component__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ../../../../../../libs/components/src/button/button.component */ "../../libs/components/src/button/button.component.ts");
/* harmony import */ var _libs_components_src_container_container_component__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ../../../../../../libs/components/src/container/container.component */ "../../libs/components/src/container/container.component.ts");
/* harmony import */ var _libs_components_src_icon_icon_component__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ../../../../../../libs/components/src/icon/icon.component */ "../../libs/components/src/icon/icon.component.ts");
/* harmony import */ var _libs_components_src_progress_progress_component__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ../../../../../../libs/components/src/progress/progress.component */ "../../libs/components/src/progress/progress.component.ts");
/* harmony import */ var _libs_components_src_table_cell_directive__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ../../../../../../libs/components/src/table/cell.directive */ "../../libs/components/src/table/cell.directive.ts");
/* harmony import */ var _libs_components_src_table_row_directive__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ../../../../../../libs/components/src/table/row.directive */ "../../libs/components/src/table/row.directive.ts");
/* harmony import */ var _libs_components_src_table_table_component__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ../../../../../../libs/components/src/table/table.component */ "../../libs/components/src/table/table.component.ts");
/* harmony import */ var _libs_components_src_typography_typography_directive__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ../../../../../../libs/components/src/typography/typography.directive */ "../../libs/components/src/typography/typography.directive.ts");
/* harmony import */ var _layouts_header_web_header_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../layouts/header/web-header.component */ "./src/app/layouts/header/web-header.component.ts");
/* harmony import */ var _adjust_subscription_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./adjust-subscription.component */ "./src/app/billing/organizations/adjust-subscription.component.ts");
/* harmony import */ var _change_plan_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./change-plan.component */ "./src/app/billing/organizations/change-plan.component.ts");
/* harmony import */ var _sm_adjust_subscription_component__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./sm-adjust-subscription.component */ "./src/app/billing/organizations/sm-adjust-subscription.component.ts");
/* harmony import */ var _sm_subscribe_standalone_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./sm-subscribe-standalone.component */ "./src/app/billing/organizations/sm-subscribe-standalone.component.ts");
/* harmony import */ var _subscription_status_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./subscription-status.component */ "./src/app/billing/organizations/subscription-status.component.ts");
/* harmony import */ var _libs_angular_src_platform_pipes_i18n_pipe__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../../../../libs/angular/src/platform/pipes/i18n.pipe */ "../../libs/angular/src/platform/pipes/i18n.pipe.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



















































const _c0 = a0 => ({ "tw-pl-20": a0 });
const _c1 = a0 => ["/providers", a0, "manage-client-organizations"];
function OrganizationSubscriptionCloudComponent_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelement"](1, "i", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](2, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](3, "span", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](5, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpropertyInterpolate"]("title", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](2, 2, "loading"));
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](5, 4, "loading"));
} }
function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_app_subscription_status_1_Template(rf, ctx) { if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](0, "app-subscription-status", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵlistener"]("reinstatementRequested", function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_app_subscription_status_1_Template_app_subscription_status_reinstatementRequested_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵrestoreView"](_r1); const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](3); return _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵresetView"](ctx_r1.reinstate()); });
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("organizationSubscriptionResponse", ctx_r1.sub);
} }
function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_2_span_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](0, "span", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](2, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind2"](2, 1, "providerDiscount", ctx_r1.customerDiscount == null ? null : ctx_r1.customerDiscount.percentOff));
} }
function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_2_ng_template_7_ng_container_0_tr_1_span_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](2, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
} if (rf & 2) {
    const i_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate1"]("", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](2, 1, i_r3.productName), " -");
} }
function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_2_ng_template_7_ng_container_0_tr_1_ng_container_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](2, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](2, 1, "freeForOneYear"), " ");
} }
function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_2_ng_template_7_ng_container_0_tr_1_ng_template_7_span_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](0, "span", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](2, "currency");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](3, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
} if (rf & 2) {
    const i_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](2).$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate2"]("", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind2"](2, 2, ctx_r1.calculateTotalAppliedDiscount(i_r3.quantity * i_r3.amount), "$"), " / ", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](3, 5, "year"), "");
} }
function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_2_ng_template_7_ng_container_0_tr_1_ng_template_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](0, "div", 21)(1, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](3, "currency");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](4, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtemplate"](5, OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_2_ng_template_7_ng_container_0_tr_1_ng_template_7_span_5_Template, 4, 7, "span", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
} if (rf & 2) {
    const i_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"]().$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate2"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind2"](3, 3, i_r3.quantity * i_r3.amount, "$"), " /", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](4, 6, i_r3.interval), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", (ctx_r1.customerDiscount == null ? null : ctx_r1.customerDiscount.percentOff) && !ctx_r1.isSecretsManagerTrial());
} }
function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_2_ng_template_7_ng_container_0_tr_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](0, "tr", 18)(1, "td", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtemplate"](2, OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_2_ng_template_7_ng_container_0_tr_1_span_2_Template, 3, 3, "span", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](4, "currency");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](5, "td", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtemplate"](6, OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_2_ng_template_7_ng_container_0_tr_1_ng_container_6_Template, 3, 3, "ng-container", 6)(7, OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_2_ng_template_7_ng_container_0_tr_1_ng_template_7_Template, 6, 8, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]()();
} if (rf & 2) {
    const i_r3 = ctx.$implicit;
    const calculateElse_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵreference"](8);
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpureFunction1"](10, _c0, i_r3.addonSubscriptionItem));
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", !i_r3.addonSubscriptionItem);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate3"](" ", i_r3.name, " ", i_r3.quantity > 1 ? "\u00D7" + i_r3.quantity : "", " @ ", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind2"](4, 7, i_r3.amount, "$"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", ctx_r1.sub == null ? null : ctx_r1.sub.customerDiscount == null ? null : ctx_r1.sub.customerDiscount.appliesTo == null ? null : ctx_r1.sub.customerDiscount.appliesTo.includes(i_r3.productId))("ngIfElse", calculateElse_r4);
} }
function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_2_ng_template_7_ng_container_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtemplate"](1, OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_2_ng_template_7_ng_container_0_tr_1_Template, 9, 12, "tr", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngForOf", ctx_r1.subscriptionLineItems);
} }
function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_2_ng_template_7_ng_container_1_tr_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](0, "tr", 18)(1, "td", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](3, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](4, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](5, "td", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](7, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]()();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate2"]("", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](3, 3, "passwordManager"), " - ", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](4, 5, "freeOrganization"), "");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](7, 7, "free"));
} }
function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_2_ng_template_7_ng_container_1_tr_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](0, "tr", 18)(1, "td", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](3, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](4, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](5, "td", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](7, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]()();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate2"]("", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](3, 3, "secretsManager"), " - ", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](4, 5, "freeOrganization"), "");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](7, 7, "free"));
} }
function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_2_ng_template_7_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtemplate"](1, OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_2_ng_template_7_ng_container_1_tr_1_Template, 8, 9, "tr", 24)(2, OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_2_ng_template_7_ng_container_1_tr_2_Template, 8, 9, "tr", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", ctx_r1.userOrg.usePasswordManager);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", ctx_r1.userOrg.useSecretsManager);
} }
function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_2_ng_template_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtemplate"](0, OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_2_ng_template_7_ng_container_0_Template, 2, 1, "ng-container", 5)(1, OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_2_ng_template_7_ng_container_1_Template, 3, 2, "ng-container", 5);
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", ctx_r1.subscription && !ctx_r1.userOrg.isFreeOrg);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", ctx_r1.userOrg.isFreeOrg);
} }
function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](1, "div", 12)(2, "strong", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](4, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtemplate"](5, OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_2_span_5_Template, 3, 4, "span", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](6, "bit-table");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtemplate"](7, OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_2_ng_template_7_Template, 2, 2, "ng-template", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](4, 2, "details"));
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", (ctx_r1.customerDiscount == null ? null : ctx_r1.customerDiscount.percentOff) > 0 && !ctx_r1.isSecretsManagerTrial());
} }
function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_3_button_2_Template(rf, ctx) { if (rf & 1) {
    const _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](0, "button", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵlistener"]("click", function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_3_button_2_Template_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵrestoreView"](_r5); const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](4); return _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵresetView"](ctx_r1.changePlan()); });
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](2, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](2, 1, "changeBillingPlan"), " ");
} }
function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_3_app_change_plan_3_Template(rf, ctx) { if (rf & 1) {
    const _r6 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](0, "app-change-plan", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵlistener"]("onChanged", function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_3_app_change_plan_3_Template_app_change_plan_onChanged_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵrestoreView"](_r6); const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](4); return _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵresetView"](ctx_r1.closeChangePlan()); })("onCanceled", function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_3_app_change_plan_3_Template_app_change_plan_onCanceled_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵrestoreView"](_r6); const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](4); return _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵresetView"](ctx_r1.closeChangePlan()); });
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("organizationId", ctx_r1.organizationId)("currentPlan", ctx_r1.sub.plan)("preSelectedProductTier", ctx_r1.preSelectedProductTier);
} }
function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](1, "div", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtemplate"](2, OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_3_button_2_Template, 3, 3, "button", 27)(3, OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_3_app_change_plan_3_Template, 1, 3, "app-change-plan", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", ctx_r1.showChangePlanButton);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", ctx_r1.showChangePlan);
} }
function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    const _r7 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](1, "div", 31)(2, "sm-subscribe-standalone", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵlistener"]("onSubscribe", function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_4_Template_sm_subscribe_standalone_onSubscribe_2_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵrestoreView"](_r7); const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](3); return _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵresetView"](ctx_r1.subscriptionAdjusted()); });
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("plan", ctx_r1.sub.plan)("organization", ctx_r1.userOrg)("customerDiscount", ctx_r1.customerDiscount);
} }
function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_5_p_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](0, "p", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](2, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](3, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](4, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](5, "a", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](7, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]()();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate3"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](2, 4, "smStandaloneTrialSeatCountUpdateMessageFragment1"), " ", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](3, 6, "passwordManager"), " ", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](4, 8, "smStandaloneTrialSeatCountUpdateMessageFragment2"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate1"]("", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](7, 10, "contactSupportShort"), ". ");
} }
function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_5_ng_container_7_Template(rf, ctx) { if (rf & 1) {
    const _r8 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](1, "h3", 38);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](3, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](4, "app-adjust-subscription", 39);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵlistener"]("onAdjusted", function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_5_ng_container_7_Template_app_adjust_subscription_onAdjusted_4_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵrestoreView"](_r8); const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](4); return _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵresetView"](ctx_r1.subscriptionAdjusted()); });
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](3, 6, "passwordManager"));
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("seatPrice", ctx_r1.seatPrice)("organizationId", ctx_r1.organizationId)("interval", ctx_r1.billingInterval)("currentSeatCount", ctx_r1.seats)("maxAutoscaleSeats", ctx_r1.maxAutoscaleSeats);
} }
function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_5_button_8_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](0, "button", 40);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](2, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("bitAction", ctx_r1.removeSponsorship);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](2, 2, "removeSponsorship"), " ");
} }
function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_5_ng_container_9_ng_container_8_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](1, "div", 43)(2, "div", 44)(3, "button", 45);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](5, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](6, "button", 45);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](8, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("bitAction", ctx_r1.adjustStorage(true));
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](5, 4, "addStorage"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("bitAction", ctx_r1.adjustStorage(false));
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](8, 6, "removeStorage"), " ");
} }
function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_5_ng_container_9_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](1, "h4", 41);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](3, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](4, "p", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](6, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelement"](7, "bit-progress", 42);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtemplate"](8, OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_5_ng_container_9_ng_container_8_Template, 9, 8, "ng-container", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](3, 4, "storage"));
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind3"](6, 6, "subscriptionStorage", ctx_r1.sub.maxStorageGb || 0, ctx_r1.sub.storageName || "0 MB"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("barWidth", ctx_r1.storagePercentage);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", ctx_r1.subscription && !ctx_r1.subscription.cancelled && !ctx_r1.subscriptionMarkedForCancel);
} }
function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_5_ng_container_10_Template(rf, ctx) { if (rf & 1) {
    const _r9 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](1, "h3", 46);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](3, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](4, "app-sm-adjust-subscription", 47);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵlistener"]("onAdjusted", function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_5_ng_container_10_Template_app_sm_adjust_subscription_onAdjusted_4_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵrestoreView"](_r9); const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](4); return _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵresetView"](ctx_r1.subscriptionAdjusted()); });
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](3, 3, "secretsManager"));
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("organizationId", ctx_r1.organizationId)("options", ctx_r1.smOptions);
} }
function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](1, "h2", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](3, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtemplate"](4, OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_5_p_4_Template, 8, 12, "p", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](5, "p", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtemplate"](7, OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_5_ng_container_7_Template, 5, 8, "ng-container", 5)(8, OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_5_button_8_Template, 3, 4, "button", 36)(9, OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_5_ng_container_9_Template, 9, 10, "ng-container", 5)(10, OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_5_ng_container_10_Template, 5, 5, "ng-container", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](3, 7, "manageSubscription"));
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", (ctx_r1.customerDiscount == null ? null : ctx_r1.customerDiscount.id) === "sm-standalone");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate"](ctx_r1.subscriptionDesc);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", ctx_r1.subscription && ctx_r1.canAdjustSeats && !ctx_r1.subscription.cancelled && !ctx_r1.subscriptionMarkedForCancel && (!ctx_r1.customerDiscount || ctx_r1.customerDiscount.id != "sm-standalone"));
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", ctx_r1.isSponsoredSubscription);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", !ctx_r1.customerDiscount || ctx_r1.customerDiscount.id != "sm-standalone");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", ctx_r1.showAdjustSecretsManager);
} }
function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_6_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainer"](0);
} }
function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_7_button_8_Template(rf, ctx) { if (rf & 1) {
    const _r10 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](0, "button", 49);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵlistener"]("click", function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_7_button_8_Template_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵrestoreView"](_r10); const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](4); return _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵresetView"](ctx_r1.cancelSubscription()); });
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](2, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](2, 1, "cancelSubscription"), " ");
} }
function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](1, "h2", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](3, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](4, "p", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](6, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](7, "div", 44);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtemplate"](8, OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_7_button_8_Template, 3, 3, "button", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](3, 3, "additionalOptions"));
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](6, 5, "additionalOptionsDesc"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", ctx_r1.subscription && !ctx_r1.subscription.cancelled && !ctx_r1.subscriptionMarkedForCancel);
} }
function OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtemplate"](1, OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_app_subscription_status_1_Template, 1, 1, "app-subscription-status", 9)(2, OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_2_Template, 8, 4, "ng-container", 5)(3, OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_3_Template, 4, 2, "ng-container", 5)(4, OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_4_Template, 3, 3, "ng-container", 5)(5, OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_5_Template, 11, 9, "ng-container", 5)(6, OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_6_Template, 1, 0, "ng-container", 10)(7, OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_ng_container_7_Template, 9, 7, "ng-container", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](2);
    const setupSelfHost_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵreference"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", !ctx_r1.userOrg.isFreeOrg);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", ctx_r1.userOrg.canEditSubscription);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", ctx_r1.userOrg.canEditSubscription);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", ctx_r1.showSecretsManagerSubscribe);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", ctx_r1.userOrg.canEditSubscription);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngTemplateOutlet", setupSelfHost_r11);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", ctx_r1.userOrg.canEditSubscription);
} }
function OrganizationSubscriptionCloudComponent_bit_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](0, "bit-container");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtemplate"](1, OrganizationSubscriptionCloudComponent_bit_container_2_ng_container_1_Template, 8, 7, "ng-container", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", ctx_r1.sub && !ctx_r1.loading);
} }
function OrganizationSubscriptionCloudComponent_ng_template_3_bit_container_0_ng_container_1_p_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](0, "p", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](2, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](3, "a", 52);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](5, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](6, ". ");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](2, 3, "manageSubscriptionFromThe"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpureFunction1"](7, _c1, ctx_r1.userOrg.providerId));
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](5, 5, "providerPortal"));
} }
function OrganizationSubscriptionCloudComponent_ng_template_3_bit_container_0_ng_container_1_ng_template_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](0, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](2, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](3, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate2"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind2"](2, 2, "billingManagedByProvider", ctx_r1.userOrg.providerName), ". ", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](3, 5, "billingContactProviderForAssistance"), ". ");
} }
function OrganizationSubscriptionCloudComponent_ng_template_3_bit_container_0_ng_container_1_ng_container_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainer"](0);
} }
function OrganizationSubscriptionCloudComponent_ng_template_3_bit_container_0_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](1, "h2", 50);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](3, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtemplate"](4, OrganizationSubscriptionCloudComponent_ng_template_3_bit_container_0_ng_container_1_p_4_Template, 7, 9, "p", 51)(5, OrganizationSubscriptionCloudComponent_ng_template_3_bit_container_0_ng_container_1_ng_template_5_Template, 4, 7, "ng-template", null, 4, _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtemplateRefExtractor"])(7, OrganizationSubscriptionCloudComponent_ng_template_3_bit_container_0_ng_container_1_ng_container_7_Template, 1, 0, "ng-container", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    const isOrganizationOwner_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵreference"](6);
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](3);
    const setupSelfHost_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵreference"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](3, 4, "manageSubscription"));
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", ctx_r1.userOrg.isProviderUser)("ngIfElse", isOrganizationOwner_r12);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngTemplateOutlet", setupSelfHost_r11);
} }
function OrganizationSubscriptionCloudComponent_ng_template_3_bit_container_0_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](0, "div", 53)(1, "div", 54);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelement"](2, "bit-icon", 55);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](3, "p", 56);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](5, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](6, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](8, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]()();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("icon", ctx_r1.gearIcon);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind2"](5, 3, "billingManagedByProvider", ctx_r1.userOrg.providerName));
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](8, 6, "billingContactProviderForAssistance"));
} }
function OrganizationSubscriptionCloudComponent_ng_template_3_bit_container_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](0, "bit-container");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtemplate"](1, OrganizationSubscriptionCloudComponent_ng_template_3_bit_container_0_ng_container_1_Template, 8, 6, "ng-container", 6)(2, OrganizationSubscriptionCloudComponent_ng_template_3_bit_container_0_ng_template_2_Template, 9, 8, "ng-template", null, 3, _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
} if (rf & 2) {
    const organizationIsNotManagedByConsolidatedBillingMSP_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵreference"](3);
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", ctx_r1.organizationIsManagedByConsolidatedBillingMSP)("ngIfElse", organizationIsNotManagedByConsolidatedBillingMSP_r13);
} }
function OrganizationSubscriptionCloudComponent_ng_template_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtemplate"](0, OrganizationSubscriptionCloudComponent_ng_template_3_bit_container_0_Template, 4, 2, "bit-container", 5);
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", !ctx_r1.loading);
} }
function OrganizationSubscriptionCloudComponent_ng_template_5_ng_container_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](1, "h2", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](3, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](4, "p", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](3, 2, "manageSubscription"));
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate"](ctx_r1.resellerSeatsRemainingMessage);
} }
function OrganizationSubscriptionCloudComponent_ng_template_5_ng_container_1_button_11_Template(rf, ctx) { if (rf & 1) {
    const _r15 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](0, "button", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵlistener"]("click", function OrganizationSubscriptionCloudComponent_ng_template_5_ng_container_1_button_11_Template_button_click_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵrestoreView"](_r15); const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](3); return _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵresetView"](ctx_r1.manageBillingSync()); });
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](2, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](2, 1, ctx_r1.hasBillingSyncToken ? "viewBillingToken" : "setUpBillingSync"), " ");
} }
function OrganizationSubscriptionCloudComponent_ng_template_5_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    const _r14 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](1, "h2", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](3, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](4, "p", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](6, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementStart"](7, "div", 44)(8, "button", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵlistener"]("click", function OrganizationSubscriptionCloudComponent_ng_template_5_ng_container_1_Template_button_click_8_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵrestoreView"](_r14); const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](2); return _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵresetView"](ctx_r1.downloadLicense()); });
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtext"](9);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipe"](10, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtemplate"](11, OrganizationSubscriptionCloudComponent_ng_template_5_ng_container_1_button_11_Template, 3, 3, "button", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](3, 4, "selfHostingTitleProper"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](6, 6, "toHostBitwardenOnYourOwnServer"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵpipeBind1"](10, 8, "downloadLicense"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", ctx_r1.canUseBillingSync);
} }
function OrganizationSubscriptionCloudComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtemplate"](0, OrganizationSubscriptionCloudComponent_ng_template_5_ng_container_0_Template, 6, 4, "ng-container", 5)(1, OrganizationSubscriptionCloudComponent_ng_template_5_ng_container_1_Template, 12, 10, "ng-container", 5);
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", ctx_r1.userOrg.hasReseller && ctx_r1.resellerSeatsRemainingMessage);
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", ctx_r1.showSelfHost);
} }
class OrganizationSubscriptionCloudComponent {
    constructor(apiService, i18nService, logService, organizationService, accountService, organizationApiService, route, dialogService, configService, toastService, billingApiService, organizationUserApiService) {
        this.apiService = apiService;
        this.i18nService = i18nService;
        this.logService = logService;
        this.organizationService = organizationService;
        this.accountService = accountService;
        this.organizationApiService = organizationApiService;
        this.route = route;
        this.dialogService = dialogService;
        this.configService = configService;
        this.toastService = toastService;
        this.billingApiService = billingApiService;
        this.organizationUserApiService = organizationUserApiService;
        this.lineItems = [];
        this.showChangePlan = false;
        this.showAdjustSecretsManager = false;
        this.showSecretsManagerSubscribe = false;
        this.loading = true;
        this.preSelectedProductTier = _bitwarden_common_billing_enums__WEBPACK_IMPORTED_MODULE_8__.ProductTierType.Free;
        this.showSubscription = true;
        this.showSelfHost = false;
        this.organizationIsManagedByConsolidatedBillingMSP = false;
        this.gearIcon = _bitwarden_assets_svg__WEBPACK_IMPORTED_MODULE_25__.GearIcon;
        this.teamsStarter = _bitwarden_common_billing_enums__WEBPACK_IMPORTED_MODULE_8__.ProductTierType.TeamsStarter;
        this.destroy$ = new rxjs__WEBPACK_IMPORTED_MODULE_26__.Subject();
        this.cancelSubscription = () => __awaiter(this, void 0, void 0, function* () {
            const reference = (0,_shared_offboarding_survey_component__WEBPACK_IMPORTED_MODULE_13__.openOffboardingSurvey)(this.dialogService, {
                data: {
                    type: "Organization",
                    id: this.organizationId,
                },
            });
            const result = yield (0,rxjs__WEBPACK_IMPORTED_MODULE_27__.lastValueFrom)(reference.closed);
            if (result === _shared_offboarding_survey_component__WEBPACK_IMPORTED_MODULE_13__.OffboardingSurveyDialogResultType.Closed) {
                return;
            }
            yield this.load();
        });
        this.reinstate = () => __awaiter(this, void 0, void 0, function* () {
            if (this.loading) {
                return;
            }
            const confirmed = yield this.dialogService.openSimpleDialog({
                title: { key: "reinstateSubscription" },
                content: { key: "reinstateConfirmation" },
                type: "warning",
            });
            if (!confirmed) {
                return;
            }
            try {
                yield this.organizationApiService.reinstate(this.organizationId);
                this.toastService.showToast({
                    variant: "success",
                    title: null,
                    message: this.i18nService.t("reinstated"),
                });
                yield this.load();
            }
            catch (e) {
                this.logService.error(e);
            }
        });
        this.adjustStorage = (add) => {
            return () => __awaiter(this, void 0, void 0, function* () {
                const dialogRef = _shared_adjust_storage_dialog_adjust_storage_dialog_component__WEBPACK_IMPORTED_MODULE_12__.AdjustStorageDialogComponent.open(this.dialogService, {
                    data: {
                        price: this.storageGbPrice,
                        cadence: this.billingInterval,
                        type: add ? "Add" : "Remove",
                        organizationId: this.organizationId,
                    },
                });
                const result = yield (0,rxjs__WEBPACK_IMPORTED_MODULE_27__.lastValueFrom)(dialogRef.closed);
                if (result === _shared_adjust_storage_dialog_adjust_storage_dialog_component__WEBPACK_IMPORTED_MODULE_12__.AdjustStorageDialogResultType.Submitted) {
                    yield this.load();
                }
            });
        };
        this.removeSponsorship = () => __awaiter(this, void 0, void 0, function* () {
            const confirmed = yield this.dialogService.openSimpleDialog({
                title: { key: "removeSponsorship" },
                content: { key: "removeSponsorshipConfirmation" },
                acceptButtonText: { key: "remove" },
                type: "warning",
            });
            if (!confirmed) {
                return;
            }
            try {
                yield this.apiService.deleteRemoveSponsorship(this.organizationId);
                this.toastService.showToast({
                    variant: "success",
                    title: null,
                    message: this.i18nService.t("removeSponsorshipSuccess"),
                });
                yield this.load();
            }
            catch (e) {
                this.logService.error(e);
            }
        });
        this.discountPrice = (price, productId = null) => {
            var _a;
            const discount = ((_a = this.customerDiscount) === null || _a === void 0 ? void 0 : _a.active) &&
                (!productId ||
                    !this.customerDiscount.appliesTo.length ||
                    this.customerDiscount.appliesTo.includes(productId))
                ? price * (this.customerDiscount.percentOff / 100)
                : 0;
            return price - discount;
        };
    }
    ngOnInit() {
        return __awaiter(this, void 0, void 0, function* () {
            this.organizationId =
                this.route.snapshot.params[OrganizationSubscriptionCloudComponent.ROUTE_PARAM_ORGANIZATION_ID];
            yield this.load();
            if (this.route.snapshot.queryParams[OrganizationSubscriptionCloudComponent.QUERY_PARAM_UPGRADE]) {
                yield this.changePlan();
                const productTierTypeStr = this.route.snapshot.queryParamMap.get("productTierType");
                if (productTierTypeStr != null) {
                    const productTier = Number(productTierTypeStr);
                    if (Object.values(_bitwarden_common_billing_enums__WEBPACK_IMPORTED_MODULE_8__.ProductTierType).includes(productTier)) {
                        this.preSelectedProductTier = productTier;
                    }
                }
            }
            if (this.userOrg.hasReseller) {
                const allUsers = yield this.organizationUserApiService.getAllUsers(this.userOrg.id);
                const userCount = allUsers.data.filter((user) => [
                    _bitwarden_common_admin_console_enums__WEBPACK_IMPORTED_MODULE_4__.OrganizationUserStatusType.Invited,
                    _bitwarden_common_admin_console_enums__WEBPACK_IMPORTED_MODULE_4__.OrganizationUserStatusType.Accepted,
                    _bitwarden_common_admin_console_enums__WEBPACK_IMPORTED_MODULE_4__.OrganizationUserStatusType.Confirmed,
                ].includes(user.status)).length;
                const remainingSeats = this.userOrg.seats - userCount;
                const seatsRemaining = this.i18nService.t("seatsRemaining", remainingSeats.toString(), this.userOrg.seats.toString());
                this.resellerSeatsRemainingMessage = seatsRemaining;
            }
        });
    }
    ngOnDestroy() {
        this.destroy$.next();
        this.destroy$.complete();
    }
    load() {
        return __awaiter(this, void 0, void 0, function* () {
            var _a, _b, _c, _d, _e, _f, _g, _h, _j;
            this.loading = true;
            this.locale = yield (0,rxjs__WEBPACK_IMPORTED_MODULE_28__.firstValueFrom)(this.i18nService.locale$);
            const userId = yield (0,rxjs__WEBPACK_IMPORTED_MODULE_28__.firstValueFrom)((0,_bitwarden_common_auth_services_account_service__WEBPACK_IMPORTED_MODULE_6__.getUserId)(this.accountService.activeAccount$));
            this.userOrg = yield (0,rxjs__WEBPACK_IMPORTED_MODULE_28__.firstValueFrom)(this.organizationService
                .organizations$(userId)
                .pipe((0,_bitwarden_common_admin_console_abstractions_organization_organization_service_abstraction__WEBPACK_IMPORTED_MODULE_3__.getOrganizationById)(this.organizationId)));
            const isIndependentOrganizationOwner = !this.userOrg.hasProvider && this.userOrg.isOwner;
            const isResoldOrganizationOwner = this.userOrg.hasReseller && this.userOrg.isOwner;
            const isMSPUser = this.userOrg.hasProvider && this.userOrg.isProviderUser;
            this.organizationIsManagedByConsolidatedBillingMSP =
                this.userOrg.hasProvider && this.userOrg.hasBillableProvider;
            this.showSubscription =
                isIndependentOrganizationOwner ||
                    isResoldOrganizationOwner ||
                    (isMSPUser && !this.organizationIsManagedByConsolidatedBillingMSP);
            this.showSelfHost =
                this.userOrg.productTierType === _bitwarden_common_billing_enums__WEBPACK_IMPORTED_MODULE_8__.ProductTierType.Families ||
                    this.userOrg.productTierType === _bitwarden_common_billing_enums__WEBPACK_IMPORTED_MODULE_8__.ProductTierType.Enterprise;
            if (this.showSubscription) {
                this.sub = yield this.organizationApiService.getSubscription(this.organizationId);
                this.lineItems = (_b = (_a = this.sub) === null || _a === void 0 ? void 0 : _a.subscription) === null || _b === void 0 ? void 0 : _b.items;
                if (this.lineItems && this.lineItems.length) {
                    this.lineItems = this.lineItems
                        .map((item) => {
                        var _a, _b;
                        const itemTotalAmount = item.amount * item.quantity;
                        const seatPriceTotal = ((_b = (_a = this.sub.plan) === null || _a === void 0 ? void 0 : _a.SecretsManager) === null || _b === void 0 ? void 0 : _b.seatPrice) * item.quantity;
                        item.productName =
                            itemTotalAmount === seatPriceTotal || item.name.includes("Service Accounts")
                                ? "secretsManager"
                                : "passwordManager";
                        return item;
                    })
                        .sort(sortSubscriptionItems);
                }
                if (((_d = (_c = this.sub) === null || _c === void 0 ? void 0 : _c.customerDiscount) === null || _d === void 0 ? void 0 : _d.percentOff) == 100) {
                    this.lineItems.reverse();
                }
            }
            const apiKeyResponse = yield this.organizationApiService.getApiKeyInformation(this.organizationId);
            this.hasBillingSyncToken = apiKeyResponse.data.some((i) => i.keyType === _bitwarden_common_admin_console_enums__WEBPACK_IMPORTED_MODULE_4__.OrganizationApiKeyType.BillingSync);
            this.showSecretsManagerSubscribe =
                this.userOrg.canEditSubscription &&
                    !this.userOrg.hasProvider &&
                    ((_f = (_e = this.sub) === null || _e === void 0 ? void 0 : _e.plan) === null || _f === void 0 ? void 0 : _f.SecretsManager) &&
                    !this.userOrg.useSecretsManager &&
                    !((_g = this.subscription) === null || _g === void 0 ? void 0 : _g.cancelled) &&
                    !this.subscriptionMarkedForCancel;
            this.showAdjustSecretsManager =
                this.userOrg.canEditSubscription &&
                    this.userOrg.useSecretsManager &&
                    this.subscription != null &&
                    ((_j = (_h = this.sub.plan) === null || _h === void 0 ? void 0 : _h.SecretsManager) === null || _j === void 0 ? void 0 : _j.hasAdditionalSeatsOption) &&
                    !this.subscription.cancelled &&
                    !this.subscriptionMarkedForCancel;
            this.loading = false;
        });
    }
    get subscription() {
        return this.sub != null ? this.sub.subscription : null;
    }
    get subscriptionLineItems() {
        return this.lineItems.map((lineItem) => ({
            name: lineItem.name,
            amount: this.discountPrice(lineItem.amount, lineItem.productId),
            quantity: lineItem.quantity,
            interval: lineItem.interval,
            sponsoredSubscriptionItem: lineItem.sponsoredSubscriptionItem,
            addonSubscriptionItem: lineItem.addonSubscriptionItem,
            productName: lineItem.productName,
            productId: lineItem.productId,
        }));
    }
    get nextInvoice() {
        return this.sub != null ? this.sub.upcomingInvoice : null;
    }
    get customerDiscount() {
        return this.sub != null ? this.sub.customerDiscount : null;
    }
    get isExpired() {
        const nextInvoice = this.nextInvoice;
        if (nextInvoice == null) {
            return false;
        }
        return new Date(nextInvoice.date).getTime() < Date.now();
    }
    get storagePercentage() {
        return this.sub != null && this.sub.maxStorageGb
            ? +(100 * (this.sub.storageGb / this.sub.maxStorageGb)).toFixed(2)
            : 0;
    }
    get billingInterval() {
        const monthly = !this.sub.plan.isAnnual;
        return monthly ? "month" : "year";
    }
    get storageGbPrice() {
        return this.sub.plan.PasswordManager.additionalStoragePricePerGb;
    }
    get seatPrice() {
        return this.discountPrice(this.sub.plan.PasswordManager.seatPrice);
    }
    get seats() {
        return this.sub.seats;
    }
    get smOptions() {
        return {
            seatCount: this.sub.smSeats,
            maxAutoscaleSeats: this.sub.maxAutoscaleSmSeats,
            seatPrice: this.sub.plan.SecretsManager.seatPrice,
            maxAutoscaleServiceAccounts: this.sub.maxAutoscaleSmServiceAccounts,
            additionalServiceAccounts: this.sub.smServiceAccounts - this.sub.plan.SecretsManager.baseServiceAccount,
            interval: this.sub.plan.isAnnual ? "year" : "month",
            additionalServiceAccountPrice: this.sub.plan.SecretsManager.additionalPricePerServiceAccount,
            baseServiceAccountCount: this.sub.plan.SecretsManager.baseServiceAccount,
        };
    }
    get maxAutoscaleSeats() {
        return this.sub.maxAutoscaleSeats;
    }
    get canAdjustSeats() {
        return this.sub.plan.PasswordManager.hasAdditionalSeatsOption;
    }
    get isSponsoredSubscription() {
        var _a;
        return (_a = this.sub.subscription) === null || _a === void 0 ? void 0 : _a.items.some((i) => i.sponsoredSubscriptionItem);
    }
    get subscriptionDesc() {
        if (this.sub.planType === _bitwarden_common_billing_enums__WEBPACK_IMPORTED_MODULE_8__.PlanType.Free) {
            return this.i18nService.t("subscriptionFreePlan", this.sub.seats.toString());
        }
        else if (this.sub.planType === _bitwarden_common_billing_enums__WEBPACK_IMPORTED_MODULE_8__.PlanType.FamiliesAnnually ||
            this.sub.planType === _bitwarden_common_billing_enums__WEBPACK_IMPORTED_MODULE_8__.PlanType.FamiliesAnnually2019 ||
            this.sub.planType === _bitwarden_common_billing_enums__WEBPACK_IMPORTED_MODULE_8__.PlanType.TeamsStarter2023 ||
            this.sub.planType === _bitwarden_common_billing_enums__WEBPACK_IMPORTED_MODULE_8__.PlanType.TeamsStarter) {
            if (this.isSponsoredSubscription) {
                return this.i18nService.t("subscriptionSponsoredFamiliesPlan", this.sub.seats.toString());
            }
            else {
                return this.i18nService.t("subscriptionUpgrade", this.sub.seats.toString());
            }
        }
        else if (this.sub.maxAutoscaleSeats === this.sub.seats && this.sub.seats != null) {
            const seatAdjustmentMessage = this.sub.plan.isAnnual
                ? "annualSubscriptionUserSeatsMessage"
                : "monthlySubscriptionUserSeatsMessage";
            return this.i18nService.t(seatAdjustmentMessage + "subscriptionSeatMaxReached", this.sub.seats.toString());
        }
        else if (this.userOrg.productTierType === _bitwarden_common_billing_enums__WEBPACK_IMPORTED_MODULE_8__.ProductTierType.TeamsStarter) {
            return this.i18nService.t("subscriptionUserSeatsWithoutAdditionalSeatsOption", 10);
        }
        else if (this.sub.maxAutoscaleSeats == null) {
            const seatAdjustmentMessage = this.sub.plan.isAnnual
                ? "annualSubscriptionUserSeatsMessage"
                : "monthlySubscriptionUserSeatsMessage";
            return this.i18nService.t(seatAdjustmentMessage);
        }
        else {
            const seatAdjustmentMessage = this.sub.plan.isAnnual
                ? "annualSubscriptionUserSeatsMessage"
                : "monthlySubscriptionUserSeatsMessage";
            return this.i18nService.t(seatAdjustmentMessage, this.sub.maxAutoscaleSeats.toString());
        }
    }
    get subscriptionMarkedForCancel() {
        return (this.subscription != null && !this.subscription.cancelled && this.subscription.cancelAtEndDate);
    }
    changePlan() {
        return __awaiter(this, void 0, void 0, function* () {
            const reference = (0,_change_plan_dialog_component__WEBPACK_IMPORTED_MODULE_15__.openChangePlanDialog)(this.dialogService, {
                data: {
                    organizationId: this.organizationId,
                    subscription: this.sub,
                    productTierType: this.userOrg.productTierType,
                },
            });
            const result = yield (0,rxjs__WEBPACK_IMPORTED_MODULE_27__.lastValueFrom)(reference.closed);
            if (result === _change_plan_dialog_component__WEBPACK_IMPORTED_MODULE_15__.ChangePlanDialogResultType.Closed) {
                return;
            }
            yield this.load();
        });
    }
    isSecretsManagerTrial() {
        var _a, _b, _c, _d;
        return ((_d = (_c = (_b = (_a = this.sub) === null || _a === void 0 ? void 0 : _a.subscription) === null || _b === void 0 ? void 0 : _b.items) === null || _c === void 0 ? void 0 : _c.some((item) => { var _a, _b, _c; return (_c = (_b = (_a = this.sub) === null || _a === void 0 ? void 0 : _a.customerDiscount) === null || _b === void 0 ? void 0 : _b.appliesTo) === null || _c === void 0 ? void 0 : _c.includes(item.productId); })) !== null && _d !== void 0 ? _d : false);
    }
    closeChangePlan() {
        this.showChangePlan = false;
    }
    downloadLicense() {
        return __awaiter(this, void 0, void 0, function* () {
            _download_license_component__WEBPACK_IMPORTED_MODULE_16__.DownloadLicenceDialogComponent.open(this.dialogService, {
                data: {
                    organizationId: this.organizationId,
                },
            });
        });
    }
    manageBillingSync() {
        return __awaiter(this, void 0, void 0, function* () {
            const dialogRef = _billing_sync_api_key_component__WEBPACK_IMPORTED_MODULE_14__.BillingSyncApiKeyComponent.open(this.dialogService, {
                organizationId: this.organizationId,
                hasBillingToken: this.hasBillingSyncToken,
            });
            yield (0,rxjs__WEBPACK_IMPORTED_MODULE_28__.firstValueFrom)(dialogRef.closed);
            yield this.load();
        });
    }
    subscriptionAdjusted() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.load();
        });
    }
    calculateTotalAppliedDiscount(total) {
        var _a;
        return total / (1 - ((_a = this.customerDiscount) === null || _a === void 0 ? void 0 : _a.percentOff) / 100);
    }
    get showChangePlanButton() {
        var _a, _b;
        return ((!this.showChangePlan &&
            this.sub.plan.productTier !== _bitwarden_common_billing_enums__WEBPACK_IMPORTED_MODULE_8__.ProductTierType.Enterprise &&
            !((_a = this.sub.subscription) === null || _a === void 0 ? void 0 : _a.cancelled)) ||
            (((_b = this.sub.subscription) === null || _b === void 0 ? void 0 : _b.cancelled) && this.sub.plan.productTier === _bitwarden_common_billing_enums__WEBPACK_IMPORTED_MODULE_8__.ProductTierType.Free));
    }
    get canUseBillingSync() {
        return this.userOrg.productTierType === _bitwarden_common_billing_enums__WEBPACK_IMPORTED_MODULE_8__.ProductTierType.Enterprise;
    }
}
OrganizationSubscriptionCloudComponent.QUERY_PARAM_UPGRADE = "upgrade";
OrganizationSubscriptionCloudComponent.ROUTE_PARAM_ORGANIZATION_ID = "organizationId";
OrganizationSubscriptionCloudComponent.ɵfac = function OrganizationSubscriptionCloudComponent_Factory(__ngFactoryType__) { return new (__ngFactoryType__ || OrganizationSubscriptionCloudComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵdirectiveInject"](_bitwarden_common_abstractions_api_service__WEBPACK_IMPORTED_MODULE_1__.ApiService), _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵdirectiveInject"](_bitwarden_common_platform_abstractions_i18n_service__WEBPACK_IMPORTED_MODULE_10__.I18nService), _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵdirectiveInject"](_bitwarden_common_platform_abstractions_log_service__WEBPACK_IMPORTED_MODULE_11__.LogService), _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵdirectiveInject"](_bitwarden_common_admin_console_abstractions_organization_organization_service_abstraction__WEBPACK_IMPORTED_MODULE_3__.OrganizationService), _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵdirectiveInject"](_bitwarden_common_auth_abstractions_account_service__WEBPACK_IMPORTED_MODULE_5__.AccountService), _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵdirectiveInject"](_bitwarden_common_admin_console_abstractions_organization_organization_api_service_abstraction__WEBPACK_IMPORTED_MODULE_2__.OrganizationApiServiceAbstraction), _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_29__.ActivatedRoute), _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵdirectiveInject"](_bitwarden_components__WEBPACK_IMPORTED_MODULE_30__.DialogService), _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵdirectiveInject"](_bitwarden_common_platform_abstractions_config_config_service__WEBPACK_IMPORTED_MODULE_9__.ConfigService), _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵdirectiveInject"](_bitwarden_components__WEBPACK_IMPORTED_MODULE_31__.ToastService), _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵdirectiveInject"](_bitwarden_common_billing_abstractions__WEBPACK_IMPORTED_MODULE_7__.BillingApiServiceAbstraction), _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵdirectiveInject"](_bitwarden_admin_console_common__WEBPACK_IMPORTED_MODULE_0__.OrganizationUserApiService)); };
OrganizationSubscriptionCloudComponent.ɵcmp = /*@__PURE__*/ _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵdefineComponent"]({ type: OrganizationSubscriptionCloudComponent, selectors: [["ng-component"]], standalone: false, decls: 7, vars: 3, consts: [["hideSubscription", ""], ["setupSelfHost", ""], ["calculateElse", ""], ["organizationIsNotManagedByConsolidatedBillingMSP", ""], ["isOrganizationOwner", ""], [4, "ngIf"], [4, "ngIf", "ngIfElse"], [1, "bwi", "bwi-spinner", "bwi-spin", "tw-text-muted", 3, "title"], [1, "tw-sr-only"], [3, "organizationSubscriptionResponse", "reinstatementRequested", 4, "ngIf"], [4, "ngTemplateOutlet"], [3, "reinstatementRequested", "organizationSubscriptionResponse"], [1, "tw-flex-col"], [1, "tw-block", "tw-border-0", "tw-border-b", "tw-border-solid", "tw-border-secondary-300"], ["class", "tw-ml-3", "bitBadge", "", "variant", "success", 4, "ngIf"], ["body", ""], ["bitBadge", "", "variant", "success", 1, "tw-ml-3"], ["bitRow", "", 4, "ngFor", "ngForOf"], ["bitRow", ""], ["bitCell", "", 1, "tw-align-middle", 3, "ngClass"], ["bitCell", "", 1, "tw-text-right"], [1, "tw-flex", "tw-flex-col"], ["class", "tw-line-through !tw-text-muted", 4, "ngIf"], [1, "tw-line-through", "!tw-text-muted"], ["bitRow", "", 4, "ngIf"], ["bitCell", ""], [1, "tw-mt-5"], ["bitButton", "", "buttonType", "secondary", "type", "button", 3, "click", 4, "ngIf"], [3, "organizationId", "currentPlan", "preSelectedProductTier", "onChanged", "onCanceled", 4, "ngIf"], ["bitButton", "", "buttonType", "secondary", "type", "button", 3, "click"], [3, "onChanged", "onCanceled", "organizationId", "currentPlan", "preSelectedProductTier"], [1, "tw-mt-7"], [3, "onSubscribe", "plan", "organization", "customerDiscount"], ["bitTypography", "h2", 1, "tw-mt-7"], ["bitTypography", "body1", 4, "ngIf"], ["bitTypography", "body1"], ["bitButton", "", "buttonType", "danger", "type", "button", 3, "bitAction", 4, "ngIf"], ["href", "https://bitwarden.com/contact/", "target", "_blank", "rel", "noreferrer"], ["bitTypography", "h3", 1, "tw-mt-7"], [3, "onAdjusted", "seatPrice", "organizationId", "interval", "currentSeatCount", "maxAutoscaleSeats"], ["bitButton", "", "buttonType", "danger", "type", "button", 3, "bitAction"], ["bitTypography", "h4", 1, "tw-mt-9"], ["bgColor", "success", 3, "barWidth"], [1, "tw-mt-3"], [1, "tw-flex", "tw-space-x-2"], ["bitButton", "", "buttonType", "secondary", "type", "button", 3, "bitAction"], ["bitTypography", "h3", 1, "tw-mt-9"], [3, "onAdjusted", "organizationId", "options"], ["bitButton", "", "buttonType", "danger", "type", "button", 3, "click", 4, "ngIf"], ["bitButton", "", "buttonType", "danger", "type", "button", 3, "click"], ["bitTypography", "h2"], ["bitTypography", "body1", 4, "ngIf", "ngIfElse"], [3, "routerLink"], [1, "tw-flex", "tw-flex-col", "tw-items-center", "tw-text-info"], [1, "tw-size-56", "tw-content-center"], ["aria-hidden", "true", 3, "icon"], [1, "tw-font-bold"]], template: function OrganizationSubscriptionCloudComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵelement"](0, "app-header");
        _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtemplate"](1, OrganizationSubscriptionCloudComponent_ng_container_1_Template, 6, 6, "ng-container", 5)(2, OrganizationSubscriptionCloudComponent_bit_container_2_Template, 2, 1, "bit-container", 6)(3, OrganizationSubscriptionCloudComponent_ng_template_3_Template, 1, 1, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtemplateRefExtractor"])(5, OrganizationSubscriptionCloudComponent_ng_template_5_Template, 2, 2, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵtemplateRefExtractor"]);
    } if (rf & 2) {
        const hideSubscription_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵreference"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", ctx.loading);
        _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_24__["ɵɵproperty"]("ngIf", ctx.showSubscription)("ngIfElse", hideSubscription_r16);
    } }, dependencies: [_angular_router__WEBPACK_IMPORTED_MODULE_32__.RouterLink, _angular_common__WEBPACK_IMPORTED_MODULE_33__.NgClass, _angular_common__WEBPACK_IMPORTED_MODULE_33__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_33__.NgIf, _angular_common__WEBPACK_IMPORTED_MODULE_33__.NgTemplateOutlet, _libs_components_src_async_actions_bit_action_directive__WEBPACK_IMPORTED_MODULE_34__.BitActionDirective, _libs_components_src_badge_badge_component__WEBPACK_IMPORTED_MODULE_35__.BadgeComponent, _libs_components_src_button_button_component__WEBPACK_IMPORTED_MODULE_36__.ButtonComponent, _libs_components_src_container_container_component__WEBPACK_IMPORTED_MODULE_37__.ContainerComponent, _libs_components_src_icon_icon_component__WEBPACK_IMPORTED_MODULE_38__.BitIconComponent, _libs_components_src_progress_progress_component__WEBPACK_IMPORTED_MODULE_39__.ProgressComponent, _libs_components_src_table_cell_directive__WEBPACK_IMPORTED_MODULE_40__.CellDirective, _libs_components_src_table_row_directive__WEBPACK_IMPORTED_MODULE_41__.RowDirective, _libs_components_src_table_table_component__WEBPACK_IMPORTED_MODULE_42__.TableBodyDirective, _libs_components_src_table_table_component__WEBPACK_IMPORTED_MODULE_42__.TableComponent, _libs_components_src_typography_typography_directive__WEBPACK_IMPORTED_MODULE_43__.TypographyDirective, _layouts_header_web_header_component__WEBPACK_IMPORTED_MODULE_17__.WebHeaderComponent, _adjust_subscription_component__WEBPACK_IMPORTED_MODULE_18__.AdjustSubscription, _change_plan_component__WEBPACK_IMPORTED_MODULE_19__.ChangePlanComponent, _sm_adjust_subscription_component__WEBPACK_IMPORTED_MODULE_20__.SecretsManagerAdjustSubscriptionComponent, _sm_subscribe_standalone_component__WEBPACK_IMPORTED_MODULE_21__.SecretsManagerSubscribeStandaloneComponent, _subscription_status_component__WEBPACK_IMPORTED_MODULE_22__.SubscriptionStatusComponent, _angular_common__WEBPACK_IMPORTED_MODULE_33__.CurrencyPipe, _libs_angular_src_platform_pipes_i18n_pipe__WEBPACK_IMPORTED_MODULE_23__.I18nPipe], encapsulation: 2 });
/**
 * Helper to sort subscription items by productTier type and then by addon status
 */
function sortSubscriptionItems(a, b) {
    if (a.productName == b.productName) {
        if (a.addonSubscriptionItem == b.addonSubscriptionItem) {
            return 0;
        }
        // sort addon items to the bottom
        if (a.addonSubscriptionItem) {
            return 1;
        }
        return -1;
    }
    return a.productName.localeCompare(b.productName);
}


/***/ }),

/***/ "./src/app/billing/organizations/organization-subscription-selfhost.component.ts":
/*!***************************************************************************************!*\
  !*** ./src/app/billing/organizations/organization-subscription-selfhost.component.ts ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OrganizationSubscriptionSelfhostComponent: () => (/* binding */ OrganizationSubscriptionSelfhostComponent)
/* harmony export */ });
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @angular/forms */ "../../node_modules/@angular/forms/fesm2022/forms.mjs");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/Subject.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/operators/concatMap.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js");
/* harmony import */ var _bitwarden_common_abstractions_api_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bitwarden/common/abstractions/api.service */ "../../libs/common/src/abstractions/api.service.ts");
/* harmony import */ var _bitwarden_common_admin_console_abstractions_organization_organization_api_service_abstraction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bitwarden/common/admin-console/abstractions/organization/organization-api.service.abstraction */ "../../libs/common/src/admin-console/abstractions/organization/organization-api.service.abstraction.ts");
/* harmony import */ var _bitwarden_common_admin_console_abstractions_organization_organization_service_abstraction__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction */ "../../libs/common/src/admin-console/abstractions/organization/organization.service.abstraction.ts");
/* harmony import */ var _bitwarden_common_admin_console_enums__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bitwarden/common/admin-console/enums */ "../../libs/common/src/admin-console/enums/index.ts");
/* harmony import */ var _bitwarden_common_auth_abstractions_account_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bitwarden/common/auth/abstractions/account.service */ "../../libs/common/src/auth/abstractions/account.service.ts");
/* harmony import */ var _bitwarden_common_auth_services_account_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bitwarden/common/auth/services/account.service */ "../../libs/common/src/auth/services/account.service.ts");
/* harmony import */ var _bitwarden_common_billing_enums__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @bitwarden/common/billing/enums */ "../../libs/common/src/billing/enums/index.ts");
/* harmony import */ var _bitwarden_common_billing_models_api_billing_sync_config_api__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @bitwarden/common/billing/models/api/billing-sync-config.api */ "../../libs/common/src/billing/models/api/billing-sync-config.api.ts");
/* harmony import */ var _bitwarden_common_billing_models_view_self_hosted_organization_subscription_view__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @bitwarden/common/billing/models/view/self-hosted-organization-subscription.view */ "../../libs/common/src/billing/models/view/self-hosted-organization-subscription.view.ts");
/* harmony import */ var _bitwarden_common_platform_abstractions_environment_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @bitwarden/common/platform/abstractions/environment.service */ "../../libs/common/src/platform/abstractions/environment.service.ts");
/* harmony import */ var _bitwarden_common_platform_abstractions_i18n_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @bitwarden/common/platform/abstractions/i18n.service */ "../../libs/common/src/platform/abstractions/i18n.service.ts");
/* harmony import */ var _bitwarden_common_platform_abstractions_messaging_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @bitwarden/common/platform/abstractions/messaging.service */ "../../libs/common/src/platform/abstractions/messaging.service.ts");
/* harmony import */ var _bitwarden_common_platform_abstractions_platform_utils_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @bitwarden/common/platform/abstractions/platform-utils.service */ "../../libs/common/src/platform/abstractions/platform-utils.service.ts");
/* harmony import */ var _billing_sync_key_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./billing-sync-key.component */ "./src/app/billing/organizations/billing-sync-key.component.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/fesm2022/core.mjs");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @angular/router */ "../../node_modules/@angular/router/fesm2022/router-Dwfin5Au.mjs");
/* harmony import */ var _bitwarden_components__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @bitwarden/components */ "../../libs/components/src/dialog/dialog.service.ts");
/* harmony import */ var _bitwarden_components__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @bitwarden/components */ "../../libs/components/src/toast/toast.service.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @angular/common */ "../../node_modules/@angular/common/fesm2022/common_module-Dx7dWex5.mjs");
/* harmony import */ var _libs_components_src_a11y_a11y_title_directive__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../../../../../../libs/components/src/a11y/a11y-title.directive */ "../../libs/components/src/a11y/a11y-title.directive.ts");
/* harmony import */ var _libs_components_src_async_actions_bit_action_directive__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../../../../../../libs/components/src/async-actions/bit-action.directive */ "../../libs/components/src/async-actions/bit-action.directive.ts");
/* harmony import */ var _libs_components_src_button_button_component__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../../../../../../libs/components/src/button/button.component */ "../../libs/components/src/button/button.component.ts");
/* harmony import */ var _libs_components_src_container_container_component__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../../../../../../libs/components/src/container/container.component */ "../../libs/components/src/container/container.component.ts");
/* harmony import */ var _libs_components_src_form_control_label_component__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../../../../../../libs/components/src/form-control/label.component */ "../../libs/components/src/form-control/label.component.ts");
/* harmony import */ var _libs_components_src_form_control_hint_component__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ../../../../../../libs/components/src/form-control/hint.component */ "../../libs/components/src/form-control/hint.component.ts");
/* harmony import */ var _libs_components_src_link_link_directive__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ../../../../../../libs/components/src/link/link.directive */ "../../libs/components/src/link/link.directive.ts");
/* harmony import */ var _libs_components_src_radio_button_radio_button_component__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ../../../../../../libs/components/src/radio-button/radio-button.component */ "../../libs/components/src/radio-button/radio-button.component.ts");
/* harmony import */ var _libs_components_src_radio_button_radio_group_component__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ../../../../../../libs/components/src/radio-button/radio-group.component */ "../../libs/components/src/radio-button/radio-group.component.ts");
/* harmony import */ var _shared_update_license_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../shared/update-license.component */ "./src/app/billing/shared/update-license.component.ts");
/* harmony import */ var _layouts_header_web_header_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../layouts/header/web-header.component */ "./src/app/layouts/header/web-header.component.ts");
/* harmony import */ var _subscription_hidden_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./subscription-hidden.component */ "./src/app/billing/organizations/subscription-hidden.component.ts");
/* harmony import */ var _libs_angular_src_platform_pipes_i18n_pipe__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../../../libs/angular/src/platform/pipes/i18n.pipe */ "../../libs/angular/src/platform/pipes/i18n.pipe.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};












































const _c0 = a0 => ({ "tw-text-danger": a0 });
function OrganizationSubscriptionSelfhostComponent_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelement"](1, "i", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](2, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](3, "span", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](5, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpropertyInterpolate"]("title", _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind1"](2, 2, "loading"));
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind1"](5, 4, "loading"));
} }
function OrganizationSubscriptionSelfhostComponent_app_org_subscription_hidden_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelement"](0, "app-org-subscription-hidden", 4);
} if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵproperty"]("providerName", ctx_r0.userOrg.providerName);
} }
function OrganizationSubscriptionSelfhostComponent_ng_container_4_ng_container_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](1, "dt");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](3, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](4, "dd");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](6, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](7, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind1"](3, 2, "lastLicenseSync"));
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtextInterpolate1"](" ", ctx_r0.lastLicenseSync != null ? _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind2"](6, 4, ctx_r0.lastLicenseSync, "medium") : _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind1"](7, 7, "never"), " ");
} }
function OrganizationSubscriptionSelfhostComponent_ng_container_4_dd_18_div_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](0, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](2, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](3, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind2"](3, 4, "selfHostGracePeriodHelp", _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind2"](2, 1, ctx_r0.subscription.expirationWithGracePeriod, "mediumDate")), " ");
} }
function OrganizationSubscriptionSelfhostComponent_ng_container_4_dd_18_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](0, "dd", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](2, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtemplate"](3, OrganizationSubscriptionSelfhostComponent_ng_container_4_dd_18_div_3_Template, 4, 7, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpureFunction1"](6, _c0, ctx_r0.showAsExpired));
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind2"](2, 3, ctx_r0.subscription.hasSeparateGracePeriod ? ctx_r0.subscription.expirationWithoutGracePeriod : ctx_r0.subscription.expirationWithGracePeriod, "mediumDate"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵproperty"]("ngIf", ctx_r0.subscription.hasSeparateGracePeriod && !ctx_r0.subscription.isInTrial);
} }
function OrganizationSubscriptionSelfhostComponent_ng_container_4_dd_19_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](0, "dd");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](2, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind1"](2, 1, "neverExpires"));
} }
function OrganizationSubscriptionSelfhostComponent_ng_container_4_bit_radio_button_28_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](0, "bit-radio-button", 18)(1, "bit-label");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](3, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](4, "a", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelement"](5, "i", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](6, "span", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtext"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](8, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](9, "bit-hint");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtext"](10);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](11, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementEnd"]()();
} if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵproperty"]("value", ctx_r0.licenseOptions.SYNC)("disabled", ctx_r0.disableLicenseSyncControl);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtextInterpolate1"]("", _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind1"](3, 5, "automaticSync"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind1"](8, 7, "billingSyncHelp"));
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind1"](11, 9, "automaticBillingSyncDesc"), " ");
} }
function OrganizationSubscriptionSelfhostComponent_ng_container_4_ng_container_29_Template(rf, ctx) { if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](1, "div", 20)(2, "button", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵlistener"]("click", function OrganizationSubscriptionSelfhostComponent_ng_container_4_ng_container_29_Template_button_click_2_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵrestoreView"](_r2); const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵnextContext"](2); return _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵresetView"](ctx_r0.manageBillingSyncSelfHosted()); });
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](4, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](5, "button", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](7, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind1"](4, 4, "manageBillingTokenSync"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵproperty"]("bitAction", ctx_r0.syncLicense)("disabled", !ctx_r0.billingSyncEnabled);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind1"](7, 6, "syncLicense"), " ");
} }
function OrganizationSubscriptionSelfhostComponent_ng_container_4_bit_radio_button_30_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](0, "bit-radio-button", 23)(1, "bit-label");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](3, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](4, "bit-hint");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](6, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementEnd"]()();
} if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵproperty"]("value", ctx_r0.licenseOptions.UPLOAD);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind1"](3, 3, "manualUpload"));
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind1"](6, 5, "manualBillingTokenUploadDesc"), " ");
} }
function OrganizationSubscriptionSelfhostComponent_ng_container_4_ng_container_31_bit_label_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](0, "bit-label", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](2, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind1"](2, 1, "licenseAndBillingManagementDesc"), " ");
} }
function OrganizationSubscriptionSelfhostComponent_ng_container_4_ng_container_31_h3_2_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](0, "h3", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](2, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind1"](2, 1, "uploadLicense"), " ");
} }
function OrganizationSubscriptionSelfhostComponent_ng_container_4_ng_container_31_Template(rf, ctx) { if (rf & 1) {
    const _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtemplate"](1, OrganizationSubscriptionSelfhostComponent_ng_container_4_ng_container_31_bit_label_1_Template, 3, 3, "bit-label", 24)(2, OrganizationSubscriptionSelfhostComponent_ng_container_4_ng_container_31_h3_2_Template, 3, 3, "h3", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](3, "app-update-license", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵlistener"]("onUpdated", function OrganizationSubscriptionSelfhostComponent_ng_container_4_ng_container_31_Template_app_update_license_onUpdated_3_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵrestoreView"](_r3); const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵnextContext"](2); return _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵresetView"](ctx_r0.licenseUploaded()); });
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵproperty"]("ngIf", !ctx_r0.showAutomaticSyncAndManualUpload);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵproperty"]("ngIf", ctx_r0.showAutomaticSyncAndManualUpload);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵproperty"]("showAutomaticSyncAndManualUpload", ctx_r0.showAutomaticSyncAndManualUpload)("organizationId", ctx_r0.organizationId)("showCancel", false);
} }
function OrganizationSubscriptionSelfhostComponent_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](1, "dl", 5)(2, "dt");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](4, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](5, "dd");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtemplate"](7, OrganizationSubscriptionSelfhostComponent_ng_container_4_ng_container_7_Template, 8, 9, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](8, "dt")(9, "span", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtext"](10);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](11, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](12, "a", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](13, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelement"](14, "i", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](15, "span", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtext"](16);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](17, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtemplate"](18, OrganizationSubscriptionSelfhostComponent_ng_container_4_dd_18_Template, 4, 8, "dd", 9)(19, OrganizationSubscriptionSelfhostComponent_ng_container_4_dd_19_Template, 3, 3, "dd", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](20, "a", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtext"](21);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](22, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](23, "form", 11)(24, "bit-radio-group", 12)(25, "h2", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtext"](26);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](27, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtemplate"](28, OrganizationSubscriptionSelfhostComponent_ng_container_4_bit_radio_button_28_Template, 12, 11, "bit-radio-button", 14)(29, OrganizationSubscriptionSelfhostComponent_ng_container_4_ng_container_29_Template, 8, 8, "ng-container", 0)(30, OrganizationSubscriptionSelfhostComponent_ng_container_4_bit_radio_button_30_Template, 7, 7, "bit-radio-button", 15)(31, OrganizationSubscriptionSelfhostComponent_ng_container_4_ng_container_31_Template, 4, 5, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind1"](4, 18, "billingPlan"));
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtextInterpolate"](ctx_r0.subscription.planName);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵproperty"]("ngIf", ctx_r0.billingSyncSetUp);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpureFunction1"](30, _c0, ctx_r0.showAsExpired));
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind1"](11, 20, "subscriptionExpiration"));
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵproperty"]("appA11yTitle", _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind1"](13, 22, "licensePaidFeaturesHelp"));
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind1"](17, 24, "licensePaidFeaturesHelp"));
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵproperty"]("ngIf", ctx_r0.subscription.hasExpiration);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵproperty"]("ngIf", !ctx_r0.subscription.hasExpiration);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpropertyInterpolate"]("href", ctx_r0.cloudWebVaultUrl, _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵsanitizeUrl"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind1"](22, 26, "launchCloudSubscription"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵproperty"]("formGroup", ctx_r0.form);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵproperty"]("block", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind1"](27, 28, "licenseAndBillingManagement"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵproperty"]("ngIf", ctx_r0.showAutomaticSyncAndManualUpload);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵproperty"]("ngIf", ctx_r0.updateMethod === ctx_r0.licenseOptions.SYNC);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵproperty"]("ngIf", ctx_r0.showAutomaticSyncAndManualUpload);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵproperty"]("ngIf", ctx_r0.updateMethod === ctx_r0.licenseOptions.UPLOAD);
} }
// FIXME: update to use a const object instead of a typescript enum
// eslint-disable-next-line @bitwarden/platform/no-enums
var LicenseOptions;
(function (LicenseOptions) {
    LicenseOptions[LicenseOptions["SYNC"] = 0] = "SYNC";
    LicenseOptions[LicenseOptions["UPLOAD"] = 1] = "UPLOAD";
})(LicenseOptions || (LicenseOptions = {}));
class OrganizationSubscriptionSelfhostComponent {
    set existingBillingSyncConnection(value) {
        this._existingBillingSyncConnection = value;
        this.form
            .get("updateMethod")
            .setValue(this.billingSyncEnabled ? LicenseOptions.SYNC : LicenseOptions.UPLOAD);
    }
    get existingBillingSyncConnection() {
        return this._existingBillingSyncConnection;
    }
    get billingSyncEnabled() {
        var _a;
        return (_a = this.existingBillingSyncConnection) === null || _a === void 0 ? void 0 : _a.enabled;
    }
    /**
     * Render the subscription as expired.
     */
    get showAsExpired() {
        return this.subscription.hasSeparateGracePeriod
            ? this.subscription.isExpiredWithoutGracePeriod
            : this.subscription.isExpiredAndOutsideGracePeriod;
    }
    constructor(messagingService, apiService, organizationService, accountService, route, organizationApiService, platformUtilsService, i18nService, environmentService, dialogService, toastService) {
        this.messagingService = messagingService;
        this.apiService = apiService;
        this.organizationService = organizationService;
        this.accountService = accountService;
        this.route = route;
        this.organizationApiService = organizationApiService;
        this.platformUtilsService = platformUtilsService;
        this.i18nService = i18nService;
        this.environmentService = environmentService;
        this.dialogService = dialogService;
        this.toastService = toastService;
        this.licenseOptions = LicenseOptions;
        this.form = new _angular_forms__WEBPACK_IMPORTED_MODULE_19__.FormGroup({
            updateMethod: new _angular_forms__WEBPACK_IMPORTED_MODULE_19__.FormControl(LicenseOptions.UPLOAD),
        });
        this.disableLicenseSyncControl = false;
        this.firstLoaded = false;
        this.loading = false;
        this.destroy$ = new rxjs__WEBPACK_IMPORTED_MODULE_20__.Subject();
        this.syncLicense = () => __awaiter(this, void 0, void 0, function* () {
            this.form.get("updateMethod").setValue(LicenseOptions.SYNC);
            yield this.organizationApiService.selfHostedSyncLicense(this.organizationId);
            // FIXME: Verify that this floating promise is intentional. If it is, add an explanatory comment and ensure there is proper error handling.
            // eslint-disable-next-line @typescript-eslint/no-floating-promises
            this.load();
            yield this.loadOrganizationConnection();
            this.messagingService.send("updatedOrgLicense");
            this.toastService.showToast({
                variant: "success",
                title: null,
                message: this.i18nService.t("licenseSyncSuccess"),
            });
        });
    }
    ngOnInit() {
        return __awaiter(this, void 0, void 0, function* () {
            this.cloudWebVaultUrl = yield (0,rxjs__WEBPACK_IMPORTED_MODULE_21__.firstValueFrom)(this.environmentService.cloudWebVaultUrl$);
            this.route.params
                .pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_22__.concatMap)((params) => __awaiter(this, void 0, void 0, function* () {
                this.organizationId = params.organizationId;
                yield this.load();
                yield this.loadOrganizationConnection();
                this.firstLoaded = true;
            })), (0,rxjs__WEBPACK_IMPORTED_MODULE_23__.takeUntil)(this.destroy$))
                .subscribe();
        });
    }
    ngOnDestroy() {
        this.destroy$.next();
        this.destroy$.complete();
    }
    load() {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.loading) {
                return;
            }
            this.loading = true;
            const userId = yield (0,rxjs__WEBPACK_IMPORTED_MODULE_21__.firstValueFrom)((0,_bitwarden_common_auth_services_account_service__WEBPACK_IMPORTED_MODULE_5__.getUserId)(this.accountService.activeAccount$));
            this.userOrg = yield (0,rxjs__WEBPACK_IMPORTED_MODULE_21__.firstValueFrom)(this.organizationService
                .organizations$(userId)
                .pipe((0,_bitwarden_common_admin_console_abstractions_organization_organization_service_abstraction__WEBPACK_IMPORTED_MODULE_2__.getOrganizationById)(this.organizationId)));
            this.showAutomaticSyncAndManualUpload =
                this.userOrg.productTierType == _bitwarden_common_billing_enums__WEBPACK_IMPORTED_MODULE_6__.ProductTierType.Families ? false : true;
            if (this.userOrg.canViewSubscription) {
                const subscriptionResponse = yield this.organizationApiService.getSubscription(this.organizationId);
                this.subscription = new _bitwarden_common_billing_models_view_self_hosted_organization_subscription_view__WEBPACK_IMPORTED_MODULE_8__.SelfHostedOrganizationSubscriptionView(subscriptionResponse);
            }
            this.loading = false;
        });
    }
    loadOrganizationConnection() {
        return __awaiter(this, void 0, void 0, function* () {
            if (!this.firstLoaded) {
                const cloudCommunicationEnabled = yield this.apiService.getCloudCommunicationsEnabled();
                this.disableLicenseSyncControl = !cloudCommunicationEnabled;
            }
            if (this.disableLicenseSyncControl) {
                return;
            }
            this.existingBillingSyncConnection = yield this.apiService.getOrganizationConnection(this.organizationId, _bitwarden_common_admin_console_enums__WEBPACK_IMPORTED_MODULE_3__.OrganizationConnectionType.CloudBillingSync, _bitwarden_common_billing_models_api_billing_sync_config_api__WEBPACK_IMPORTED_MODULE_7__.BillingSyncConfigApi);
        });
    }
    licenseUploaded() {
        // FIXME: Verify that this floating promise is intentional. If it is, add an explanatory comment and ensure there is proper error handling.
        // eslint-disable-next-line @typescript-eslint/no-floating-promises
        this.load();
        this.messagingService.send("updatedOrgLicense");
    }
    manageBillingSyncSelfHosted() {
        var _a, _b, _c;
        _billing_sync_key_component__WEBPACK_IMPORTED_MODULE_13__.BillingSyncKeyComponent.open(this.dialogService, {
            entityId: this.organizationId,
            existingConnectionId: (_a = this.existingBillingSyncConnection) === null || _a === void 0 ? void 0 : _a.id,
            billingSyncKey: (_c = (_b = this.existingBillingSyncConnection) === null || _b === void 0 ? void 0 : _b.config) === null || _c === void 0 ? void 0 : _c.billingSyncKey,
            setParentConnection: (connection) => {
                this.existingBillingSyncConnection = connection;
            },
        });
    }
    get billingSyncSetUp() {
        var _a;
        return ((_a = this.existingBillingSyncConnection) === null || _a === void 0 ? void 0 : _a.id) != null;
    }
    get updateMethod() {
        return this.form.get("updateMethod").value;
    }
    get lastLicenseSync() {
        var _a, _b;
        return (_b = (_a = this.existingBillingSyncConnection) === null || _a === void 0 ? void 0 : _a.config) === null || _b === void 0 ? void 0 : _b.lastLicenseSync;
    }
}
OrganizationSubscriptionSelfhostComponent.ɵfac = function OrganizationSubscriptionSelfhostComponent_Factory(__ngFactoryType__) { return new (__ngFactoryType__ || OrganizationSubscriptionSelfhostComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵdirectiveInject"](_bitwarden_common_platform_abstractions_messaging_service__WEBPACK_IMPORTED_MODULE_11__.MessagingService), _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵdirectiveInject"](_bitwarden_common_abstractions_api_service__WEBPACK_IMPORTED_MODULE_0__.ApiService), _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵdirectiveInject"](_bitwarden_common_admin_console_abstractions_organization_organization_service_abstraction__WEBPACK_IMPORTED_MODULE_2__.OrganizationService), _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵdirectiveInject"](_bitwarden_common_auth_abstractions_account_service__WEBPACK_IMPORTED_MODULE_4__.AccountService), _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_24__.ActivatedRoute), _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵdirectiveInject"](_bitwarden_common_admin_console_abstractions_organization_organization_api_service_abstraction__WEBPACK_IMPORTED_MODULE_1__.OrganizationApiServiceAbstraction), _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵdirectiveInject"](_bitwarden_common_platform_abstractions_platform_utils_service__WEBPACK_IMPORTED_MODULE_12__.PlatformUtilsService), _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵdirectiveInject"](_bitwarden_common_platform_abstractions_i18n_service__WEBPACK_IMPORTED_MODULE_10__.I18nService), _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵdirectiveInject"](_bitwarden_common_platform_abstractions_environment_service__WEBPACK_IMPORTED_MODULE_9__.EnvironmentService), _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵdirectiveInject"](_bitwarden_components__WEBPACK_IMPORTED_MODULE_25__.DialogService), _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵdirectiveInject"](_bitwarden_components__WEBPACK_IMPORTED_MODULE_26__.ToastService)); };
OrganizationSubscriptionSelfhostComponent.ɵcmp = /*@__PURE__*/ _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵdefineComponent"]({ type: OrganizationSubscriptionSelfhostComponent, selectors: [["ng-component"]], standalone: false, decls: 5, vars: 3, consts: [[4, "ngIf"], [3, "providerName", 4, "ngIf"], [1, "bwi", "bwi-spinner", "bwi-spin", "tw-text-muted", 3, "title"], [1, "tw-sr-only"], [3, "providerName"], [1, "tw-mb-2"], [3, "ngClass"], ["href", "https://bitwarden.com/help/licensing-on-premise/#update-organization-license", "target", "_blank", "rel", "noreferrer", 3, "appA11yTitle"], ["aria-hidden", "true", 1, "bwi", "bwi-question-circle"], [3, "ngClass", 4, "ngIf"], ["bitButton", "", "buttonType", "secondary", "target", "_blank", "rel", "noreferrer", 1, "tw-mb-4", 3, "href"], [3, "formGroup"], ["formControlName", "updateMethod", 3, "block"], [1, "tw-mt-5"], ["id", "automatic-sync", 3, "value", "disabled", 4, "ngIf"], ["id", "manual-upload", "class", "tw-mt-6", 3, "value", 4, "ngIf"], ["class", "tw-text-muted tw-break-words tw-whitespace-normal tw-max-w-fit tw-inline-block", 4, "ngIf"], [1, "tw-text-muted", "tw-break-words", "tw-whitespace-normal", "tw-max-w-fit", "tw-inline-block"], ["id", "automatic-sync", 3, "value", "disabled"], ["href", "https://bitwarden.com/help/families-for-enterprise-self-hosted/", "target", "_blank", "rel", "noreferrer", "slot", "end", "bitLink", ""], [1, "tw-mt-6", "tw-flex", "tw-gap-2"], ["bitButton", "", "buttonType", "secondary", "type", "button", 3, "click"], ["bitButton", "", "buttonType", "primary", "type", "button", 3, "bitAction", "disabled"], ["id", "manual-upload", 1, "tw-mt-6", 3, "value"], ["class", "tw-mb-6 tw-block", 4, "ngIf"], ["class", "tw-font-semibold tw-mt-6", 4, "ngIf"], [3, "onUpdated", "showAutomaticSyncAndManualUpload", "organizationId", "showCancel"], [1, "tw-mb-6", "tw-block"], [1, "tw-font-semibold", "tw-mt-6"]], template: function OrganizationSubscriptionSelfhostComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelement"](0, "app-header");
        _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](1, "bit-container");
        _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtemplate"](2, OrganizationSubscriptionSelfhostComponent_ng_container_2_Template, 6, 6, "ng-container", 0)(3, OrganizationSubscriptionSelfhostComponent_app_org_subscription_hidden_3_Template, 1, 1, "app-org-subscription-hidden", 1)(4, OrganizationSubscriptionSelfhostComponent_ng_container_4_Template, 32, 32, "ng-container", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵproperty"]("ngIf", !ctx.firstLoaded && ctx.loading);
        _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵproperty"]("ngIf", ctx.firstLoaded && !ctx.userOrg.canViewSubscription);
        _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵproperty"]("ngIf", ctx.subscription && ctx.firstLoaded);
    } }, dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_27__.NgClass, _angular_common__WEBPACK_IMPORTED_MODULE_27__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_19__["ɵNgNoValidate"], _angular_forms__WEBPACK_IMPORTED_MODULE_19__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_19__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_19__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_19__.FormControlName, _libs_components_src_a11y_a11y_title_directive__WEBPACK_IMPORTED_MODULE_28__.A11yTitleDirective, _libs_components_src_async_actions_bit_action_directive__WEBPACK_IMPORTED_MODULE_29__.BitActionDirective, _libs_components_src_button_button_component__WEBPACK_IMPORTED_MODULE_30__.ButtonComponent, _libs_components_src_container_container_component__WEBPACK_IMPORTED_MODULE_31__.ContainerComponent, _libs_components_src_form_control_label_component__WEBPACK_IMPORTED_MODULE_32__.BitLabel, _libs_components_src_form_control_hint_component__WEBPACK_IMPORTED_MODULE_33__.BitHintComponent, _libs_components_src_link_link_directive__WEBPACK_IMPORTED_MODULE_34__.AnchorLinkDirective, _libs_components_src_radio_button_radio_button_component__WEBPACK_IMPORTED_MODULE_35__.RadioButtonComponent, _libs_components_src_radio_button_radio_group_component__WEBPACK_IMPORTED_MODULE_36__.RadioGroupComponent, _shared_update_license_component__WEBPACK_IMPORTED_MODULE_14__.UpdateLicenseComponent, _layouts_header_web_header_component__WEBPACK_IMPORTED_MODULE_15__.WebHeaderComponent, _subscription_hidden_component__WEBPACK_IMPORTED_MODULE_16__.SubscriptionHiddenComponent, _angular_common__WEBPACK_IMPORTED_MODULE_27__.DatePipe, _libs_angular_src_platform_pipes_i18n_pipe__WEBPACK_IMPORTED_MODULE_17__.I18nPipe], encapsulation: 2 });


/***/ }),

/***/ "./src/app/billing/organizations/payment-details/organization-payment-details.component.ts":
/*!*************************************************************************************************!*\
  !*** ./src/app/billing/organizations/payment-details/organization-payment-details.component.ts ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OrganizationPaymentDetailsComponent: () => (/* binding */ OrganizationPaymentDetailsComponent)
/* harmony export */ });
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/operators/switchMap.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/operators/filter.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/observable/merge.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/operators/tap.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/operators/shareReplay.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/Subject.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/lastValueFrom.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/observable/of.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/operators/take.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/operators/withLatestFrom.js");
/* harmony import */ var _bitwarden_common_admin_console_abstractions_organization_organization_service_abstraction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction */ "../../libs/common/src/admin-console/abstractions/organization/organization.service.abstraction.ts");
/* harmony import */ var _bitwarden_common_auth_abstractions_account_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bitwarden/common/auth/abstractions/account.service */ "../../libs/common/src/auth/abstractions/account.service.ts");
/* harmony import */ var _bitwarden_common_auth_services_account_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bitwarden/common/auth/services/account.service */ "../../libs/common/src/auth/services/account.service.ts");
/* harmony import */ var _bitwarden_common_enums_feature_flag_enum__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bitwarden/common/enums/feature-flag.enum */ "../../libs/common/src/enums/feature-flag.enum.ts");
/* harmony import */ var _bitwarden_common_platform_abstractions_config_config_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bitwarden/common/platform/abstractions/config/config.service */ "../../libs/common/src/platform/abstractions/config/config.service.ts");
/* harmony import */ var _bitwarden_common_platform_misc__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bitwarden/common/platform/misc */ "../../libs/common/src/platform/misc/index.ts");
/* harmony import */ var _bitwarden_messaging__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @bitwarden/messaging */ "../../libs/messaging/src/index.ts");
/* harmony import */ var _bitwarden_web_vault_app_billing_clients__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @bitwarden/web-vault/app/billing/clients */ "./src/app/billing/clients/index.ts");
/* harmony import */ var _bitwarden_web_vault_app_billing_organizations_warnings_components__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @bitwarden/web-vault/app/billing/organizations/warnings/components */ "./src/app/billing/organizations/warnings/components/index.ts");
/* harmony import */ var _bitwarden_web_vault_app_billing_organizations_warnings_services__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @bitwarden/web-vault/app/billing/organizations/warnings/services */ "./src/app/billing/organizations/warnings/services/index.ts");
/* harmony import */ var _bitwarden_web_vault_app_billing_payment_components__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @bitwarden/web-vault/app/billing/payment/components */ "./src/app/billing/payment/components/index.ts");
/* harmony import */ var _bitwarden_web_vault_app_billing_types__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @bitwarden/web-vault/app/billing/types */ "./src/app/billing/types/index.ts");
/* harmony import */ var _bitwarden_web_vault_app_layouts_header_header_module__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @bitwarden/web-vault/app/layouts/header/header.module */ "./src/app/layouts/header/header.module.ts");
/* harmony import */ var _bitwarden_web_vault_app_shared__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @bitwarden/web-vault/app/shared */ "./src/app/shared/index.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/fesm2022/core.mjs");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! @angular/router */ "../../node_modules/@angular/router/fesm2022/router-Dwfin5Au.mjs");
/* harmony import */ var _bitwarden_components__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! @bitwarden/components */ "../../libs/components/src/dialog/dialog.service.ts");
/* harmony import */ var _layouts_header_web_header_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../layouts/header/web-header.component */ "./src/app/layouts/header/web-header.component.ts");
/* harmony import */ var _libs_components_src_container_container_component__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ../../../../../../../libs/components/src/container/container.component */ "../../libs/components/src/container/container.component.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! @angular/common */ "../../node_modules/@angular/common/fesm2022/common_module-Dx7dWex5.mjs");
/* harmony import */ var _libs_angular_src_platform_pipes_i18n_pipe__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../../../../libs/angular/src/platform/pipes/i18n.pipe */ "../../libs/angular/src/platform/pipes/i18n.pipe.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};






























function OrganizationPaymentDetailsComponent_Conditional_2_Template(rf, ctx) { if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵelementStart"](0, "app-organization-free-trial-warning", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵlistener"]("clicked", function OrganizationPaymentDetailsComponent_Conditional_2_Template_app_organization_free_trial_warning_clicked_0_listener() { _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵrestoreView"](_r1); const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵnextContext"](); return _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵresetView"](ctx_r1.changePaymentMethod()); });
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵelementEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵnextContext"]();
    const organization_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵreadContextLet"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵproperty"]("organization", organization_r3);
} }
function OrganizationPaymentDetailsComponent_Conditional_7_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵelement"](1, "i", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵpipe"](2, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵelementStart"](3, "span", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵpipe"](5, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵpropertyInterpolate"]("title", _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵpipeBind1"](2, 2, "loading"));
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵpipeBind1"](5, 4, "loading"));
} }
function OrganizationPaymentDetailsComponent_Conditional_8_Template(rf, ctx) { if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵelementStart"](1, "app-display-payment-method", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵlistener"]("updated", function OrganizationPaymentDetailsComponent_Conditional_8_Template_app_display_payment_method_updated_1_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵrestoreView"](_r4); const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵnextContext"](); return _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵresetView"](ctx_r1.setPaymentMethod($event)); });
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵelementStart"](2, "app-display-billing-address", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵlistener"]("updated", function OrganizationPaymentDetailsComponent_Conditional_8_Template_app_display_billing_address_updated_2_listener($event) { _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵrestoreView"](_r4); const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵnextContext"](); return _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵresetView"](ctx_r1.setBillingAddress($event)); });
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵelement"](3, "app-display-account-credit", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵnextContext"]();
    const view_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵreadContextLet"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵproperty"]("subscriber", view_r5.organization)("paymentMethod", view_r5.paymentMethod);
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵproperty"]("subscriber", view_r5.organization)("billingAddress", view_r5.billingAddress)("taxIdWarning", ctx_r1.enableTaxIdWarning ? view_r5.taxIdWarning : null);
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵproperty"]("subscriber", view_r5.organization)("credit", view_r5.credit);
} }
const BANK_ACCOUNT_VERIFIED_COMMAND = new _bitwarden_messaging__WEBPACK_IMPORTED_MODULE_6__.CommandDefinition("organizationBankAccountVerified");
class OrganizationPaymentDetailsComponent {
    constructor(accountService, activatedRoute, configService, dialogService, messageListener, organizationService, organizationWarningsService, subscriberBillingClient) {
        this.accountService = accountService;
        this.activatedRoute = activatedRoute;
        this.configService = configService;
        this.dialogService = dialogService;
        this.messageListener = messageListener;
        this.organizationService = organizationService;
        this.organizationWarningsService = organizationWarningsService;
        this.subscriberBillingClient = subscriberBillingClient;
        this.viewState$ = new rxjs__WEBPACK_IMPORTED_MODULE_17__.BehaviorSubject(null);
        this.organization$ = this.accountService.activeAccount$.pipe(_bitwarden_common_auth_services_account_service__WEBPACK_IMPORTED_MODULE_2__.getUserId, (0,rxjs__WEBPACK_IMPORTED_MODULE_18__.switchMap)((userId) => this.organizationService
            .organizations$(userId)
            .pipe((0,_bitwarden_common_platform_misc__WEBPACK_IMPORTED_MODULE_5__.getById)(this.activatedRoute.snapshot.params.organizationId))), (0,rxjs__WEBPACK_IMPORTED_MODULE_19__.filter)((organization) => !!organization));
        this.load$ = this.organization$.pipe(_bitwarden_web_vault_app_billing_types__WEBPACK_IMPORTED_MODULE_11__.mapOrganizationToSubscriber, (0,rxjs__WEBPACK_IMPORTED_MODULE_18__.switchMap)((organization) => __awaiter(this, void 0, void 0, function* () {
            const getTaxIdWarning = (0,rxjs__WEBPACK_IMPORTED_MODULE_20__.firstValueFrom)(this.organizationWarningsService.getTaxIdWarning$(organization.data));
            const [paymentMethod, billingAddress, credit, taxIdWarning] = yield Promise.all([
                this.subscriberBillingClient.getPaymentMethod(organization),
                this.subscriberBillingClient.getBillingAddress(organization),
                this.subscriberBillingClient.getCredit(organization),
                getTaxIdWarning,
            ]);
            return {
                organization,
                paymentMethod,
                billingAddress,
                credit,
                taxIdWarning,
            };
        })));
        this.view$ = (0,rxjs__WEBPACK_IMPORTED_MODULE_21__.merge)(this.load$.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_22__.tap)((view) => this.viewState$.next(view))), this.viewState$.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_19__.filter)((view) => view !== null))).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_23__.shareReplay)({ bufferSize: 1, refCount: true }));
        this.destroy$ = new rxjs__WEBPACK_IMPORTED_MODULE_24__.Subject();
        this.changePaymentMethod = () => __awaiter(this, void 0, void 0, function* () {
            const view = yield (0,rxjs__WEBPACK_IMPORTED_MODULE_20__.firstValueFrom)(this.view$);
            const dialogRef = _bitwarden_web_vault_app_billing_payment_components__WEBPACK_IMPORTED_MODULE_10__.ChangePaymentMethodDialogComponent.open(this.dialogService, {
                data: {
                    subscriber: view.organization,
                },
            });
            const result = yield (0,rxjs__WEBPACK_IMPORTED_MODULE_25__.lastValueFrom)(dialogRef.closed);
            if ((result === null || result === void 0 ? void 0 : result.type) === "success") {
                yield this.setPaymentMethod(result.paymentMethod);
            }
        });
        this.setBillingAddress = (billingAddress) => {
            var _a;
            if (this.viewState$.value) {
                if (this.enableTaxIdWarning &&
                    ((_a = this.viewState$.value.billingAddress) === null || _a === void 0 ? void 0 : _a.taxId) !== billingAddress.taxId) {
                    this.organizationWarningsService.refreshTaxIdWarning();
                }
                this.viewState$.next(Object.assign(Object.assign({}, this.viewState$.value), { billingAddress }));
            }
        };
        this.setPaymentMethod = (paymentMethod) => __awaiter(this, void 0, void 0, function* () {
            var _a;
            if (this.viewState$.value) {
                if (!this.viewState$.value.paymentMethod) {
                    this.organizationWarningsService.refreshFreeTrialWarning();
                }
                const billingAddress = (_a = this.viewState$.value.billingAddress) !== null && _a !== void 0 ? _a : (yield this.subscriberBillingClient.getBillingAddress(this.viewState$.value.organization));
                this.viewState$.next(Object.assign(Object.assign({}, this.viewState$.value), { paymentMethod,
                    billingAddress }));
            }
        });
    }
    ngOnInit() {
        return __awaiter(this, void 0, void 0, function* () {
            var _a, _b;
            const openChangePaymentMethodDialogOnStart = (_b = (_a = history.state) === null || _a === void 0 ? void 0 : _a.launchPaymentModalAutomatically) !== null && _b !== void 0 ? _b : false;
            if (openChangePaymentMethodDialogOnStart) {
                history.replaceState(Object.assign(Object.assign({}, history.state), { launchPaymentModalAutomatically: false }), "");
                yield this.changePaymentMethod();
            }
            this.enableTaxIdWarning = yield this.configService.getFeatureFlag(_bitwarden_common_enums_feature_flag_enum__WEBPACK_IMPORTED_MODULE_3__.FeatureFlag.PM22415_TaxIDWarnings);
            if (this.enableTaxIdWarning) {
                this.organizationWarningsService.taxIdWarningRefreshed$
                    .pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_18__.switchMap)((warning) => (0,rxjs__WEBPACK_IMPORTED_MODULE_26__.combineLatest)([
                    (0,rxjs__WEBPACK_IMPORTED_MODULE_27__.of)(warning),
                    this.organization$.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_28__.take)(1)).pipe(_bitwarden_web_vault_app_billing_types__WEBPACK_IMPORTED_MODULE_11__.mapOrganizationToSubscriber, (0,rxjs__WEBPACK_IMPORTED_MODULE_18__.switchMap)((organization) => this.subscriberBillingClient.getBillingAddress(organization))),
                ])), (0,rxjs__WEBPACK_IMPORTED_MODULE_29__.takeUntil)(this.destroy$))
                    .subscribe(([taxIdWarning, billingAddress]) => {
                    if (this.viewState$.value) {
                        this.viewState$.next(Object.assign(Object.assign({}, this.viewState$.value), { taxIdWarning,
                            billingAddress }));
                    }
                });
            }
            this.messageListener
                .messages$(BANK_ACCOUNT_VERIFIED_COMMAND)
                .pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_30__.withLatestFrom)(this.view$), (0,rxjs__WEBPACK_IMPORTED_MODULE_19__.filter)(([message, view]) => message.organizationId === view.organization.data.id), (0,rxjs__WEBPACK_IMPORTED_MODULE_18__.switchMap)((_a) => __awaiter(this, [_a], void 0, function* ([_, view]) {
                return yield Promise.all([
                    this.subscriberBillingClient.getPaymentMethod(view.organization),
                    this.subscriberBillingClient.getBillingAddress(view.organization),
                ]);
            })), (0,rxjs__WEBPACK_IMPORTED_MODULE_22__.tap)((_a) => __awaiter(this, [_a], void 0, function* ([paymentMethod, billingAddress]) {
                if (paymentMethod) {
                    yield this.setPaymentMethod(paymentMethod);
                }
                if (billingAddress) {
                    this.setBillingAddress(billingAddress);
                }
            })), (0,rxjs__WEBPACK_IMPORTED_MODULE_29__.takeUntil)(this.destroy$))
                .subscribe();
        });
    }
    ngOnDestroy() {
        this.destroy$.next();
        this.destroy$.complete();
    }
}
OrganizationPaymentDetailsComponent.ɵfac = function OrganizationPaymentDetailsComponent_Factory(__ngFactoryType__) { return new (__ngFactoryType__ || OrganizationPaymentDetailsComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵdirectiveInject"](_bitwarden_common_auth_abstractions_account_service__WEBPACK_IMPORTED_MODULE_1__.AccountService), _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_31__.ActivatedRoute), _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵdirectiveInject"](_bitwarden_common_platform_abstractions_config_config_service__WEBPACK_IMPORTED_MODULE_4__.ConfigService), _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵdirectiveInject"](_bitwarden_components__WEBPACK_IMPORTED_MODULE_32__.DialogService), _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵdirectiveInject"](_bitwarden_messaging__WEBPACK_IMPORTED_MODULE_6__.MessageListener), _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵdirectiveInject"](_bitwarden_common_admin_console_abstractions_organization_organization_service_abstraction__WEBPACK_IMPORTED_MODULE_0__.OrganizationService), _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵdirectiveInject"](_bitwarden_web_vault_app_billing_organizations_warnings_services__WEBPACK_IMPORTED_MODULE_9__.OrganizationWarningsService), _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵdirectiveInject"](_bitwarden_web_vault_app_billing_clients__WEBPACK_IMPORTED_MODULE_7__.SubscriberBillingClient)); };
OrganizationPaymentDetailsComponent.ɵcmp = /*@__PURE__*/ _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵdefineComponent"]({ type: OrganizationPaymentDetailsComponent, selectors: [["ng-component"]], decls: 9, vars: 8, consts: [[3, "organization"], [3, "clicked", "organization"], ["aria-hidden", "true", 1, "bwi", "bwi-spinner", "bwi-spin", "tw-text-muted", 3, "title"], [1, "tw-sr-only"], [3, "updated", "subscriber", "paymentMethod"], [3, "updated", "subscriber", "billingAddress", "taxIdWarning"], [3, "subscriber", "credit"]], template: function OrganizationPaymentDetailsComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵdeclareLet"](0);
        _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵpipe"](1, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵtemplate"](2, OrganizationPaymentDetailsComponent_Conditional_2_Template, 1, 1, "app-organization-free-trial-warning", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵelement"](3, "app-header");
        _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵelementStart"](4, "bit-container");
        _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵdeclareLet"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵpipe"](6, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵtemplate"](7, OrganizationPaymentDetailsComponent_Conditional_7_Template, 6, 6, "ng-container")(8, OrganizationPaymentDetailsComponent_Conditional_8_Template, 4, 7, "ng-container");
        _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵelementEnd"]();
    } if (rf & 2) {
        const organization_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵstoreLet"](_angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵpipeBind1"](1, 2, ctx.organization$));
        _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵconditional"](organization_r6 ? 2 : -1);
        _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵadvance"](3);
        const view_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵstoreLet"](_angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵpipeBind1"](6, 5, ctx.view$));
        _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵconditional"](!view_r7 ? 7 : 8);
    } }, dependencies: [_bitwarden_web_vault_app_billing_payment_components__WEBPACK_IMPORTED_MODULE_10__.DisplayAccountCreditComponent,
        _bitwarden_web_vault_app_billing_payment_components__WEBPACK_IMPORTED_MODULE_10__.DisplayBillingAddressComponent,
        _bitwarden_web_vault_app_billing_payment_components__WEBPACK_IMPORTED_MODULE_10__.DisplayPaymentMethodComponent,
        _bitwarden_web_vault_app_layouts_header_header_module__WEBPACK_IMPORTED_MODULE_12__.HeaderModule, _layouts_header_web_header_component__WEBPACK_IMPORTED_MODULE_14__.WebHeaderComponent, _bitwarden_web_vault_app_billing_organizations_warnings_components__WEBPACK_IMPORTED_MODULE_8__.OrganizationFreeTrialWarningComponent,
        _bitwarden_web_vault_app_shared__WEBPACK_IMPORTED_MODULE_13__.SharedModule, _libs_components_src_container_container_component__WEBPACK_IMPORTED_MODULE_33__.ContainerComponent, _angular_common__WEBPACK_IMPORTED_MODULE_34__.AsyncPipe, _libs_angular_src_platform_pipes_i18n_pipe__WEBPACK_IMPORTED_MODULE_15__.I18nPipe], encapsulation: 2 });


/***/ }),

/***/ "./src/app/billing/organizations/sm-adjust-subscription.component.ts":
/*!***************************************************************************!*\
  !*** ./src/app/billing/organizations/sm-adjust-subscription.component.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SecretsManagerAdjustSubscriptionComponent: () => (/* binding */ SecretsManagerAdjustSubscriptionComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/fesm2022/core.mjs");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/forms */ "../../node_modules/@angular/forms/fesm2022/forms.mjs");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/Subject.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js");
/* harmony import */ var _bitwarden_common_admin_console_abstractions_organization_organization_api_service_abstraction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bitwarden/common/admin-console/abstractions/organization/organization-api.service.abstraction */ "../../libs/common/src/admin-console/abstractions/organization/organization-api.service.abstraction.ts");
/* harmony import */ var _bitwarden_common_admin_console_abstractions_organization_organization_service_abstraction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction */ "../../libs/common/src/admin-console/abstractions/organization/organization.service.abstraction.ts");
/* harmony import */ var _bitwarden_common_admin_console_models_data_organization_data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bitwarden/common/admin-console/models/data/organization.data */ "../../libs/common/src/admin-console/models/data/organization.data.ts");
/* harmony import */ var _bitwarden_common_auth_abstractions_account_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bitwarden/common/auth/abstractions/account.service */ "../../libs/common/src/auth/abstractions/account.service.ts");
/* harmony import */ var _bitwarden_common_auth_services_account_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bitwarden/common/auth/services/account.service */ "../../libs/common/src/auth/services/account.service.ts");
/* harmony import */ var _bitwarden_common_billing_models_request_organization_sm_subscription_update_request__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bitwarden/common/billing/models/request/organization-sm-subscription-update.request */ "../../libs/common/src/billing/models/request/organization-sm-subscription-update.request.ts");
/* harmony import */ var _bitwarden_common_platform_abstractions_i18n_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @bitwarden/common/platform/abstractions/i18n.service */ "../../libs/common/src/platform/abstractions/i18n.service.ts");
/* harmony import */ var _bitwarden_common_platform_abstractions_platform_utils_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @bitwarden/common/platform/abstractions/platform-utils.service */ "../../libs/common/src/platform/abstractions/platform-utils.service.ts");
/* harmony import */ var _bitwarden_components__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @bitwarden/components */ "../../libs/components/src/toast/toast.service.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @angular/common */ "../../node_modules/@angular/common/fesm2022/common_module-Dx7dWex5.mjs");
/* harmony import */ var _libs_components_src_async_actions_form_button_directive__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../../../libs/components/src/async-actions/form-button.directive */ "../../libs/components/src/async-actions/form-button.directive.ts");
/* harmony import */ var _libs_components_src_async_actions_bit_submit_directive__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../../../libs/components/src/async-actions/bit-submit.directive */ "../../libs/components/src/async-actions/bit-submit.directive.ts");
/* harmony import */ var _libs_components_src_button_button_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../../../../libs/components/src/button/button.component */ "../../libs/components/src/button/button.component.ts");
/* harmony import */ var _libs_components_src_checkbox_checkbox_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../../../../libs/components/src/checkbox/checkbox.component */ "../../libs/components/src/checkbox/checkbox.component.ts");
/* harmony import */ var _libs_components_src_form_control_form_control_component__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../../../../libs/components/src/form-control/form-control.component */ "../../libs/components/src/form-control/form-control.component.ts");
/* harmony import */ var _libs_components_src_form_control_label_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../../../../libs/components/src/form-control/label.component */ "../../libs/components/src/form-control/label.component.ts");
/* harmony import */ var _libs_components_src_form_control_hint_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../../../../libs/components/src/form-control/hint.component */ "../../libs/components/src/form-control/hint.component.ts");
/* harmony import */ var _libs_components_src_input_input_directive__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../../../../libs/components/src/input/input.directive */ "../../libs/components/src/input/input.directive.ts");
/* harmony import */ var _libs_components_src_form_field_error_summary_component__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../../../../libs/components/src/form-field/error-summary.component */ "../../libs/components/src/form-field/error-summary.component.ts");
/* harmony import */ var _libs_components_src_form_field_form_field_component__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../../../../../libs/components/src/form-field/form-field.component */ "../../libs/components/src/form-field/form-field.component.ts");
/* harmony import */ var _libs_angular_src_platform_pipes_i18n_pipe__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../../libs/angular/src/platform/pipes/i18n.pipe */ "../../libs/angular/src/platform/pipes/i18n.pipe.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
// FIXME: Update this file to be type safe and remove this and next line
// @ts-strict-ignore
































function SecretsManagerAdjustSubscriptionComponent_bit_form_field_22_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](0, "bit-form-field", 1)(1, "bit-label");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](3, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelement"](4, "input", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](5, "bit-hint")(6, "strong");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](8, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](9);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](10, "currency");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](11, "currency");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](12, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]()();
} if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind1"](3, 7, "maxSeatLimit"));
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("min", ctx_r0.formGroup.value.seatCount);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate1"]("", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind1"](8, 9, "maxSeatCost"), ":");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate4"](" ", ctx_r0.formGroup.value.maxAutoscaleSeats || 0, " \u00D7 ", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind2"](10, 11, ctx_r0.options.seatPrice, "$"), " = ", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind2"](11, 14, ctx_r0.maxSeatTotalCost, "$"), " / ", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind1"](12, 17, ctx_r0.options.interval), " ");
} }
function SecretsManagerAdjustSubscriptionComponent_bit_form_field_50_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](0, "bit-form-field", 1)(1, "bit-label");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](3, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelement"](4, "input", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](5, "bit-hint")(6, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](8, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](9, "strong");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](10);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](11, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](12);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](13, "currency");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](14, "currency");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](15, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]()();
} if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind1"](3, 8, "machineAccountLimit"));
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("min", ctx_r0.formGroup.value.additionalServiceAccounts);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind2"](8, 10, "includedMachineAccounts", ctx_r0.options.baseServiceAccountCount), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate1"]("", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind1"](11, 13, "maxMachineAccountCost"), ":");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate4"](" ", ctx_r0.maxAdditionalServiceAccounts, " \u00D7 ", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind2"](13, 15, ctx_r0.options.additionalServiceAccountPrice, "$"), " = ", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind2"](14, 18, ctx_r0.maxServiceAccountTotalCost, "$"), " / ", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind1"](15, 21, ctx_r0.options.interval), " ");
} }
class SecretsManagerAdjustSubscriptionComponent {
    get monthlyServiceAccountPrice() {
        return this.options.interval == "month"
            ? this.options.additionalServiceAccountPrice
            : this.options.additionalServiceAccountPrice / 12;
    }
    get serviceAccountTotalCost() {
        return Math.abs(this.formGroup.value.additionalServiceAccounts * this.options.additionalServiceAccountPrice);
    }
    get seatTotalCost() {
        return Math.abs(this.formGroup.value.seatCount * this.options.seatPrice);
    }
    get maxAdditionalServiceAccounts() {
        var _a;
        const maxTotalServiceAccounts = (_a = this.formGroup.value.maxAutoscaleServiceAccounts) !== null && _a !== void 0 ? _a : 0;
        return Math.max(0, maxTotalServiceAccounts - this.options.baseServiceAccountCount);
    }
    get maxServiceAccountTotalCost() {
        return this.maxAdditionalServiceAccounts * this.options.additionalServiceAccountPrice;
    }
    get maxSeatTotalCost() {
        var _a;
        return Math.abs(((_a = this.formGroup.value.maxAutoscaleSeats) !== null && _a !== void 0 ? _a : 0) * this.options.seatPrice);
    }
    constructor(formBuilder, organizationApiService, i18nService, platformUtilsService, toastService, internalOrganizationService, accountService) {
        this.formBuilder = formBuilder;
        this.organizationApiService = organizationApiService;
        this.i18nService = i18nService;
        this.platformUtilsService = platformUtilsService;
        this.toastService = toastService;
        this.internalOrganizationService = internalOrganizationService;
        this.accountService = accountService;
        this.onAdjusted = new _angular_core__WEBPACK_IMPORTED_MODULE_9__.EventEmitter();
        this.destroy$ = new rxjs__WEBPACK_IMPORTED_MODULE_10__.Subject();
        this.formGroup = this.formBuilder.group({
            seatCount: [0, [_angular_forms__WEBPACK_IMPORTED_MODULE_11__.Validators.required, _angular_forms__WEBPACK_IMPORTED_MODULE_11__.Validators.min(1)]],
            limitSeats: [false],
            maxAutoscaleSeats: [null],
            additionalServiceAccounts: [0, [_angular_forms__WEBPACK_IMPORTED_MODULE_11__.Validators.required, _angular_forms__WEBPACK_IMPORTED_MODULE_11__.Validators.min(0)]],
            limitServiceAccounts: [false],
            maxAutoscaleServiceAccounts: [null],
        });
        this.submit = () => __awaiter(this, void 0, void 0, function* () {
            this.formGroup.markAllAsTouched();
            if (this.formGroup.invalid) {
                return;
            }
            const request = new _bitwarden_common_billing_models_request_organization_sm_subscription_update_request__WEBPACK_IMPORTED_MODULE_5__.OrganizationSmSubscriptionUpdateRequest();
            request.seatAdjustment = this.formGroup.value.seatCount - this.options.seatCount;
            request.serviceAccountAdjustment =
                this.formGroup.value.additionalServiceAccounts - this.options.additionalServiceAccounts;
            request.maxAutoscaleSeats = this.formGroup.value.limitSeats
                ? this.formGroup.value.maxAutoscaleSeats
                : null;
            request.maxAutoscaleServiceAccounts = this.formGroup.value.limitServiceAccounts
                ? this.formGroup.value.maxAutoscaleServiceAccounts
                : null;
            const response = yield this.organizationApiService.updateSecretsManagerSubscription(this.organizationId, request);
            const userId = yield (0,rxjs__WEBPACK_IMPORTED_MODULE_12__.firstValueFrom)((0,_bitwarden_common_auth_services_account_service__WEBPACK_IMPORTED_MODULE_4__.getUserId)(this.accountService.activeAccount$));
            const organization = yield (0,rxjs__WEBPACK_IMPORTED_MODULE_12__.firstValueFrom)(this.internalOrganizationService
                .organizations$(userId)
                .pipe((0,_bitwarden_common_admin_console_abstractions_organization_organization_service_abstraction__WEBPACK_IMPORTED_MODULE_1__.getOrganizationById)(this.organizationId)));
            const organizationData = new _bitwarden_common_admin_console_models_data_organization_data__WEBPACK_IMPORTED_MODULE_2__.OrganizationData(response, {
                isMember: organization.isMember,
                isProviderUser: organization.isProviderUser,
            });
            yield this.internalOrganizationService.upsert(organizationData, userId);
            this.toastService.showToast({
                variant: "success",
                title: null,
                message: this.i18nService.t("subscriptionUpdated"),
            });
            this.onAdjusted.emit();
        });
    }
    ngOnInit() {
        this.formGroup.valueChanges.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_13__.takeUntil)(this.destroy$)).subscribe((value) => {
            const maxAutoscaleSeatsControl = this.formGroup.controls.maxAutoscaleSeats;
            const maxAutoscaleServiceAccountsControl = this.formGroup.controls.maxAutoscaleServiceAccounts;
            if (value.limitSeats) {
                maxAutoscaleSeatsControl.setValidators([_angular_forms__WEBPACK_IMPORTED_MODULE_11__.Validators.min(value.seatCount)]);
                maxAutoscaleSeatsControl.enable({ emitEvent: false });
            }
            else {
                maxAutoscaleSeatsControl.disable({ emitEvent: false });
            }
            if (value.limitServiceAccounts) {
                maxAutoscaleServiceAccountsControl.setValidators([
                    _angular_forms__WEBPACK_IMPORTED_MODULE_11__.Validators.min(value.additionalServiceAccounts + this.options.baseServiceAccountCount),
                ]);
                maxAutoscaleServiceAccountsControl.enable({ emitEvent: false });
            }
            else {
                maxAutoscaleServiceAccountsControl.disable({ emitEvent: false });
            }
        });
        this.formGroup.patchValue({
            seatCount: this.options.seatCount,
            maxAutoscaleSeats: this.options.maxAutoscaleSeats,
            additionalServiceAccounts: this.options.additionalServiceAccounts,
            maxAutoscaleServiceAccounts: this.options.maxAutoscaleServiceAccounts,
            limitSeats: this.options.maxAutoscaleSeats != null,
            limitServiceAccounts: this.options.maxAutoscaleServiceAccounts != null,
        });
    }
    ngOnDestroy() {
        this.destroy$.next();
        this.destroy$.complete();
    }
}
SecretsManagerAdjustSubscriptionComponent.ɵfac = function SecretsManagerAdjustSubscriptionComponent_Factory(__ngFactoryType__) { return new (__ngFactoryType__ || SecretsManagerAdjustSubscriptionComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdirectiveInject"](_angular_forms__WEBPACK_IMPORTED_MODULE_11__.FormBuilder), _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdirectiveInject"](_bitwarden_common_admin_console_abstractions_organization_organization_api_service_abstraction__WEBPACK_IMPORTED_MODULE_0__.OrganizationApiServiceAbstraction), _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdirectiveInject"](_bitwarden_common_platform_abstractions_i18n_service__WEBPACK_IMPORTED_MODULE_6__.I18nService), _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdirectiveInject"](_bitwarden_common_platform_abstractions_platform_utils_service__WEBPACK_IMPORTED_MODULE_7__.PlatformUtilsService), _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdirectiveInject"](_bitwarden_components__WEBPACK_IMPORTED_MODULE_14__.ToastService), _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdirectiveInject"](_bitwarden_common_admin_console_abstractions_organization_organization_service_abstraction__WEBPACK_IMPORTED_MODULE_1__.InternalOrganizationServiceAbstraction), _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdirectiveInject"](_bitwarden_common_auth_abstractions_account_service__WEBPACK_IMPORTED_MODULE_3__.AccountService)); };
SecretsManagerAdjustSubscriptionComponent.ɵcmp = /*@__PURE__*/ _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdefineComponent"]({ type: SecretsManagerAdjustSubscriptionComponent, selectors: [["app-sm-adjust-subscription"]], inputs: { organizationId: "organizationId", options: "options" }, outputs: { onAdjusted: "onAdjusted" }, standalone: false, decls: 55, vars: 67, consts: [[3, "formGroup", "bitSubmit"], [1, "tw-w-2/3"], ["bitInput", "", "id", "smSeatCount", "formControlName", "seatCount", "type", "number", "step", "1", "min", "1"], ["type", "checkbox", "bitCheckbox", "", "id", "limitSmSeats", "formControlName", "limitSeats"], ["class", "tw-w-2/3", 4, "ngIf"], ["bitInput", "", "id", "additionalServiceAccountCount", "formControlName", "additionalServiceAccounts", "type", "number", "step", "1", "min", "0"], ["type", "checkbox", "bitCheckbox", "", "id", "limitServiceAccounts", "formControlName", "limitServiceAccounts"], ["type", "submit", "bitButton", "", "buttonType", "primary", "bitFormButton", ""], [1, "tw-mt-2", 3, "formGroup"], ["bitInput", "", "id", "smSeatLimit", "formControlName", "maxAutoscaleSeats", "type", "number", "step", "1", 3, "min"], ["bitInput", "", "id", "additionalServiceAccountLimit", "formControlName", "maxAutoscaleServiceAccounts", "type", "number", "step", "1", 3, "min"]], template: function SecretsManagerAdjustSubscriptionComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](0, "form", 0)(1, "bit-form-field", 1)(2, "bit-label");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](4, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelement"](5, "input", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](6, "bit-hint")(7, "strong");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](8);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](9, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](10);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](11, "currency");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](12, "currency");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](13, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](14, "bit-form-control")(15, "bit-label");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](16);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](17, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelement"](18, "input", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](19, "bit-hint");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](20);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](21, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](22, SecretsManagerAdjustSubscriptionComponent_bit_form_field_22_Template, 13, 19, "bit-form-field", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](23, "bit-form-field", 1)(24, "bit-label");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](25);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](26, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelement"](27, "input", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](28, "bit-hint")(29, "div");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](30);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](31, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](32, "currency");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](33, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](34, "div")(35, "strong");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](36);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](37, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](38);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](39, "currency");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](40, "currency");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](41, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](42, "bit-form-control")(43, "bit-label");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](44);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](45, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelement"](46, "input", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](47, "bit-hint");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](48);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](49, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](50, SecretsManagerAdjustSubscriptionComponent_bit_form_field_50_Template, 16, 23, "bit-form-field", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](51, "button", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](52);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](53, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelement"](54, "bit-error-summary", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("formGroup", ctx.formGroup)("bitSubmit", ctx.submit);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind1"](4, 24, "subscriptionSeats"));
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate1"]("", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind1"](9, 26, "total"), ":");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate4"](" ", ctx.formGroup.value.seatCount || 0, " \u00D7 ", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind2"](11, 28, ctx.options.seatPrice, "$"), " = ", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind2"](12, 31, ctx.seatTotalCost, "$"), " / ", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind1"](13, 34, ctx.options.interval), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind1"](17, 36, "limitSubscription"));
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind1"](21, 38, "limitSmSubscriptionDesc"), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngIf", ctx.formGroup.value.limitSeats);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind1"](26, 40, "additionalMachineAccounts"));
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate2"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind2"](31, 42, "includedMachineAccounts", ctx.options.baseServiceAccountCount), " ", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind2"](33, 48, "addAdditionalMachineAccounts", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind2"](32, 45, ctx.monthlyServiceAccountPrice, "$")), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate1"]("", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind1"](37, 51, "total"), ":");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate4"](" ", ctx.formGroup.value.additionalServiceAccounts || 0, " \u00D7 ", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind2"](39, 53, ctx.options.additionalServiceAccountPrice, "$"), " = ", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind2"](40, 56, ctx.serviceAccountTotalCost, "$"), " / ", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind1"](41, 59, ctx.options.interval), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind1"](45, 61, "limitMachineAccounts"));
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind1"](49, 63, "limitMachineAccountsDesc"), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngIf", ctx.formGroup.value.limitServiceAccounts);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind1"](53, 65, "save"), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("formGroup", ctx.formGroup);
    } }, dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_15__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_11__["ɵNgNoValidate"], _angular_forms__WEBPACK_IMPORTED_MODULE_11__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_11__.NumberValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_11__.CheckboxControlValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_11__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_11__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_11__.MinValidator, _angular_forms__WEBPACK_IMPORTED_MODULE_11__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_11__.FormControlName, _libs_components_src_async_actions_form_button_directive__WEBPACK_IMPORTED_MODULE_16__.BitFormButtonDirective, _libs_components_src_async_actions_bit_submit_directive__WEBPACK_IMPORTED_MODULE_17__.BitSubmitDirective, _libs_components_src_button_button_component__WEBPACK_IMPORTED_MODULE_18__.ButtonComponent, _libs_components_src_checkbox_checkbox_component__WEBPACK_IMPORTED_MODULE_19__.CheckboxComponent, _libs_components_src_form_control_form_control_component__WEBPACK_IMPORTED_MODULE_20__.FormControlComponent, _libs_components_src_form_control_label_component__WEBPACK_IMPORTED_MODULE_21__.BitLabel, _libs_components_src_form_control_hint_component__WEBPACK_IMPORTED_MODULE_22__.BitHintComponent, _libs_components_src_input_input_directive__WEBPACK_IMPORTED_MODULE_23__.BitInputDirective, _libs_components_src_form_field_error_summary_component__WEBPACK_IMPORTED_MODULE_24__.BitErrorSummary, _libs_components_src_form_field_form_field_component__WEBPACK_IMPORTED_MODULE_25__.BitFormFieldComponent, _angular_common__WEBPACK_IMPORTED_MODULE_15__.CurrencyPipe, _libs_angular_src_platform_pipes_i18n_pipe__WEBPACK_IMPORTED_MODULE_8__.I18nPipe], encapsulation: 2 });


/***/ }),

/***/ "./src/app/billing/organizations/sm-subscribe-standalone.component.ts":
/*!****************************************************************************!*\
  !*** ./src/app/billing/organizations/sm-subscribe-standalone.component.ts ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SecretsManagerSubscribeStandaloneComponent: () => (/* binding */ SecretsManagerSubscribeStandaloneComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/fesm2022/core.mjs");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! rxjs */ "../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");
/* harmony import */ var _bitwarden_common_abstractions_api_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bitwarden/common/abstractions/api.service */ "../../libs/common/src/abstractions/api.service.ts");
/* harmony import */ var _bitwarden_common_admin_console_abstractions_organization_organization_api_service_abstraction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bitwarden/common/admin-console/abstractions/organization/organization-api.service.abstraction */ "../../libs/common/src/admin-console/abstractions/organization/organization-api.service.abstraction.ts");
/* harmony import */ var _bitwarden_common_admin_console_abstractions_organization_organization_service_abstraction__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bitwarden/common/admin-console/abstractions/organization/organization.service.abstraction */ "../../libs/common/src/admin-console/abstractions/organization/organization.service.abstraction.ts");
/* harmony import */ var _bitwarden_common_admin_console_models_data_organization_data__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bitwarden/common/admin-console/models/data/organization.data */ "../../libs/common/src/admin-console/models/data/organization.data.ts");
/* harmony import */ var _bitwarden_common_admin_console_models_domain_organization__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bitwarden/common/admin-console/models/domain/organization */ "../../libs/common/src/admin-console/models/domain/organization.ts");
/* harmony import */ var _bitwarden_common_auth_abstractions_account_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bitwarden/common/auth/abstractions/account.service */ "../../libs/common/src/auth/abstractions/account.service.ts");
/* harmony import */ var _bitwarden_common_auth_services_account_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @bitwarden/common/auth/services/account.service */ "../../libs/common/src/auth/services/account.service.ts");
/* harmony import */ var _bitwarden_common_billing_models_request_sm_subscribe_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @bitwarden/common/billing/models/request/sm-subscribe.request */ "../../libs/common/src/billing/models/request/sm-subscribe.request.ts");
/* harmony import */ var _bitwarden_common_billing_models_response_organization_subscription_response__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @bitwarden/common/billing/models/response/organization-subscription.response */ "../../libs/common/src/billing/models/response/organization-subscription.response.ts");
/* harmony import */ var _bitwarden_common_billing_models_response_plan_response__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @bitwarden/common/billing/models/response/plan.response */ "../../libs/common/src/billing/models/response/plan.response.ts");
/* harmony import */ var _bitwarden_common_platform_abstractions_i18n_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @bitwarden/common/platform/abstractions/i18n.service */ "../../libs/common/src/platform/abstractions/i18n.service.ts");
/* harmony import */ var _bitwarden_common_platform_abstractions_platform_utils_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @bitwarden/common/platform/abstractions/platform-utils.service */ "../../libs/common/src/platform/abstractions/platform-utils.service.ts");
/* harmony import */ var _shared__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../shared */ "./src/app/billing/shared/index.ts");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @angular/forms */ "../../node_modules/@angular/forms/fesm2022/forms.mjs");
/* harmony import */ var _bitwarden_components__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @bitwarden/components */ "../../libs/components/src/toast/toast.service.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @angular/common */ "../../node_modules/@angular/common/fesm2022/common_module-Dx7dWex5.mjs");
/* harmony import */ var _libs_components_src_async_actions_bit_submit_directive__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../../../../libs/components/src/async-actions/bit-submit.directive */ "../../libs/components/src/async-actions/bit-submit.directive.ts");
/* harmony import */ var _shared_sm_subscribe_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../shared/sm-subscribe.component */ "./src/app/billing/shared/sm-subscribe.component.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
// FIXME: Update this file to be type safe and remove this and next line
// @ts-strict-ignore





























function SecretsManagerSubscribeStandaloneComponent_form_0_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_14__["ɵɵelementStart"](0, "form", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_14__["ɵɵelement"](1, "sm-subscribe", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_14__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_14__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_14__["ɵɵproperty"]("formGroup", ctx_r0.formGroup)("bitSubmit", ctx_r0.submit);
    _angular_core__WEBPACK_IMPORTED_MODULE_14__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_14__["ɵɵproperty"]("formGroup", ctx_r0.formGroup)("selectedPlan", ctx_r0.plan)("upgradeOrganization", false)("showSubmitButton", true)("customerDiscount", ctx_r0.customerDiscount);
} }
class SecretsManagerSubscribeStandaloneComponent {
    constructor(apiService, formBuilder, platformUtilsService, i18nService, organizationApiService, organizationService, toastService, accountService) {
        this.apiService = apiService;
        this.formBuilder = formBuilder;
        this.platformUtilsService = platformUtilsService;
        this.i18nService = i18nService;
        this.organizationApiService = organizationApiService;
        this.organizationService = organizationService;
        this.toastService = toastService;
        this.accountService = accountService;
        this.onSubscribe = new _angular_core__WEBPACK_IMPORTED_MODULE_14__.EventEmitter();
        this.formGroup = (0,_shared__WEBPACK_IMPORTED_MODULE_12__.secretsManagerSubscribeFormFactory)(this.formBuilder);
        this.submit = () => __awaiter(this, void 0, void 0, function* () {
            const request = new _bitwarden_common_billing_models_request_sm_subscribe_request__WEBPACK_IMPORTED_MODULE_7__.SecretsManagerSubscribeRequest();
            request.additionalSmSeats = this.plan.SecretsManager.hasAdditionalSeatsOption
                ? this.formGroup.value.userSeats
                : 0;
            request.additionalServiceAccounts = this.plan.SecretsManager.hasAdditionalServiceAccountOption
                ? this.formGroup.value.additionalServiceAccounts
                : 0;
            const profileOrganization = yield this.organizationApiService.subscribeToSecretsManager(this.organization.id, request);
            const organizationData = new _bitwarden_common_admin_console_models_data_organization_data__WEBPACK_IMPORTED_MODULE_3__.OrganizationData(profileOrganization, {
                isMember: this.organization.isMember,
                isProviderUser: this.organization.isProviderUser,
            });
            const userId = yield (0,rxjs__WEBPACK_IMPORTED_MODULE_15__.firstValueFrom)((0,_bitwarden_common_auth_services_account_service__WEBPACK_IMPORTED_MODULE_6__.getUserId)(this.accountService.activeAccount$));
            yield this.organizationService.upsert(organizationData, userId);
            /*
              Because subscribing to Secrets Manager automatically provides access to Secrets Manager for the
              subscribing user, we need to refresh the identity token to account for their updated permissions.
            */
            yield this.apiService.refreshIdentityToken();
            this.toastService.showToast({
                variant: "success",
                title: null,
                message: this.i18nService.t("subscribedToSecretsManager"),
            });
            this.onSubscribe.emit();
        });
    }
}
SecretsManagerSubscribeStandaloneComponent.ɵfac = function SecretsManagerSubscribeStandaloneComponent_Factory(__ngFactoryType__) { return new (__ngFactoryType__ || SecretsManagerSubscribeStandaloneComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_14__["ɵɵdirectiveInject"](_bitwarden_common_abstractions_api_service__WEBPACK_IMPORTED_MODULE_0__.ApiService), _angular_core__WEBPACK_IMPORTED_MODULE_14__["ɵɵdirectiveInject"](_angular_forms__WEBPACK_IMPORTED_MODULE_16__.FormBuilder), _angular_core__WEBPACK_IMPORTED_MODULE_14__["ɵɵdirectiveInject"](_bitwarden_common_platform_abstractions_platform_utils_service__WEBPACK_IMPORTED_MODULE_11__.PlatformUtilsService), _angular_core__WEBPACK_IMPORTED_MODULE_14__["ɵɵdirectiveInject"](_bitwarden_common_platform_abstractions_i18n_service__WEBPACK_IMPORTED_MODULE_10__.I18nService), _angular_core__WEBPACK_IMPORTED_MODULE_14__["ɵɵdirectiveInject"](_bitwarden_common_admin_console_abstractions_organization_organization_api_service_abstraction__WEBPACK_IMPORTED_MODULE_1__.OrganizationApiServiceAbstraction), _angular_core__WEBPACK_IMPORTED_MODULE_14__["ɵɵdirectiveInject"](_bitwarden_common_admin_console_abstractions_organization_organization_service_abstraction__WEBPACK_IMPORTED_MODULE_2__.InternalOrganizationServiceAbstraction), _angular_core__WEBPACK_IMPORTED_MODULE_14__["ɵɵdirectiveInject"](_bitwarden_components__WEBPACK_IMPORTED_MODULE_17__.ToastService), _angular_core__WEBPACK_IMPORTED_MODULE_14__["ɵɵdirectiveInject"](_bitwarden_common_auth_abstractions_account_service__WEBPACK_IMPORTED_MODULE_5__.AccountService)); };
SecretsManagerSubscribeStandaloneComponent.ɵcmp = /*@__PURE__*/ _angular_core__WEBPACK_IMPORTED_MODULE_14__["ɵɵdefineComponent"]({ type: SecretsManagerSubscribeStandaloneComponent, selectors: [["sm-subscribe-standalone"]], inputs: { plan: "plan", organization: "organization", customerDiscount: "customerDiscount" }, outputs: { onSubscribe: "onSubscribe" }, standalone: false, decls: 1, vars: 1, consts: [[3, "formGroup", "bitSubmit", 4, "ngIf"], [3, "formGroup", "bitSubmit"], [3, "formGroup", "selectedPlan", "upgradeOrganization", "showSubmitButton", "customerDiscount"]], template: function SecretsManagerSubscribeStandaloneComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_14__["ɵɵtemplate"](0, SecretsManagerSubscribeStandaloneComponent_form_0_Template, 2, 7, "form", 0);
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_14__["ɵɵproperty"]("ngIf", ctx.plan);
    } }, dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_18__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_16__["ɵNgNoValidate"], _angular_forms__WEBPACK_IMPORTED_MODULE_16__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_16__.FormGroupDirective, _libs_components_src_async_actions_bit_submit_directive__WEBPACK_IMPORTED_MODULE_19__.BitSubmitDirective, _shared_sm_subscribe_component__WEBPACK_IMPORTED_MODULE_13__.SecretsManagerSubscribeComponent], encapsulation: 2 });


/***/ }),

/***/ "./src/app/billing/organizations/subscription-hidden.component.ts":
/*!************************************************************************!*\
  !*** ./src/app/billing/organizations/subscription-hidden.component.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SubscriptionHiddenComponent: () => (/* binding */ SubscriptionHiddenComponent)
/* harmony export */ });
/* harmony import */ var _bitwarden_assets_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bitwarden/assets/svg */ "../../libs/assets/src/svg/svgs/gear.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/fesm2022/core.mjs");
/* harmony import */ var _libs_components_src_icon_icon_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../libs/components/src/icon/icon.component */ "../../libs/components/src/icon/icon.component.ts");
/* harmony import */ var _libs_angular_src_platform_pipes_i18n_pipe__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../../libs/angular/src/platform/pipes/i18n.pipe */ "../../libs/angular/src/platform/pipes/i18n.pipe.ts");




class SubscriptionHiddenComponent {
    constructor() {
        this.gearIcon = _bitwarden_assets_svg__WEBPACK_IMPORTED_MODULE_1__.GearIcon;
    }
}
SubscriptionHiddenComponent.ɵfac = function SubscriptionHiddenComponent_Factory(__ngFactoryType__) { return new (__ngFactoryType__ || SubscriptionHiddenComponent)(); };
SubscriptionHiddenComponent.ɵcmp = /*@__PURE__*/ _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({ type: SubscriptionHiddenComponent, selectors: [["app-org-subscription-hidden"]], inputs: { providerName: "providerName" }, standalone: false, decls: 9, vars: 8, consts: [[1, "tw-flex", "tw-flex-col", "tw-items-center", "tw-text-info"], [1, "tw-size-56", "tw-content-center"], ["aria-hidden", "true", 3, "icon"], [1, "tw-font-bold"]], template: function SubscriptionHiddenComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 0)(1, "div", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](2, "bit-icon", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](3, "p", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](5, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](6, "p");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](8, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("icon", ctx.gearIcon);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind2"](5, 3, "billingManagedByProvider", ctx.providerName));
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](8, 6, "billingContactProviderForAssistance"));
    } }, dependencies: [_libs_components_src_icon_icon_component__WEBPACK_IMPORTED_MODULE_3__.BitIconComponent, _libs_angular_src_platform_pipes_i18n_pipe__WEBPACK_IMPORTED_MODULE_0__.I18nPipe], encapsulation: 2 });


/***/ }),

/***/ "./src/app/billing/organizations/subscription-status.component.ts":
/*!************************************************************************!*\
  !*** ./src/app/billing/organizations/subscription-status.component.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SubscriptionStatusComponent: () => (/* binding */ SubscriptionStatusComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ "../../node_modules/@angular/core/fesm2022/core.mjs");
/* harmony import */ var _bitwarden_common_billing_models_response_organization_subscription_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bitwarden/common/billing/models/response/organization-subscription.response */ "../../libs/common/src/billing/models/response/organization-subscription.response.ts");
/* harmony import */ var _bitwarden_common_platform_abstractions_i18n_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bitwarden/common/platform/abstractions/i18n.service */ "../../libs/common/src/platform/abstractions/i18n.service.ts");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/common */ "../../node_modules/@angular/common/fesm2022/common_module-Dx7dWex5.mjs");
/* harmony import */ var _libs_components_src_async_actions_bit_action_directive__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../libs/components/src/async-actions/bit-action.directive */ "../../libs/components/src/async-actions/bit-action.directive.ts");
/* harmony import */ var _libs_components_src_button_button_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../libs/components/src/button/button.component */ "../../libs/components/src/button/button.component.ts");
/* harmony import */ var _libs_components_src_callout_callout_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../../libs/components/src/callout/callout.component */ "../../libs/components/src/callout/callout.component.ts");
/* harmony import */ var _libs_angular_src_platform_pipes_i18n_pipe__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../../libs/angular/src/platform/pipes/i18n.pipe */ "../../libs/angular/src/platform/pipes/i18n.pipe.ts");
// FIXME: Update this file to be type safe and remove this and next line
// @ts-strict-ignore











function SubscriptionStatusComponent_bit_callout_1_button_3_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "button", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](2, "i18n");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("bitAction", ctx_r0.requestReinstatement);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](2, 2, "reinstateSubscription"), " ");
} }
function SubscriptionStatusComponent_bit_callout_1_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "bit-callout", 3)(1, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](3, SubscriptionStatusComponent_bit_callout_1_button_3_Template, 3, 4, "button", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
} if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("type", ctx_r0.data.callout.severity)("title", ctx_r0.data.callout.header);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"](ctx_r0.data.callout.body);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx_r0.data.callout.showReinstatementButton);
} }
function SubscriptionStatusComponent_ng_container_8_Template(rf, ctx) { if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](1, "dt");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](3, "dd")(4, "span", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](6, "dt");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](8, "titlecase");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](9, "dd");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](10);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](11, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerEnd"]();
} if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"](ctx_r0.data.status.label);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", ctx_r0.displayedStatus, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](8, 4, ctx_r0.data.date.label), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind2"](11, 6, ctx_r0.data.date.value, "mediumDate"), " ");
} }
class SubscriptionStatusComponent {
    constructor(datePipe, i18nService) {
        this.datePipe = datePipe;
        this.i18nService = i18nService;
        this.reinstatementRequested = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();
        this.requestReinstatement = () => this.reinstatementRequested.emit();
    }
    get displayedStatus() {
        const sponsored = this.subscription.items.some((item) => item.sponsoredSubscriptionItem);
        return sponsored ? this.i18nService.t("sponsored") : this.data.status.value;
    }
    get planName() {
        return this.organizationSubscriptionResponse.plan.name;
    }
    get status() {
        return this.subscription
            ? this.subscription.status != "canceled" && this.subscription.cancelAtEndDate
                ? "pending_cancellation"
                : this.subscription.status
            : "free";
    }
    get subscription() {
        var _a;
        return (_a = this.organizationSubscriptionResponse) === null || _a === void 0 ? void 0 : _a.subscription;
    }
    get data() {
        const defaultStatusLabel = this.i18nService.t("status");
        const nextChargeDateLabel = this.i18nService.t("nextCharge");
        const subscriptionExpiredDateLabel = this.i18nService.t("subscriptionExpired");
        const cancellationDateLabel = this.i18nService.t("cancellationDate");
        switch (this.status) {
            case "free": {
                return {};
            }
            case "trialing": {
                return {
                    status: {
                        label: defaultStatusLabel,
                        value: this.i18nService.t("trial"),
                    },
                    date: {
                        label: nextChargeDateLabel,
                        value: this.subscription.periodEndDate,
                    },
                };
            }
            case "active": {
                return {
                    status: {
                        label: defaultStatusLabel,
                        value: this.i18nService.t("active"),
                    },
                    date: {
                        label: nextChargeDateLabel,
                        value: this.subscription.periodEndDate,
                    },
                };
            }
            case "past_due": {
                const pastDueText = this.i18nService.t("pastDue");
                const suspensionDate = this.datePipe.transform(this.subscription.suspensionDate, "mediumDate");
                const calloutBody = this.subscription.collectionMethod === "charge_automatically"
                    ? this.i18nService.t("pastDueWarningForChargeAutomatically", this.subscription.gracePeriod, suspensionDate)
                    : this.i18nService.t("pastDueWarningForSendInvoice", this.subscription.gracePeriod, suspensionDate);
                return {
                    status: {
                        label: defaultStatusLabel,
                        value: pastDueText,
                    },
                    date: {
                        label: subscriptionExpiredDateLabel,
                        value: this.subscription.unpaidPeriodEndDate,
                    },
                    callout: {
                        severity: "warning",
                        header: pastDueText,
                        body: calloutBody,
                        showReinstatementButton: false,
                    },
                };
            }
            case "unpaid": {
                return {
                    status: {
                        label: defaultStatusLabel,
                        value: this.i18nService.t("unpaid"),
                    },
                    date: {
                        label: subscriptionExpiredDateLabel,
                        value: this.subscription.unpaidPeriodEndDate,
                    },
                    callout: {
                        severity: "danger",
                        header: this.i18nService.t("unpaidInvoice"),
                        body: this.i18nService.t("toReactivateYourSubscription"),
                        showReinstatementButton: false,
                    },
                };
            }
            case "pending_cancellation": {
                const pendingCancellationText = this.i18nService.t("pendingCancellation");
                return {
                    status: {
                        label: defaultStatusLabel,
                        value: pendingCancellationText,
                    },
                    date: {
                        label: cancellationDateLabel,
                        value: this.subscription.periodEndDate,
                    },
                    callout: {
                        severity: "warning",
                        header: pendingCancellationText,
                        body: this.i18nService.t("subscriptionPendingCanceled"),
                        showReinstatementButton: true,
                    },
                };
            }
            case "incomplete_expired":
            case "canceled": {
                const canceledText = this.i18nService.t("canceled");
                return {
                    status: {
                        label: defaultStatusLabel,
                        value: canceledText,
                    },
                    date: {
                        label: cancellationDateLabel,
                        value: this.subscription.periodEndDate,
                    },
                    callout: {
                        severity: "danger",
                        header: canceledText,
                        body: this.i18nService.t("subscriptionCanceled"),
                        showReinstatementButton: false,
                    },
                };
            }
        }
    }
}
SubscriptionStatusComponent.ɵfac = function SubscriptionStatusComponent_Factory(__ngFactoryType__) { return new (__ngFactoryType__ || SubscriptionStatusComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_angular_common__WEBPACK_IMPORTED_MODULE_4__.DatePipe), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_bitwarden_common_platform_abstractions_i18n_service__WEBPACK_IMPORTED_MODULE_1__.I18nService)); };
SubscriptionStatusComponent.ɵcmp = /*@__PURE__*/ _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({ type: SubscriptionStatusComponent, selectors: [["app-subscription-status"]], inputs: { organizationSubscriptionResponse: "organizationSubscriptionResponse" }, outputs: { reinstatementRequested: "reinstatementRequested" }, standalone: false, decls: 9, vars: 6, consts: [[3, "type", "title", 4, "ngIf"], [1, "tw-grid", "tw-grid-flow-col", "tw-grid-rows-2"], [4, "ngIf"], [3, "type", "title"], ["bitButton", "", "buttonType", "secondary", "type", "button", 3, "bitAction", 4, "ngIf"], ["bitButton", "", "buttonType", "secondary", "type", "button", 3, "bitAction"], [1, "tw-capitalize"]], template: function SubscriptionStatusComponent_Template(rf, ctx) { if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerStart"](0);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](1, SubscriptionStatusComponent_bit_callout_1_Template, 4, 4, "bit-callout", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](2, "dl", 1)(3, "dt");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](5, "i18n");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](6, "dd");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](8, SubscriptionStatusComponent_ng_container_8_Template, 12, 9, "ng-container", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerEnd"]();
    } if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.data.callout);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](5, 4, "billingPlan"));
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"](ctx.planName);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.data.status && ctx.data.date);
    } }, dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_4__.NgIf, _libs_components_src_async_actions_bit_action_directive__WEBPACK_IMPORTED_MODULE_5__.BitActionDirective, _libs_components_src_button_button_component__WEBPACK_IMPORTED_MODULE_6__.ButtonComponent, _libs_components_src_callout_callout_component__WEBPACK_IMPORTED_MODULE_7__.CalloutComponent, _angular_common__WEBPACK_IMPORTED_MODULE_4__.TitleCasePipe, _angular_common__WEBPACK_IMPORTED_MODULE_4__.DatePipe, _libs_angular_src_platform_pipes_i18n_pipe__WEBPACK_IMPORTED_MODULE_2__.I18nPipe], encapsulation: 2 });


/***/ })

}]);
//# sourceMappingURL=src_app_billing_organizations_organization-billing_module_ts.3d9a6ffb35e7defa67fe.js.map